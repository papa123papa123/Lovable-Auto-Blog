'use strict';mix_d("SBVideoCards__sb-video-product-collection-desktop:sb-video-product-collection-desktop__Mtd2uKeM","exports tslib @c/logger @c/metrics @c/pagemarker @c/scoped-dom @c/dom @p/a-ajax @c/weblabs @p/A @c/aui-carousel @p/a-carousel-constants @p/a-carousel-framework @p/a-carousel-strategies @c/aui-utils @c/aui-truncate @c/browser-operations @c/aui-modal @c/aui-untrusted-ajax".split(" "),function(ob,n,pb,D,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc){function H(a){return a&&"object"===
typeof a&&"default"in a?a:{"default":a}}function zc(a){void 0===a&&(a=30);var f=y["default"].cardRoot.querySelectorAll(".mobileEnergyEfficiencyContainer");if(null===f||void 0===f?0:f.length){var h="min-height:"+a+"px;";f.forEach(function(c){var b=c.querySelector(".energyEfficiencyContainer"),d=c.querySelector(".energyEfficiencyProductFicheLabel");c=c.querySelector("svg");b&&d&&c?(b.setAttribute("style",h),d.setAttribute("style","font-size: 12px!important;line-height: 16px!important;"),c.setAttribute("style",
"height: 18px;")):L["default"].log("Mobile EEL badging classes are not present","ERROR")})}}var L=H(pb),La=H(kc),y=H(lc),ea=H(mc),Ac=H(nc),Bc=H(oc),u=H(pc),Cc=H(qc),w=H(rc),Ma=H(sc),na=H(tc),qb=H(wc),Dc=H(xc),Ec=H(yc),ca;(function(a){a.DOM_READY="DOM_READY";a.AF="AF";a.WD_HORIZONTAL_SCROLL="WD_HORIZONTAL_SCROLL";a.IMMEDIATELY="IMMEDIATELY"})(ca||(ca={}));var W;(function(a){a.AF_PAGE_2_PLUS_MOBILE="AF_PAGE_2_PLUS_MOBILE";a.AF="AF";a.DOM_READY="DOM_READY";a.IMMEDIATELY="IMMEDIATELY";a.WD_CARD_VISIBLE=
"WD_CARD_VISIBLE"})(W||(W={}));var O;(function(a){a.VIDEO_SINGLE_PRODUCT="video-single-product";a.CONFIGURABLE="configurable-horizontal-video";a.MULTI_BRAND_VIDEO="multi-brand-video";a.VIDEO_SINGLE_BRAND="video-single-brand";a.VIDEO_STORE="video-store";a.VIDEO_STORE_PRODUCT_FEATURE="video-store-product-feature";a.VIDEO_PRODUCT_COLLECTION="video-product-collection";a.SHORT_FORM_VIDEO="short-form-video";a.VIDEO_SPLIT="video-split";a.HOMEPAGE_WINDOW_DISPLAY="video-homepage-wd"})(O||(O={}));var M;(function(a){a.SPARKLE_MOBILE=
"loom-mobile-top-slot";a.SPARKLE_DESKTOP="loom-desktop-top-slot";a.INLINE_MOBILE="loom-mobile-inline-slot";a.INLINE_DESKTOP="loom-desktop-inline-slot";a.BOTTOM_MOBILE="loom-mobile-bottom-slot";a.BOTTOM_DESKTOP="loom-desktop-bottom-slot";a.MOBILE_HQP="mobile-hero-quick-promo";a.BRAND_DISCOVERY_FEEDS_MOBILE="brand-discovery-feeds-mobile";a.HOMEPAGE_WINDOW_DISPLAY="mobile-gateway-atf"})(M||(M={}));var Fc=function(a,f){return a===M.SPARKLE_MOBILE&&1===parseInt(""+f)||a===M.SPARKLE_DESKTOP&&1===parseInt(""+
f)},Gc=function(){var a=null;P.now("s-progressive-scroll-position").execute(function(f){f&&(a=f.get())});return!!a},Hc=new Set(["UnBranded_PDP_T4","UnBranded_PDP_T5","UnBranded_PDP_T6"]),oa=function(a,f){f=f||y["default"].cardRoot;return!a||f.matches(a)?f:f.querySelector(a)},Na=function(a,f){return(f=oa("["+a+"]",f))?f.getAttribute(a):null},X=function(){return ea["default"].cardRoot.ownerDocument},T=function(){return X().defaultView},Ic=function(a){var f,h;return null===(h=null===(f=T())||void 0===
f?void 0:f.matchMedia)||void 0===h?void 0:h.call(f,a)},Jc=function(a,f,h){void 0===f&&(f=ca.DOM_READY);void 0===h&&(h={});if(f===ca.AF){f=h.widgetGroupId;f=void 0===f?"":f;var c=h.pageNumber;c=void 0===c?"":c;h=h.experienceVariation;h=void 0===h?"":h;var b=f===M.SPARKLE_MOBILE&&1<parseInt(""+c)&&Hc.has(h),d=(f===M.INLINE_MOBILE||f===M.BOTTOM_MOBILE)&&1<parseInt(""+c);P.when("Rush","af").execute(function(e){if((d||b)&&Gc()){var g=!1;e.on("s-progressive-scroll-util:aboveTheFoldComplete",function(){g||
(a(W.AF_PAGE_2_PLUS_MOBILE),g=!0)})}else a(W.AF)})}else f===ca.WD_HORIZONTAL_SCROLL?h.eagerDownload?a(W.WD_CARD_VISIBLE):La["default"].visible(200).then(function(){return a(W.WD_CARD_VISIBLE)}):f===ca.IMMEDIATELY?a(W.IMMEDIATELY):(h=function(){return a(W.DOM_READY)},La["default"].pageReady.then(h,h))},rb=function(){},Kc=function(a){var f=a.url,h=a.onSuccess,c=a.onError;f?Ac["default"].get(f,{success:function(b){b&&"ok"===b.status?h(b):c()},error:c,abort:c}):c()},Lc=function(a){var f=a.url,h=a.payload,
c=a.onSuccess,b=void 0===c?rb:c;a=a.onError;a=void 0===a?rb:a;f?fetch(f,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:h}).then(function(d){if(!d.ok&&0!==d.status)throw Error(d.status+" "+d.statusText);b(d)}).catch(a):a()},Mc=function(a,f,h){var c=new Promise(function(b,d){var e=setTimeout(function(){clearTimeout(e);b()},f)});a=fetch(a,h);return Promise.race([a,c])},Nc=function(a){try{var f=encodeURIComponent,h=JSON,c=h.stringify,b=JSON.parse(a);var d={adCreativeMetaData:{adId:b.feedbackRequestAdId,
advertiserId:b.feedbackRequestAdvertiserId,adNetwork:"aax",adProgramId:1010,adCreativeDetails:[{advertiserIdNS:b.feedbackRequestAdvertiserIdNS,campaignId:b.feedbackRequestCampaignId,selectionSignals:sb(b.feedbackRequestSelectionSignals)}]},adPlacementMetaData:{adElementId:b.adElementId,pageType:b.pageType,slotName:b.slotName}};return"/af/feedback-link?pl="+f(c.call(h,d))}catch(e){return null}},Oa=function(){var a=oa('[data-id="afb-sponsored"]');a&&(a.style.display="block")},Qc=function(a,f){return n.__awaiter(void 0,
void 0,void 0,function(){var h,c,b,d;return n.__generator(this,function(e){switch(e.label){case 0:h=f.cardName;c=f.isAdFeedbackForCards;if(!c)return[3,1];Oc(f).then(function(){a.reportAdFeedbackLoadSucceeded()}).catch(function(g){a.reportAdFeedbackLoadFailedFromErr(g.message||"")});return[3,4];case 1:return e.trys.push([1,3,,4]),[4,Pc()];case 2:return e.sent(),a.reportAdFeedbackLoadSucceeded(),(b=y["default"].cardRoot.querySelector('[data-id="afb-content"]'))?b.querySelectorAll("a").forEach(function(g){g.addEventListener("click",
a.reportAdFeedbackPopoverOpened)}):D.count(h+"-AdfeedbackElementNotFound"),[3,4];case 3:return d=e.sent(),a.reportAdFeedbackLoadFailedFromErr(d.message||""),[3,4];case 4:return[2]}})})},Oc=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var f,h,c,b,d;return n.__generator(this,function(e){switch(e.label){case 0:f=Na("data-ad-feedback");h=Na("data-ad-feedback-label-id");c=a.enableAdFeedback;if(!f||!h)return[2,Promise.reject(Error("data-ad-feedback attributes not found"))];b=JSON.parse(f);
d=function(){return{adFeedbackLabelId:h,adCreativeMetaData:{adCreativeDetails:b.creativeDetails.map(function(g,k){var l=g.adId,r=g.advertiserId,m=g.advertiserIdNS,t=g.campaignId,x=sb(g.selectionSignals),v=g.title;(g=g.imageUrl)?(g={url:g,width:0,height:0},g={lowResolutionImage:g,highResolutionImages:[g]}):g=void 0;return{adId:l,advertiserId:r,adCreativeIndex:k,adNetwork:"aax",advertiserIdNS:m,campaignId:t,selectionSignals:x,title:v,adCreativeImage:g}})}}};e.label=1;case 1:return e.trys.push([1,3,
,4]),[4,c(d)];case 2:return e.sent(),[3,4];case 3:return e.sent(),[2,Promise.reject(Error("enableAdFeedbackClient call failed"))];case 4:return[2,Promise.resolve("success")]}})})},Pc=function(){var a=Na("data-ad-feedback");if(a){var f=Nc(a);return new Promise(function(h,c){Kc({url:f,onSuccess:function(b){try{var d=b.html,e=oa('[data-id="afb-content"]');if(e&&d){var g=oa('[data-id="afb-sponsored"]');g&&(g.style.display="none");e.innerHTML=d}var k=b.script;if(k){var l=X().createElement("script");l.type=
"text/javascript";l.innerHTML=k;oa().appendChild(l)}}catch(r){Oa(),c(Error("setHtml or setScript failed"))}h("success")},onError:function(){Oa();c(Error("get ad feedback request failed"))}})})}return Promise.reject(Error("data-ad-feedback attributes not found"))},sb=function(a){var f;if(a){switch(null===(f=a.pastActivity)||void 0===f?void 0:f.toUpperCase()){case "STORE_ONLY":f=1;break;case "AMAZON_AND_OTHER":f=3;break;case "AMAZON_ONLY":f=2;break;default:f=0}return n.__assign(n.__assign({},a),{pastActivity:f})}},
ja;(function(a){a.BETA="beta";a.GAMMA="gamma";a.PROD="prod"})(ja||(ja={}));var tb=function(){function a(){}a.getStage=function(){var f=T();return(f=f&&f.location&&f.location.hostname)?"localhost"===f||"mix.corp.amazon.com"===f||"development.amazon.com"===f||/^[a-z]{2}-development\.amazon\.com$/.test(f)?ja.BETA:/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(f)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(f)||/^[a-z]{2}-pre-prod\.amazon\.com$/.test(f)?ja.GAMMA:ja.PROD:ja.PROD};return a}(),B=function(){function a(){}
a.eventListeners={};a.addEventListener=function(f,h,c,b){a.setupListenerIfItDoesntExist(f,h);a.addCallbackWithPriority(f,h,c,b)};a.removeEventListener=function(f,h,c,b){a.removeCallbackWithPriority(f,h,c,b)&&a.removeListenerIfNoLongerNeeded(f,h)};a.removeEventListenerSafely=function(f,h,c,b){a.removeCallbackWithPriority(f,h,c,b)&&a.removeListenerWithoutDeletingElement(f,h)};a.removeListenerWithoutDeletingElement=function(f,h){0===a.eventListeners[f][h].listeners.length&&(f.removeEventListener(h,a.eventListeners[f][h].generatedCallback),
delete a.eventListeners[f][h])};a.removeListenerIfNoLongerNeeded=function(f,h){0===a.eventListeners[f][h].listeners.length&&(f.removeEventListener(h,a.eventListeners[f][h].generatedCallback),delete a.eventListeners[f][h],Object.keys(a.eventListeners[f]).length&&delete a.eventListeners[f])};a.removeCallbackWithPriority=function(f,h,c,b){if(!a.eventListeners[f]||!a.eventListeners[f][h])return!1;a.eventListeners[f][h].listeners=a.eventListeners[f][h].listeners.filter(function(d){return d.priority!==
c||d.callback!==b});return!0};a.setupListenerIfItDoesntExist=function(f,h){a.eventListeners[f]||(a.eventListeners[f]={});a.eventListeners[f][h]||(a.eventListeners[f][h]={generatedCallback:a.generateCallback(f,h),listeners:[]},f.addEventListener(h,a.eventListeners[f][h].generatedCallback))};a.addCallbackWithPriority=function(f,h,c,b){a.eventListeners[f][h].listeners.push({callback:b,priority:c});a.eventListeners[f][h].listeners.sort(function(d,e){return d.priority-e.priority})};a.generateCallback=
function(f,h){return function(c){a.eventListeners[f][h].listeners.forEach(function(b){b.callback&&b.callback(c)})}};return a}(),Rc=["messageId","timestamp"],Sc=function(a){var f=function(){},h=function(){var b=function(){if(a.XDomainRequest){var d=new a.XDomainRequest;d.onerror=f;d.ontimeout=f;d.onprogress=f;d.onload=f;d.timeout=0;return d}if(a.XMLHttpRequest){d=new a.XMLHttpRequest;if(!("withCredentials"in d))throw"";return d}return null};return{isSupported:!0,send:function(d,e){if(e&&d){var g=b();
if(!g)throw"";g.open("POST",d,!0);g.setRequestHeader&&g.setRequestHeader("Content-type","text/plain");g.send(e)}}}}(),c=function(){return{isSupported:!!a.navigator.sendBeacon,send:function(b,d){if(b&&d&&!a.navigator.sendBeacon(b,d))throw"";}}}();return{ajaxClient:h,beaconClient:c}},Tc=function(){return function(a,f){var h=this;this.flush=function(b){void 0===b&&(b=!1);h.eventsQueue.length&&(b||!1!==h.browserWindow.navigator.onLine)&&(b=h.eventsQueue.length,h.sendWithPriority(h.transportationClient.beaconClient,
h.transportationClient.ajaxClient),h.resetBatch(),h.ueCount("EventsSent",b))};this.processEvent=function(b,d){void 0===d&&(d={n:1});var e=h.unloadHandlerCalled=!1;h.isValidAPICall(b)&&(e=h.addEvent(b,d));e?h.ueCount("ClientEventsSuccess"):h.ueCount("ClientEventsFailed");return e};this.getEventQueueCount=function(){return h.eventsQueue.length};this.buildCompressor=function(){var b=function(k){return k.length>("#"+h.dictionaryIndex).length||"#"===k.charAt(0)},d=function(k){if(k)switch(typeof k){case "number":return!(isNaN(k)||
Infinity===k)&&b(k.toString());case "boolean":break;case "string":return b(k);default:return!0}return!1},e=function(k){h.eventsDictionary[k]="#"+h.dictionaryIndex++;h.reverseEventsDictionary[h.eventsDictionary[k]]=k;return h.eventsDictionary[k]},g=function(k){if(d(k)){var l=0;k instanceof Array?l=2:k instanceof Function?l=null:k instanceof Object&&(l=1);switch(l){case 0:return h.eventsDictionary[k]?h.eventsDictionary[k]:e(k);case 2:var r=[];for(l=0;l<k.length;l++)r[l]=g(k[l]);return r;case 1:l={};
for(r in k)Object.prototype.hasOwnProperty.call(k,r)&&(l[h.eventsDictionary[r]?h.eventsDictionary[r]:e(r)]=-1===Rc.indexOf(r)?g(k[r]):k[r]);return l}}return k};return{buildPOSTObject:function(){return h.stringify({cs:{dct:h.reverseEventsDictionary},events:h.eventsQueue})},compressData:g}};this.onBeforeUnload=function(){!0!==h.unloadHandlerCalled&&(h.flush(),h.unloadHandlerCalled=!0)};this.stringify=function(b){try{return JSON.stringify(b)}catch(d){return null}};this.resetBatch=function(){h.eventsQueue=
[];h.eventsDictionary={};h.reverseEventsDictionary={};h.dictionaryIndex=0;h.batchSize=0;h.lowPriorityTimer=0;h.highPriorityTimer=0};this.sendWithClient=function(b){if(null==h.endpoint||""===h.endpoint)h.ueCount("SushiClientEndpointMissing");else{if(b.isSupported){var d=h.compressor.buildPOSTObject();return b.send(h.endpoint,d)}throw"";}};this.sendWithPriority=function(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];for(d=0;d<b.length;d++){var e=b[d];try{return h.sendWithClient(e)}catch(g){}}return null};
this.startHighPriorityQueueTimer=function(){0===h.highPriorityFlushInterval?h.flush():h.highPriorityTimer||(h.highPriorityTimer=setTimeout(h.flush,h.highPriorityFlushInterval,h,!1))};this.startLowPriorityQueueTimer=function(){h.lowPriorityTimer||(h.lowPriorityTimer=setTimeout(h.flush,h.lowPriorityFlushInterval,h,!1))};this.generateMessageId=function(b,d){return b+"-"+d+"-"+h.eventSequence};this.getCurrentISODate=function(){var b=new Date,d=function(e){return 10>e?"0"+e:e};return"function"===typeof Date.prototype.toISOString?
b.toISOString():b.getUTCFullYear()+"-"+d(b.getUTCMonth()+1)+"-"+d(b.getUTCDate())+"T"+d(b.getUTCHours())+":"+d(b.getUTCMinutes())+":"+d(b.getUTCSeconds())+"."+String((b.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(b){b.timestamp=h.getCurrentISODate();b.sequence=h.eventSequence;b.messageId=h.generateMessageId(b.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(b){b.n?h.startHighPriorityQueueTimer():h.startLowPriorityQueueTimer()};this.encodeEvent=
function(b,d,e){d=d.length;(499===h.eventsQueue.length||524288<h.batchSize+d)&&h.flush(!0);h.batchSize+=d;b={data:h.compressor.compressData(b)};h.eventsQueue.push(b);h.startTimers(e)};this.addEvent=function(b,d){h.decorateEvent(b);var e=h.stringify(b);return e?(h.encodeEvent(b,e,d),!0):!1};this.isValidAPIParam=function(b,d){return b&&-1<b.constructor.toString().indexOf(d)};this.isMaxCallsReached=function(){h.eventSequence++;1E3<h.eventSequence&&h.ueCount("SushiClientMaxCallsReached");return 1E3<h.eventSequence};
this.isValidAPICall=function(b){return!h.isMaxCallsReached()&&h.isValidAPIParam(b,"Object")};this.ueCount=function(b,d){try{var e=0===d?0:d||(D.count(h.metricsTag+":"+b)||0)+1;D.count(h.metricsTag+":"+b,e);return e}catch(g){return pb.log("SushiClient.ueCount error: "+g,"ERROR"),0}};this.browserWindow=T();this.endpoint=a;this.metricsTag=f;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=
this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=Sc(this.browserWindow);this.compressor=this.buildCompressor();B.addEventListener(this.browserWindow,"beforeunload",100,this.onBeforeUnload);B.addEventListener(X(),"visibilitychange",100,this.onBeforeUnload);B.addEventListener(this.browserWindow,"blur",100,this.onBeforeUnload);B.addEventListener(this.browserWindow,"pagehide",100,this.onBeforeUnload);this.browserWindow.app||
(this.browserWindow.app={});var c=this.browserWindow.app.willDisappear;this.browserWindow.app.willDisappear=function(){c&&c();h.onBeforeUnload()}}}(),Y;(function(a){a.VIEWED="VIEWED";a.PROGRESS_FIVE_SECONDS="PROGRESS_5_SEC";a.FIRST_QUARTILE="FIRST_QUARTILE";a.MIDPOINT="MIDPOINT";a.THIRD_QUARTILE="THIRD_QUARTILE";a.COMPLETE="COMPLETE";a.UNMUTE="UNMUTE"})(Y||(Y={}));var wa;(function(a){a.ICON_TAP="IconTap";a.VIDEO_OFF_SCREEN="VideoOffScreen";a.INHERIT="Inherit";a.WEBKIT_MUTED="WebkitMuted"})(wa||(wa=
{}));var xa;(function(a){a.ICON_TAP="IconTap";a.DEFAULT_OFF="DefaultOff"})(xa||(xa={}));var ub;(function(a){a.SINGLE_PAGE="SINGLE_PAGE";a.CROSS_PAGE="CROSS_PAGE"})(ub||(ub={}));var vb;(function(a){a.CONTENT_HASH="CONTENT_HASH";a.CAMPAIGN_AND_ADV_ID="CAMPAIGN_AND_ADV_ID"})(vb||(vb={}));var q;(function(a){a.ACE_VIDEO_RESPONSE_RECEIVED="AceVideoResponseReceived";a.ADBLOCK_DETECTED="AdBlockDetected";a.AD_FEEDBACK_LOAD_FAILED_FROM_ERR="AdFeedbackLoadFailedFromErr";a.AD_FEEDBACK_LOAD_SUCCEEDED="AdFeedbackLoadSucceeded";
a.AD_FEEDBACK_LOAD_POPOVER_OPENED="AdFeedbackPopoverOpened";a.AUDIO_TOGGLE_ICON_DISPLAYED="AudioToggleIconDisplayed";a.BACKGROUND_CLICKED="BackgroundClicked";a.PAUSE_ICON_DISPLAYED="PauseIconDisplayed";a.BRAND_LOGO_CLICKED="BrandLogoClicked";a.BRAND_CTA_LINK_CLICKED="BrandCtaLinkClicked";a.BRAND_NAME_CLICKED="BrandNameClicked";a.CREATOR_LOGO_CLICKED="CreatorLogoClicked";a.CREATOR_CTA_LINK_CLICKED="CreatorCtaLinkClicked";a.CARD_ITEM_RECEIVED="CardItemReceived";a.CAROUSEL_PAGE_CHANGED="CarouselPageChanged";
a.CAPTIONS_ENABLED="CaptionsEnabled";a.CAPTIONS_DISABLED="CaptionsDisabled";a.CAPTIONS_LOAD_FAILURE="CaptionsLoadFailure";a.CC_ICON_DISPLAYED="CcIconDisplayed";a.CTA_BANNER_CLICKED="CtaBannerClicked";a.DUPE="Dupe";a.DUPE_BY_ADVID_CAMPAIGNID="DupeByAdvIdCampaignId";a.DUPE_BY_CONTENT_HASH="DupeByContentHash";a.EVENT_BANNER_DISPLAYED="EventBannerDisplayed";a.EVENT_BANNER_CLICKED="EventBannerClicked";a.HEADLINE_CLICKED="HeadlineClicked";a.IMMERSIVE_VIDEO_FAILED="ImmersiveVideoFailed";a.IMMERSIVE_VIDEO_LOADED=
"ImmersiveVideoLoaded";a.MISSING_BACKGROUND_ELEMENT="MissingBackgroundElement";a.MISSING_BRAND_ELEMENT="MissingBrandElement";a.MISSING_PRODUCT_ELEMENT="MissingProductElement";a.MISSING_PRODUCT_ELEMENTS="MissingProductElements";a.MISSING_VIDEO_ELEMENT="MissingVideoElement";a.MISSING_CREATOR_ELEMENT="MissingCreatorElement";a.NO_AD_ERROR="NoAdError";a.NO_VIDEO_SRC_ON_ELEMENT="NoVideoSrcOnElement";a.NUMBER_OF_ADS_LESS_THAN_MIN_ERR="NumberOfAdsLessThanMin";a.PLAYBACK_COMPLETED="PlaybackCompleted";a.PLAYBACK_FAILED_TO_START_AFTER_PLAY=
"PlaybackFailedToStartAfterPlay";a.PRODUCT_CLICKED="ProductClicked";a.PRODUCT_RECEIVED="ProductReceived";a.PRODUCT_TWISTER_VARIATION="ProductTwisterVariation";a.MULTI_PRODUCT_COLLECTION="MultiProductCollection";a.TIME_TO_FIRST_FRAME="TimeToFirstFrame";a.TIME_TO_FIRST_INTERRUPT="TimeToFirstInterrupt";a.CLIENT_LOAD_TO_FIRST_FRAME="ClientLoadToFirstFrame";a.VIDEO_ABORTED="VideoAborted";a.VIDEO_BUFFERING_ENDED="VideoBufferingEnded";a.VIDEO_BUFFERING_STARTED="VideoBufferingStarted";a.VIDEO_CLEARED_ON_HIDDEN_BROWSER=
"VideoClearedOnHiddenBrowser";a.VIDEO_CLICKED="VideoClicked";a.VIDEO_DURATION_PLAYED="VideoDurationPlayed";a.VIDEO_LOADED_ON_VISIBLE_BROWSER="VideoLoadedOnVisibleBrowser";a.VIDEO_OFF_SCREEN="VideoOffScreen";a.VIDEO_ON_SCREEN="VideoOnScreen";a.VIDEO_PAUSED="VideoPaused";a.VIDEO_PAUSED_INITIATED="VideoPausedInitiated";a.VIDEO_PAUSE_BUTTON_TRIGGERED="VideoPauseButtonTriggered";a.VIDEO_PLAY_BUTTON_TRIGGERED="VideoPlayButtonTriggered";a.VIDEO_PLAY_FROM_PAUSE="VideoPlayFromPause";a.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED=
"VideoPausedOnAutoplayDisabled";a.VIDEO_PLAYBACK_FAILURE="VideoPlaybackFailure";a.VIDEO_PLAYBACK_INITIATED="VideoPlaybackInitiated";a.VIDEO_PLAYBACK_STARTED="VideoPlaybackStarted";a.VIDEO_PLAY_PROMISE_NOT_SUPPORTED="VideoPlayPromiseNotSupported";a.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON="VideoPreviewImageNotMediaAmazon";a.VIDEO_PLAY_PROMISE_REJECTED="VideoPlayPromiseRejected";a.VIDEO_READY_FOR_PLAYBACK="VideoReadyForPlayback";a.VIDEO_SOUND_OFF="VideoSoundOff";a.VIDEO_SOUND_ON="VideoSoundOn";a.VIDEO_VIEW=
"VideoView";a.VM_AD_UNIT_VIEWED="ViewMetricsAdUnitViewed";a.VM_VIDEO_VIEWED="ViewMetricsVideoViewed";a.VM_VIDEO_PROGRESS_FIVE_SECONDS="ViewMetricsVideoProgressFiveSeconds";a.VM_VIDEO_FIRST_QUARTILE="ViewMetricsVideoFirstQuartile";a.VM_VIDEO_MIDPOINT="ViewMetricsVideoMidpoint";a.VM_VIDEO_THIRD_QUARTILE="ViewMetricsVideoThirdQuartile";a.VM_VIDEO_COMPLETE="ViewMetricsVideoComplete";a.VM_VIDEO_UNMUTE="ViewMetricsVideoUnmute";a.VM_POST_FAILURE="ViewMetricsPostFailure";a.WIDGET_ON_SCREEN="WidgetOnScreen";
a.MULTI_ASIN_ADS_RECEIVED="MultiAsinAdsReceived";a.PDP_RENDERED_AS_PC="PDPRenderedAsPC"})(q||(q={}));var p;(function(a){a.APP_VERSION="appVersion";a.ADVERTISER_ID="advertiserId";a.AUTO_SCROLLED="autoScrolled";a.CAMPAIGN_ID="campaignId";a.CAROUSEL_ITEM_INDEX="carouselItemIndex";a.CAROUSEL_PAGE_NUMBER="carouselPageNumber";a.CC_TOGGLE_CAUSE="ccToggleCause";a.CC_MANDATORY="ccMandatory";a.CC_SRC="ccSrc";a.CLIENT_ID="clientId";a.CLIENT_EXECUTION_MODE="clientExecutionMode";a.CONTINUOUS_PLAYBACK_DURATION_MS=
"continuousPlaybackDurationMs";a.CURRENT_PAGE_URL="currentPageUrl";a.DEVICE_ENV="deviceEnv";a.DEVICE_MAKE="deviceMake";a.DEVICE_MODEL="deviceModel";a.DEVICE_OS="deviceOs";a.DEVICE_PLATFORM_VERSION="devicePlatformVersion";a.DEVICE_TYPE="deviceType";a.DROPPED_FRAMES="droppedFrames";a.ERROR_CODE="errorCode";a.ERROR_MESSAGE="errorMessage";a.EVENT_TYPE="eventType";a.LAYOUT="layout";a.EXPERIENCE="experience";a.EXPERIENCE_VARIATION="experienceVariation";a.HAS_BRAND_INFO="hasBrandInfo";a.HEADLINE="headline";
a.HEIGHT="height";a.IMAGE_URL="imageUrl";a.LANGUAGE="language";a.LINK_URL="linkUrl";a.LOAD_TIME_MS="loadTimeMs";a.LOGIC="logic";a.MARKETPLACE_ID="marketplaceId";a.METRICS_IDENTIFIER="metricsIdentifier";a.METRICS_SEQUENCE_NUMBER="metricsSequenceNumber";a.NETWORK_TYPE="networkType";a.NUMBER_OF_ADS="numberOfAds";a.NUMBER_OF_ASINS="numberOfAsins";a.PAGE_NUMBER="pageNumber";a.PAGE_TYPE="pageType";a.PERCENT_DOWNLOADED="percentDownloaded";a.PREV_CAROUSEL_PAGE_NUMBER="prevCarouselPageNumber";a.PRODUCT_COMPONENTS=
"productComponents";a.PRODUCT_INDEX="productIndex";a.PRODUCT_ASIN="asin";a.TWISTER_VARIATIONS_REQUESTED="twisterVariationsRequested";a.TWISTER_VARIATIONS_REQUEST_SUCCEEDED="twisterVariationsRequestSuceeded";a.TWISTER_VARIATIONS_DETAIL_REQUESTED="twisterVariationsDetailRequested";a.TWISTER_VARIATIONS_CHOSEN="twisterVariationsChosen";a.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED="numberOfTwisterVariationsReceived";a.REASON="reason";a.REQUEST_ID="requestId";a.RETRY_COUNT="retryCount";a.SEARCH_QUERY="searchQuery";
a.SOUND_TOGGLE_METHOD="soundToggleMethod";a.STAGE="stage";a.STATUS_CODE="statusCode";a.STORE_CTA="storeCta";a.STORE_NAME="storeName";a.STORE_URL="storeUrl";a.TIME_ON_SCREEN_MS="timeOnScreenMs";a.USER_AGENT="userAgent";a.VIDEO_BOUNDARY_CROSSED_TIME_MS="videoBoundaryCrossedTimeMs";a.VIDEO_CURRENT_TIME_MS="videoCurrentTimeMs";a.VIDEO_ORIENTATION="videoOrientation";a.VIDEO_PREVIEW_IMAGE_SRC="videoPreviewImageSrc";a.VIDEO_SRC="videoSrc";a.VIDEO_TOTAL_LENGTH_MS="videoTotalLengthMs";a.VIDEO_TYPE="videoType";
a.VIEWPORT_HEIGHT="viewportHeight";a.VIEWPORT_WIDTH="viewportWidth";a.WAS_BUFFERING="wasBuffering";a.WEBLABS="weblabs";a.WIDGET_GROUP_ID="widgetGroupId";a.WIDGET_INDEX="widgetIndex";a.WIDGET_TYPE="widgetType";a.WIDTH="width";a.VIEW_METRICS_FAILURE="viewMetricsFailure";a.MULTI_ASIN_ADS_COUNT="MultiAsinAdsCount"})(p||(p={}));var wb={shouldLogViewMetrics:!1,shouldBillViewMetrics:!0},Uc=function(){return function(a,f,h){var c=this;void 0===h&&(h=wb);this.reportPDPRenderedAsPC=function(b){b=c.newEvent(q.PDP_RENDERED_AS_PC,
b);c.recordEvent(b)};this.setClientMetricsContext=function(b){c.clientMetricsContext=b};this.reportWidgetOnScreen=function(){var b=c.newEvent(q.WIDGET_ON_SCREEN,c.resetVideoAdAttributes());c.recordEvent(b)};this.reportResponseReceived=function(b,d){var e=c.newEvent(q.ACE_VIDEO_RESPONSE_RECEIVED,c.resetVideoAdAttributes());e[p.NUMBER_OF_ADS]=null!==b&&void 0!==b?b:1;d&&(e[p.CLIENT_EXECUTION_MODE]=d);c.recordEvent(e)};this.reportNumAsins=function(b){var d=c.newEvent(q.MULTI_ASIN_ADS_RECEIVED);d[p.MULTI_ASIN_ADS_COUNT]=
b;c.recordEvent(d)};this.reportNoAdError=function(){var b=c.newEvent(q.NO_AD_ERROR,c.resetVideoAdAttributes());c.recordEvent(b)};this.reportNumOfAdsLessThanMinRequirement=function(){var b=c.newEvent(q.NUMBER_OF_ADS_LESS_THAN_MIN_ERR,c.resetVideoAdAttributes());c.recordEvent(b)};this.reportAdFeedbackLoadFailedFromErr=function(b){var d=c.newEvent(q.AD_FEEDBACK_LOAD_FAILED_FROM_ERR,c.resetVideoAdAttributes());d[p.ERROR_MESSAGE]=b;c.recordEvent(d)};this.reportAdFeedbackLoadSucceeded=function(){var b=
c.newEvent(q.AD_FEEDBACK_LOAD_SUCCEEDED,c.resetVideoAdAttributes());c.recordEvent(b)};this.reportAdFeedbackPopoverOpened=function(){var b=c.newEvent(q.AD_FEEDBACK_LOAD_POPOVER_OPENED,c.resetVideoAdAttributes());c.recordEvent(b)};this.reportImmersiveVideoLoaded=function(b){b=c.newEvent(q.IMMERSIVE_VIDEO_LOADED,b);c.recordEvent(b)};this.reportImmersiveVideoFailed=function(b,d){d=c.newEvent(q.IMMERSIVE_VIDEO_FAILED,d);d[p.ERROR_MESSAGE]=b;c.recordEvent(d)};this.reportVideoReadyForPlayback=function(b,
d,e,g,k){var l=c.newEvent(q.VIDEO_READY_FOR_PLAYBACK,g);l[p.LOAD_TIME_MS]=b;l[p.RETRY_COUNT]=d;l[p.PERCENT_DOWNLOADED]=e;l[p.VIDEO_TOTAL_LENGTH_MS]=k;l[p.VIDEO_ORIENTATION]=g.videoOrientation;c.recordEvent(l)};this.reportVideoPlaybackInitiated=function(b,d){d=c.newEvent(q.VIDEO_PLAYBACK_INITIATED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportVideoPlaybackStarted=function(b,d,e,g){g=c.newEvent(q.VIDEO_PLAYBACK_STARTED,g);g[p.VIDEO_CURRENT_TIME_MS]=b;g[p.PERCENT_DOWNLOADED]=d;g[p.DROPPED_FRAMES]=
e;c.recordEvent(g)};this.reportTimeToFirstFrame=function(b,d,e,g){g=c.newEvent(q.TIME_TO_FIRST_FRAME,g);g[p.LOAD_TIME_MS]=b;g[p.PERCENT_DOWNLOADED]=d;g[p.DROPPED_FRAMES]=e;c.recordEvent(g)};this.reportTimeToFirstInterrupt=function(b,d,e,g){g=c.newEvent(q.TIME_TO_FIRST_INTERRUPT,g);g[p.LOAD_TIME_MS]=b;g[p.PERCENT_DOWNLOADED]=d;g[p.DROPPED_FRAMES]=e;c.recordEvent(g)};this.reportClientLoadToFirstFrame=function(b,d,e,g){g=c.newEvent(q.CLIENT_LOAD_TO_FIRST_FRAME,g);g[p.LOAD_TIME_MS]=b;g[p.PERCENT_DOWNLOADED]=
d;g[p.DROPPED_FRAMES]=e;c.recordEvent(g)};this.reportVideoBufferingStarted=function(b,d,e,g){g=c.newEvent(q.VIDEO_BUFFERING_STARTED,g);g[p.VIDEO_CURRENT_TIME_MS]=b;g[p.PERCENT_DOWNLOADED]=d;g[p.DROPPED_FRAMES]=e;c.recordEvent(g)};this.reportVideoBufferingEnded=function(b,d,e,g){g=c.newEvent(q.VIDEO_BUFFERING_ENDED,g);g[p.VIDEO_CURRENT_TIME_MS]=b;g[p.PERCENT_DOWNLOADED]=d;g[p.DROPPED_FRAMES]=e;c.recordEvent(g)};this.reportVideoPlaybackFailure=function(b,d,e,g){g=c.newEvent(q.VIDEO_PLAYBACK_FAILURE,
g);g[p.VIDEO_CURRENT_TIME_MS]=b;g[p.ERROR_MESSAGE]=d;g[p.ERROR_CODE]=e;c.recordEvent(g)};this.reportVideoDurationPlayed=function(b,d,e,g){g=c.newEvent(q.VIDEO_DURATION_PLAYED,g);g[p.VIDEO_BOUNDARY_CROSSED_TIME_MS]=b;g[p.PERCENT_DOWNLOADED]=d;g[p.DROPPED_FRAMES]=e;c.recordEvent(g)};this.reportPlaybackCompleted=function(b,d,e){e=c.newEvent(q.PLAYBACK_COMPLETED,e);e[p.VIDEO_CURRENT_TIME_MS]=b;e[p.DROPPED_FRAMES]=d;c.recordEvent(e)};this.reportVideoOnScreen=function(b,d){d=c.newEvent(q.VIDEO_ON_SCREEN,
d);d[p.PERCENT_DOWNLOADED]=b;c.recordEvent(d)};this.reportVideoClearedOnHiddenBrowser=function(b){b=c.newEvent(q.VIDEO_CLEARED_ON_HIDDEN_BROWSER,b);c.recordEvent(b)};this.reportVideoLoadedOnVisibleBrowser=function(b){b=c.newEvent(q.VIDEO_LOADED_ON_VISIBLE_BROWSER,b);c.recordEvent(b)};this.reportVideoOffScreen=function(b,d,e,g){g=c.newEvent(q.VIDEO_OFF_SCREEN,g);g[p.TIME_ON_SCREEN_MS]=b;g[p.WAS_BUFFERING]=d;g[p.VIDEO_CURRENT_TIME_MS]=e;c.recordEvent(g)};this.reportVideoView=function(b,d,e){void 0===
d&&(d=!1);e=c.newEvent(q.VIDEO_VIEW,e);e[p.CONTINUOUS_PLAYBACK_DURATION_MS]=b;c.recordEvent(e);d&&c.sushiClient.flush(!0)};this.reportVideoPauseInitiated=function(b,d){d=c.newEvent(q.VIDEO_PAUSED_INITIATED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportVideoPlayFromPause=function(b,d){d=c.newEvent(q.VIDEO_PLAY_FROM_PAUSE,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportVideoPaused=function(b,d,e,g){g=c.newEvent(q.VIDEO_PAUSED,g);g[p.VIDEO_CURRENT_TIME_MS]=b;g[p.PERCENT_DOWNLOADED]=
d;g[p.DROPPED_FRAMES]=e;c.recordEvent(g)};this.reportVideoSoundOn=function(b,d,e){e=c.newEvent(q.VIDEO_SOUND_ON,e);e[p.VIDEO_CURRENT_TIME_MS]=b;e[p.SOUND_TOGGLE_METHOD]=d;c.recordEvent(e)};this.reportVideoSoundOff=function(b,d,e){e=c.newEvent(q.VIDEO_SOUND_OFF,e);e[p.VIDEO_CURRENT_TIME_MS]=b;e[p.SOUND_TOGGLE_METHOD]=d;c.recordEvent(e)};this.reportCaptionsOn=function(b,d,e){d=c.newEvent(q.CAPTIONS_ENABLED,d);d[p.LANGUAGE]=e;d[p.CC_TOGGLE_CAUSE]=b;c.recordEvent(d)};this.reportCaptionsOff=function(b,
d,e){d=c.newEvent(q.CAPTIONS_DISABLED,d);d[p.LANGUAGE]=e;d[p.CC_TOGGLE_CAUSE]=b;c.recordEvent(d)};this.reportCaptionsLoadFailure=function(b,d,e){var g=c.newEvent(q.CAPTIONS_LOAD_FAILURE,e);g[p.CC_SRC]=e.ccSrc;g[p.ERROR_MESSAGE]=b;g[p.ERROR_CODE]=d;c.recordEvent(g)};this.reportDupe=function(b,d,e){b=c.newEvent(q.DUPE,b);b[p.LOGIC]=d;b[p.REASON]=e;c.recordEvent(b)};this.reportDupeByCampaignAndAdvertiserId=function(b){b=c.newEvent(q.DUPE_BY_ADVID_CAMPAIGNID,b);c.recordEvent(b)};this.reportDupeByContentHash=
function(b){b=c.newEvent(q.DUPE_BY_CONTENT_HASH,b);c.recordEvent(b)};this.reportVideoClicked=function(b,d){d=c.newEvent(q.VIDEO_CLICKED,d,c.getDynamicMetricsAttributes());d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportProductClicked=function(b,d,e){d=c.newEvent(q.PRODUCT_CLICKED,d,c.getDynamicMetricsAttributes());d[p.VIDEO_CURRENT_TIME_MS]=b;if(e){b=e.productComponents;var g=e.productIndex;d[p.PRODUCT_ASIN]=e.asin;d[p.PRODUCT_INDEX]=g;d[p.PRODUCT_COMPONENTS]=b}c.recordEvent(d)};this.reportBackgroundClicked=
function(b,d){d=c.newEvent(q.BACKGROUND_CLICKED,d,c.getDynamicMetricsAttributes());d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportProductReceived=function(b,d,e){d=c.newEvent(q.PRODUCT_RECEIVED,d,c.getDynamicMetricsAttributes());d[p.VIDEO_CURRENT_TIME_MS]=b;if(e){b=e.productComponents;var g=e.productIndex;d[p.PRODUCT_ASIN]=e.asin;d[p.PRODUCT_COMPONENTS]=b;d[p.PRODUCT_INDEX]=g}c.recordEvent(d)};this.reportProductTwisterVariations=function(b,d){b=c.newEvent(q.PRODUCT_TWISTER_VARIATION,b);
if(d&&d.twisterVariationProperties){var e=d.twisterVariationProperties;d=e.twisterVariationsRequested;var g=e.twisterVariationsRequestSucceeded,k=e.twisterVariationDetailsRequested,l=e.numberOfTwisterVariationsAvailable;e=e.asinForTwisterChosen;b[p.TWISTER_VARIATIONS_REQUESTED]=null!==d&&void 0!==d?d:!1;b[p.TWISTER_VARIATIONS_REQUEST_SUCCEEDED]=null!==g&&void 0!==g?g:!1;b[p.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED]=l;b[p.TWISTER_VARIATIONS_DETAIL_REQUESTED]=null!==k&&void 0!==k?k:!1;b[p.TWISTER_VARIATIONS_CHOSEN]=
e}c.recordEvent(b)};this.reportProductAttributes=function(b,d){b=c.newEvent(q.MULTI_PRODUCT_COLLECTION,b);if(d){var e=d.productUrl;b[p.PRODUCT_ASIN]=d.asin;b[p.LINK_URL]=e}c.recordEvent(b)};this.reportPlaybackFailedToStartAfterPlay=function(b){b=c.newEvent(q.PLAYBACK_FAILED_TO_START_AFTER_PLAY,b);c.recordEvent(b)};this.reportAudioToggleIconDisplayed=function(b){b=c.newEvent(q.AUDIO_TOGGLE_ICON_DISPLAYED,b);c.recordEvent(b)};this.reportPauseIconDisplayed=function(b){b=c.newEvent(q.PAUSE_ICON_DISPLAYED,
b);c.recordEvent(b)};this.reportCcIconDisplayed=function(b){b=c.newEvent(q.CC_ICON_DISPLAYED,b);c.recordEvent(b)};this.reportVideoPauseButtonTriggered=function(b,d){d=c.newEvent(q.VIDEO_PAUSE_BUTTON_TRIGGERED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportVideoPausedOnAutoplayDisabled=function(b){b=c.newEvent(q.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED,b);c.recordEvent(b)};this.reportAdblockDetected=function(b){b=c.newEvent(q.ADBLOCK_DETECTED,b);c.recordEvent(b)};this.reportVideoAborted=function(b,
d){d=c.newEvent(q.VIDEO_ABORTED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportVideoPlayPromiseRejected=function(b,d){d=c.newEvent(q.VIDEO_PLAY_PROMISE_REJECTED,d);d[p.ERROR_MESSAGE]=b;c.recordEvent(d)};this.reportVideoPreviewImageNotMediaAmazon=function(b){b=c.newEvent(q.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON,b);c.recordEvent(b)};this.reportVideoPlayPromiseNotSupported=function(b){b=c.newEvent(q.VIDEO_PLAY_PROMISE_NOT_SUPPORTED,b);c.recordEvent(b)};this.reportMissingVideoElement=function(b){b=
c.newEvent(q.MISSING_VIDEO_ELEMENT,b);c.recordEvent(b)};this.reportMissingProductElement=function(b){b=c.newEvent(q.MISSING_PRODUCT_ELEMENT,b);c.recordEvent(b)};this.reportMissingProductElements=function(b){b=c.newEvent(q.MISSING_PRODUCT_ELEMENTS,b);c.recordEvent(b)};this.reportMissingBackgroundElement=function(b){b=c.newEvent(q.MISSING_BACKGROUND_ELEMENT,b);c.recordEvent(b)};this.reportMissingBrandElement=function(b,d){var e,g,k;b=c.newEvent(q.MISSING_BRAND_ELEMENT,b);b[p.STORE_NAME]=null!==(e=null===
d||void 0===d?void 0:d.storeName)&&void 0!==e?e:void 0;b[p.STORE_URL]=null!==(g=null===d||void 0===d?void 0:d.storeUrl)&&void 0!==g?g:void 0;b[p.STORE_CTA]=null!==(k=null===d||void 0===d?void 0:d.storeCta)&&void 0!==k?k:void 0;c.recordEvent(b)};this.reportBrandCtaLinkClicked=function(b,d){d=c.newEvent(q.BRAND_CTA_LINK_CLICKED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportBrandLogoClicked=function(b,d){d=c.newEvent(q.BRAND_LOGO_CLICKED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};
this.reportBrandNameClicked=function(b,d){d=c.newEvent(q.BRAND_NAME_CLICKED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportCreatorLogoClicked=function(b,d){d=c.newEvent(q.CREATOR_LOGO_CLICKED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportCreatorCtaClicked=function(b,d){d=c.newEvent(q.CREATOR_CTA_LINK_CLICKED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportCtaBannerClicked=function(b,d){d=c.newEvent(q.CTA_BANNER_CLICKED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};
this.reportHeadlineClicked=function(b,d){d=c.newEvent(q.HEADLINE_CLICKED,d);d[p.VIDEO_CURRENT_TIME_MS]=b;c.recordEvent(d)};this.reportEventBannerDisplayed=function(b,d){d=c.newEvent(q.EVENT_BANNER_DISPLAYED,d);d[p.LAYOUT]=b;c.recordEvent(d)};this.reportEventBannerClicked=function(b,d){d=c.newEvent(q.EVENT_BANNER_CLICKED,d);d[p.LAYOUT]=b;c.recordEvent(d)};this.reportMissingCreatorElement=function(b){b=c.newEvent(q.MISSING_CREATOR_ELEMENT,b);c.recordEvent(b)};this.reportCarouselPageChanged=function(b,
d,e){void 0===e&&(e=!1);var g=c.newEvent(q.CAROUSEL_PAGE_CHANGED);g[p.CAROUSEL_PAGE_NUMBER]=b;g[p.PREV_CAROUSEL_PAGE_NUMBER]=d;g[p.AUTO_SCROLLED]=e;c.recordEvent(g)};this.reportCardItemReceived=function(b,d){d=c.newEvent(q.CARD_ITEM_RECEIVED,d);d[p.CAROUSEL_PAGE_NUMBER]=b;c.recordEvent(d)};this.reportVideoPlayButtonTriggered=function(b,d){d=c.newEvent(q.VIDEO_PLAY_BUTTON_TRIGGERED,d);d[p.CAROUSEL_ITEM_INDEX]=b;c.recordEvent(d)};this.reportViewMetricsAdUnitViewed=function(b,d,e){if(c.getShouldLogViewMetrics()){var g=
c.newEvent(q.VM_AD_UNIT_VIEWED,b);c.recordEvent(g);d={p:Math.round(100*e),t:parseFloat((d/1E3).toFixed(3))};c.emitViewMetrics(Y.VIEWED,b,d)}};this.reportViewMetricsVideoViewed=function(b,d,e){c.getShouldLogViewMetrics()&&(b=c.newEvent(q.VM_VIDEO_VIEWED,b),c.recordEvent(b))};this.reportViewMetricsVideoProgressFiveSeconds=function(b){if(c.getShouldLogViewMetrics()){var d=c.newEvent(q.VM_VIDEO_PROGRESS_FIVE_SECONDS,b);c.recordEvent(d);c.emitViewMetrics(Y.PROGRESS_FIVE_SECONDS,b)}};this.reportViewMetricsVideoFirstQuartile=
function(b){if(c.getShouldLogViewMetrics()){var d=c.newEvent(q.VM_VIDEO_FIRST_QUARTILE,b);c.recordEvent(d);c.emitViewMetrics(Y.FIRST_QUARTILE,b)}};this.reportViewMetricsVideoMidpoint=function(b){if(c.getShouldLogViewMetrics()){var d=c.newEvent(q.VM_VIDEO_MIDPOINT,b);c.recordEvent(d);c.emitViewMetrics(Y.MIDPOINT,b)}};this.reportViewMetricsVideoThirdQuartile=function(b){if(c.getShouldLogViewMetrics()){var d=c.newEvent(q.VM_VIDEO_THIRD_QUARTILE,b);c.recordEvent(d);c.emitViewMetrics(Y.THIRD_QUARTILE,
b)}};this.reportViewMetricsVideoComplete=function(b){if(c.getShouldLogViewMetrics()){var d=c.newEvent(q.VM_VIDEO_COMPLETE,b);c.recordEvent(d);c.emitViewMetrics(Y.COMPLETE,b)}};this.reportViewMetricsVideoUnmute=function(b){if(c.getShouldLogViewMetrics()){var d=c.newEvent(q.VM_VIDEO_UNMUTE,b);c.recordEvent(d);c.emitViewMetrics(Y.UNMUTE,b)}};this.reportViewMetricsPostRequestFailure=function(b,d,e){e=c.newEvent(q.VM_POST_FAILURE,e);e[p.VIEW_METRICS_FAILURE]=b;e[p.ERROR_MESSAGE]=d;c.recordEvent(e)};this.emitViewMetrics=
function(b,d,e){void 0===e&&(e={});if(c.getShouldBillViewMetrics()){var g=d.instrumentationPixelUrl;void 0===g||""===g?c.reportViewMetricsPostRequestFailure(b,"instrumentationPixelUrl is empty or undefined",d):(e=JSON.stringify({v:n.__assign(n.__assign({},e),{def:"iab",event:b}),programType:"SBV"}),g="/"===g.substr(-1)?g+"v/":g+"/v/",Lc({onError:function(k){c.reportViewMetricsPostRequestFailure(b,k.message,d)},payload:e,url:g+encodeURI(e)}))}};this.getShouldLogViewMetrics=function(){return c.viewMetricOptions.shouldLogViewMetrics};
this.getShouldBillViewMetrics=function(){return c.viewMetricOptions.shouldLogViewMetrics&&c.viewMetricOptions.shouldBillViewMetrics};this.recordEvent=function(b){c.sushiClient.processEvent(b)};this.resetVideoAdAttributes=function(){return{advertiserId:void 0,campaignId:void 0,contentHash:void 0,headline:void 0,storeCta:void 0,imageUrl:void 0,instrumentationPixelUrl:void 0,linkUrl:void 0,metricsIdentifier:void 0,videoPreviewImageSrc:void 0,videoSrc:void 0}};this.getDynamicMetricsAttributes=function(){var b,
d;return null===(d=null===(b=c.clientMetricsContext)||void 0===b?void 0:b.getDynamicMetricsAttributes)||void 0===d?void 0:d.call(b)};this.newEvent=function(b,d,e){var g=c.getDynamicMetricsAttributes(),k=n.__assign,l=n.__assign,r=n.__assign,m=n.__assign,t=T(),x=t.innerWidth;t=t.innerHeight;var v=y["default"].cardRoot.getBoundingClientRect(),A=v.width;v=v.height;d=k.call(n,l.call(n,r.call(n,m.call(n,{},{width:void 0===A?0:A,height:void 0===v?0:v,viewportWidth:x,viewportHeight:t}),c.defaultAttributes),
d),e||g);d[p.EVENT_TYPE]=b;d[p.METRICS_SEQUENCE_NUMBER]=c.metricsSequenceNumber++;d[p.NETWORK_TYPE]=navigator&&navigator.connection&&navigator.connection.type;return d};this.browserWindow=T();this.metricsSequenceNumber=0;this.sushiClient=new Tc(f,"SBVClientMetrics");this.defaultAttributes=n.__assign({},a);this.defaultAttributes[p.USER_AGENT]=navigator.userAgent;this.viewMetricOptions=n.__assign(n.__assign({},wb),h);(f=this.browserWindow&&this.browserWindow.location&&this.browserWindow.location.href)&&
(this.defaultAttributes[p.CURRENT_PAGE_URL]=f);a.pageNumber&&(a=parseInt(a.pageNumber,10),isNaN(a)||(this.defaultAttributes[p.PAGE_NUMBER]=a))}}(),xb=function(){return function(a,f){var h,c=this;this.getTreatment=function(l,r){void 0===r&&(r=!0);if(0===c.weblabsMap.size)L["default"].log("There are no weblabs information found by ClientWebLapHlper","ERROR",c.attribution);else{if(c.weblabsMap.has(l)){var m=c.weblabsMap.get(l);if(void 0===m){L["default"].log("No treatment found in weblab map for "+l,
"ERROR",c.attribution);return}if(r)try{Bc["default"].trigger(l,m)}catch(t){}return m}L["default"].log("Get treatment for unknown weblab","ERROR",c.attribution)}};var b=new Map;a=a.split(",").filter(function(l){return 0<l.length});if(0<a.length)try{for(var d=n.__values(a),e=d.next();!e.done;e=d.next()){var g=e.value.split(":");b.set(g[0].trim(),g[1].trim())}}catch(l){var k={error:l}}finally{try{e&&!e.done&&(h=d.return)&&h.call(d)}finally{if(k)throw k.error;}}this.weblabsMap=b;this.attribution=f}}(),
ya;(function(a){a.DESKTOP="Desktop";a.MOBILE="Mobile"})(ya||(ya={}));var za,Pa,Aa,Ba,Qa,Ca,Da,Ra,Sa,I={SBV_672322:"SBV_672322",SBV_708584:"SBV_708584",SBV_836067:"SBV_836067",SBV_842986:"SBV_842986",ADPT_SBV_1041956:"ADPT_SBV_1041956",ADPT_SBV_DELAY_PLAYBACK_UNTIL_READY_1248744:"ADPT_SBV_DELAY_PLAYBACK_UNTIL_READY_1248744",ALF_SUSHI_CLIENT_GATE_1299748:"ALF_SUSHI_CLIENT_GATE_1299748"},Z={ADPT_SBV_MSHOP_NATIVE_VIEWABILITY_OBSTRUCTION_V2_1236420:"ADPT_SBV_MSHOP_NATIVE_VIEWABILITY_OBSTRUCTION_V2_1236420"},
yb=n.__assign(n.__assign({},I),{SBV_814590:"SBV_814590"}),zb=n.__assign(n.__assign({},yb),{MBV_394048:"MBV_394048",SBV_642751:"SBV_642751"}),Ab=n.__assign(n.__assign(n.__assign({},Z),yb),{ADPT_SBV_983988:"ADPT_SBV_983988",SBV_642769:"SBV_642769",SBV_677302:"SBV_677302",SBV_682273:"SBV_682273",ADPT_SBV_992627:"ADPT_SBV_992627"}),Bb=n.__assign(n.__assign({},Z),I),Cb=n.__assign(n.__assign({},I),{SBV_576903:"SBV_576903",SBV_576904:"SBV_576904"}),Db=n.__assign(n.__assign(n.__assign({},Z),I),{SBV_576917:"SBV_576917",
SBV_576918:"SBV_576918"}),Eb=n.__assign(n.__assign({},I),{SBV_485007:"SBV_485007",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175"}),Fb=n.__assign(n.__assign({},Eb),{SBV_793878:"SBV_793878"}),Gb=n.__assign(n.__assign({},Z),Eb),Ta=n.__assign(n.__assign({},I),{SBV_485007:"SBV_485007",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",SBV_716513:"SBV_716513"}),Vc=n.__assign(n.__assign({},Z),Ta),Wc=n.__assign(n.__assign({},I),{ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604"}),
Hb=n.__assign(n.__assign({},I),{SBV_716513:"SBV_716513",ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604",ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394:"ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394",ADPT_SCF_1236384:"ADPT_SCF_1236384",ADPT_SBV_DISABLE_SRC_SWAP_1269759:"ADPT_SBV_DISABLE_SRC_SWAP_1269759",ADPT_ALF_SPARKLE_BRAND_SANITIZATION_1276636:"ADPT_ALF_SPARKLE_BRAND_SANITIZATION_1276636",ADPT_ALF_SEARCH_AAPI_BYLINE_1277304:"ADPT_ALF_SEARCH_AAPI_BYLINE_1277304"}),
Ib=n.__assign(n.__assign(n.__assign({},I),Hb),{ADPT_SBV_890511:"ADPT_SBV_890511",ADPT_SBV_990170:"ADPT_SBV_990170",ADPT_SBV_SEARCH_1038654:"ADPT_SBV_SEARCH_1038654",ADPT_SBV_SPARKLE_DESKTOP_DARE_1261975:"ADPT_SBV_SPARKLE_DESKTOP_DARE_1261975",ADPT_SBV_1278120:"ADPT_SBV_1278120"}),Jb=n.__assign(n.__assign(n.__assign(n.__assign({},Z),I),Hb),{SEARCH_786608:"SEARCH_786608",ADPT_SBV_877926:"ADPT_SBV_877926",ADPT_ALF_SEARCH_DEALS_PD_25_1261832:"ADPT_ALF_SEARCH_DEALS_PD_25_1261832",SPB_EXPLANATIONS_SBV_PRODUCT_COLLECTION_SPARKLE_1287659:"SPB_EXPLANATIONS_SBV_PRODUCT_COLLECTION_SPARKLE_1287659",
SPB_EXPLANATIONS_SBV_BRANDED_PDP_SPARKLE_1287679:"SPB_EXPLANATIONS_SBV_BRANDED_PDP_SPARKLE_1287679",ADPT_SBV_1282847:"ADPT_SBV_1282847"}),Kb=n.__assign(n.__assign(n.__assign(n.__assign({},Z),I),Wc),{ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394:"ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394"}),Lb=n.__assign(n.__assign(n.__assign({},Z),I),{HOMEPAGE_SDTECH_GWM_AUTO_COLOR_REC_1184598:"HOMEPAGE_SDTECH_GWM_AUTO_COLOR_REC_1184598",HOMEPAGE_WD_SBV_HORIZONTAL_1221173:"HOMEPAGE_WD_SBV_HORIZONTAL_1221173"}),
Xc=n.__assign(n.__assign({},Z),I),aa=n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign({},zb),Ab),Cb),Db),Fb),Gb),Ta),Ib),Jb),Bb),Kb),Lb),pa=ya.DESKTOP,ba=ya.MOBILE,Yc=O.MULTI_BRAND_VIDEO,Zc=O.SHORT_FORM_VIDEO,$c=O.VIDEO_SINGLE_BRAND,ad=O.VIDEO_PRODUCT_COLLECTION,bd=O.VIDEO_SPLIT,cd=O.VIDEO_STORE,dd=O.VIDEO_STORE_PRODUCT_FEATURE,ed=O.CONFIGURABLE,fd=O.HOMEPAGE_WINDOW_DISPLAY;var U={};U[Yc]=(za={},za[pa]=zb,za[ba]=Ab,
za);U[Zc]=(Pa={},Pa[ba]=Bb,Pa);U[$c]=(Aa={},Aa[pa]=Cb,Aa[ba]=Db,Aa);U[ad]=(Ba={},Ba[pa]=Ib,Ba[ba]=Jb,Ba);U[bd]=(Qa={},Qa[ba]=Xc,Qa);U[cd]=(Ca={},Ca[pa]=Fb,Ca[ba]=Gb,Ca);U[dd]=(Da={},Da[pa]=Ta,Da[ba]=Vc,Da);U[ed]=(Ra={},Ra[ba]=Kb,Ra);U[fd]=(Sa={},Sa[ba]=Lb,Sa);U;var Q;(function(a){a.C="C";a.T1="T1";a.T2="T2";a.T3="T3";a.T4="T4";a.T5="T5";a.T6="T6";a.T7="T7";a.T8="T8"})(Q||(Q={}));var gd=function(a){var f,h=tb.getStage(),c=null!==(f=y["default"].cardRoot.dataset.properties)&&void 0!==f?f:y["default"].cardRoot.dataset.props;
f=!1;c&&(c=JSON.parse(c),f=(new xb(c.weblabs,c.widgetType)).getTreatment(aa.ALF_SUSHI_CLIENT_GATE_1299748,!1)===Q.T1);switch(a){default:return"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client."+h+".events";case "A2VIGQ35RCS4UG":case "A34GYYCZVDBSIK":case "AMEN7PMS3EDWL":case "A1YFOMBPFBRY22":case "ARBP9OOSHTCHU":case "AUJPM9XGFJRC7":case "A28R8C7NBKEWEA":case "AQGJ466SKA0F0":case "A1805IZSGTT6HS":case "A1M3WC0SJ3A38T":case "A1C3SOZRARQ6R3":case "AKY4K4WKH21YQ":case "A17E79C6D8DWNP":case "A1MQPSGJ6U9Q54":case "A2NODRKZP88ZB9":case "AT614YYYNOC1S":case "A33AVAJ2PDY3EV":case "A3CQBQD3RGPJR8":case "AE08WJ6YKNBMC":case "A3TFQ1G9L8TQ5L":case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":return f?
"https://unagi-eu.amazon.com/1/events/com.amazon.eel.sbv.client."+h+".eu.zaz":"https://unagi-eu.amazon.com/1/events/com.amazon.eel.sbv.client."+h+".eu";case "A1VC38T7YXB528":case "A39IBJ37TRP1C6":case "A1RNPCQ4K8U27I":case "A19VAU5U5O7RUS":case "A1DQ6JV7I20JSG":return"https://unagi-fe.amazon.com/1/events/com.amazon.eel.sbv.client."+h+".fe"}},hd=["motorola edge","Moto"],id=function(){var a=u["default"].capabilities.android?"android":u["default"].capabilities.ios?"ios":"unrecognized";"unrecognized"===
a&&hd.forEach(function(f){navigator.userAgent.includes(f)&&(a="android")});return"desktop"===Ua()?"unrecognized":a},Ua=function(){return u["default"].capabilities.mobile?"mobile":u["default"].capabilities.tablet?"tablet":"desktop"},ka;(ka||(ka={})).SEARCH_GRID="sbv-transition-search-grid";var R;(function(a){a.SEARCH_GRID="sbv-search-grid";a.SINGLE_ELEMENT="single-element"})(R||(R={}));var jd=u["default"].$,md=function(){function a(){this.strategy={init:this.init,repaint:this.repaint,resize:this.resize}}
a.prototype.register=function(){na["default"].display[R.SEARCH_GRID]||Ma["default"].registerStrategy("display",R.SEARCH_GRID,this.strategy)};a.prototype.init=function(f){var h=f.getAttr(w["default"].FIRST_VISIBLE_ITEM);f.setAttr(w["default"].MIN_GUTTER,0);f.setAttr("currentGutter",0);this.repaint(f);1<h&&(h=Math.ceil(h/f.getAttr(w["default"].PAGE_SIZE)),f.gotoPage(h));kd(f)};a.prototype.repaint=function(f){var h=f.getDimensions().viewport.width,c=f.dom.$carousel.children("li").get(0).getBoundingClientRect();
c=c.width?c.width:c.right-c.left;var b=ld(f,h,c);var d=f.dom.$carousel;var e=d.children("li"),g=e.length,k=f.getAttr(w["default"].PAGE_SIZE),l=f.getAttr(w["default"].SET_SIZE);e=e.first().outerWidth(!0);h=k>=l?h:g*e;d.css("width",h+"px");h={carousel:{outerWidth:d.outerWidth(),width:h},items:[]};for(d=0;d<g;d++)h.items.push({outerWidth:e,width:c});f.updateDimensionsCache(h);f.gotoIndex(b,{animationDuration:0,ignorePause:!0});f.triggerEvent("repaint")};a.prototype.resize=function(f,h){h.viewport&&void 0!==
h.viewport.width&&this.repaint(f)};a.prototype.getStrategy=function(){return this.strategy};return a}(),kd=function(a){a.onChange(w["default"].PAGE_NUMBER,function(){a.getAttr(w["default"].HIDE_OFF_SCREEN)&&a.dom.$carousel.children("li").css("visibility","")});a.onChange(w["default"].ANIMATING,function(f){if(!f&&a.getAttr(w["default"].HIDE_OFF_SCREEN)){var h=a.getAttr(w["default"].FIRST_VISIBLE_ITEM)-1;var c=h+a.getAttr(w["default"].PAGE_SIZE)-1;a.dom.$carousel.children("li").each(function(b,d){b=
b>=h&&b<=c;jd(d).css("visibility",b?"":"hidden")})}})},ld=function(a,f,h){var c=a.getAttr(w["default"].TOTAL_PAGES),b=a.getAttr(w["default"].PAGE_NUMBER),d=a.getAttr(w["default"].FIRST_VISIBLE_ITEM),e=a.getAttr(w["default"].HIDE_OFF_SCREEN),g=a.dom.$carousel.children("li");f=nd(a,f,h);var k=(b-1)*f+1;a.setAttr(w["default"].PAGE_SIZE,f);b>c?(d=(c-1)*f+1,a.setAttr(w["default"].PAGE_NUMBER,c),a.setAttr(w["default"].FIRST_VISIBLE_ITEM,d)):d!==k&&(c=Math.ceil(d/f),d=(c-1)*f+1,a.setAttr(w["default"].PAGE_NUMBER,
c),a.setAttr(w["default"].FIRST_VISIBLE_ITEM,d));var l=d-1;var r=l+f-1;g.each(function(m,t){t.style.visibility=!e||m>=l&&m<=r?"":"hidden";t.style.width=h+"px"});return d},nd=function(a,f,h){a=0;if(0<h)for(;-.5<f;)a++,f-=h;0>f&&a--;return u["default"].isFiniteNumber(a)&&0<a?a:1},od=function(){return function(){var a=this;this.updateRepaint=function(f){f.repaint=function(h){var c=h.getAttr("minimum_gutter_width"),b=h.getAttr("set_size"),d=h.dom.$carousel.children("li"),e=d.width();e-=2*c;d.css({width:e+
"px",margin:"0 "+c+"px"});c=e+2*c;d=c*b;h.dom.$carousel.width(d);for(d={carousel:{width:d},items:[]};b--;)d.items[b]={width:e,outerWidth:c};h.updateDimensionsCache(d);h.gotoIndex(h.getAttr("firstVisibleItem"),{animationDuration:0,ignorePause:!0});h.triggerEvent("repaint")}};this.getStrategy=function(){return a.strategy};this.register=function(){na["default"].display[R.SINGLE_ELEMENT]||Ma["default"].registerStrategy("display",R.SINGLE_ELEMENT,a.strategy)};this.strategy=u["default"].copy(na["default"].display.single);
this.updateRepaint(this.strategy)}}(),pd=function(){function a(){}a.registerStrategy=function(f){switch(f){case R.SEARCH_GRID:(new md).register();break;case R.SINGLE_ELEMENT:(new od).register();break;default:throw Error("Invalid carousel Strategy type");}};return a}(),sd=function(){return function(){var a=this;this.register=function(){na["default"].transition[ka.SEARCH_GRID]||Ma["default"].registerStrategy("transition",ka.SEARCH_GRID,a.strategy)};this.gotoPage=function(f,h,c){var b=f.getAttr(w["default"].TOTAL_PAGES),
d=f.getAttr(w["default"].CIRCULAR),e=f.getAttr(w["default"].PAGE_SIZE),g=f.getAttr(w["default"].SET_SIZE),k=e*(h-1)+1;c=c||{};Mb(f,c);0<h&&h<=b&&f.setAttr(w["default"].PAGE_NUMBER,h);!d&&1>h?(h=1,c.animationDuration=NaN):!d&&h>b&&(h=b,c.animationDuration=Math.pow(f.getAttr(w["default"].ANIMATION_SPEED),f.getAttr(w["default"].SPRINGINESS)));h===b&&(k=Math.min(k,g-e+1));a.gotoIndex(f,k,c)};this.gotoIndex=function(f,h,c){c=c||{};Mb(f,c);var b=f.getAttr(w["default"].CIRCULAR)&&!f.getAttr(w["default"].CURRENTLY_WRAPPING);
var d=c.callback;var e=null;var g=f.getViewportWidth();qd(f,h);f.setAttr(w["default"].FIRST_VISIBLE_ITEM,h);if(1>h){if(b){e=-g;var k=function(){d&&d();a.wrapToLast(f)}}}else h>f.getAttr(w["default"].SET_SIZE)?b&&(e=f.getAttr(w["default"].CURRENT_PIXEL)+g,k=function(){d&&d();a.wrapToFirst(f)}):e=f.getItemOffset(h);rd(f,c,k,d);null!==e&&a.strategy.gotoPixel(f,e,c)};this.getStrategy=function(){return a.strategy};this.strategy=u["default"].copy(na["default"].transition.slideHorizontal);this.strategy.gotoPage=
this.gotoPage;this.strategy.gotoIndex=this.gotoIndex}}(),qd=function(a,f){var h=a.getAttr(w["default"].TOTAL_PAGES),c=a.getAttr(w["default"].PAGE_NUMBER),b=a.getAttr(w["default"].PAGE_SIZE),d=a.getAttr(w["default"].SET_SIZE),e=Math.ceil(f/b);f===d-b+1&&e!==c&&(e=h);e!==c&&0<e&&e<=h&&a.setAttr(w["default"].PAGE_NUMBER,e)},Mb=function(a,f){(void 0===f.animationDuration||0<f.animationDuration)&&!f.silent&&a.setAttr(w["default"].ANIMATING,!0)},rd=function(a,f,h,c){h?(a.setAttr(w["default"].CURRENTLY_WRAPPING,
!0),f.callback=h,f.easingFunction=f.easingFunction||a.getAttr(w["default"].WRAP_EASING),f.animationSpeed=1.3*(u["default"].isFiniteNumber(f.animationSpeed)?f.animationSpeed:a.getAttr(w["default"].ANIMATION_SPEED))):f.callback=c},td=function(){function a(){}a.registerStrategy=function(f){switch(f){case ka.SEARCH_GRID:(new sd).register();break;default:throw Error("Invalid carousel Strategy type");}};return a}(),da=function(){function a(){}a.navigatorInternal=navigator;a.isIOS=function(){return u["default"].capabilities.ios};
a.isIOSWebView=function(){return u["default"].capabilities.isAmazonApp&&u["default"].capabilities.ios};a.isWebView=function(){return u["default"].capabilities.isAmazonApp};a.isSafari=function(){return!(!a.navigatorInternal.vendor||!a.navigatorInternal.vendor.match(/apple/i))};return a}(),ud=function(a,f){var h,c,b;if(a){var d=a.querySelector("video");if(d){var e=d.getAttribute("poster");e&&e!==f?(d.setAttribute("poster",f),null===(h=u["default"].trigger)||void 0===h?void 0:h.call(u["default"],"glm.Search.VideoElement.Ready",
d.poster),a=a.querySelector('[data-show-background-image="true"]'),f=null===(c=null===a||void 0===a?void 0:a.getAttribute)||void 0===c?void 0:c.call(a,"data-background-image-url"),(null===a||void 0===a?0:a.style)&&f&&(a.style.backgroundImage="url('"+f+"')")):null===(b=u["default"].trigger)||void 0===b?void 0:b.call(u["default"],"glm.Search.VideoElement.Ready",d.poster)}}},vd=function(a){var f;a&&(a=a.querySelector("video"))&&(null===(f=u["default"].trigger)||void 0===f?void 0:f.call(u["default"],
"glm.Search.VideoElement.Ready",a.poster))},Nb=function(a,f){void 0===f&&(f="");a&&f&&(a=a.querySelector('[data-type="productImage"]'))&&a.getAttribute("src")!==f&&a.setAttribute("src",f)},wd=function(a){return da.isIOSWebView()||a.getTreatment(aa.SBV_836067)===Q.T1},xd=function(a){void 0===a&&(a={});return n.__awaiter(void 0,void 0,void 0,function(){var f,h,c,b,d;return n.__generator(this,function(e){switch(e.label){case 0:f=y["default"].cardRoot.getElementsByClassName("a-carousel-container")[0];
if(!f)return[2];h=a.carouselDisplayStrategy;c=void 0===h?null:h;c===R.SEARCH_GRID&&(td.registerStrategy(ka.SEARCH_GRID),pd.registerStrategy(R.SEARCH_GRID));b=Cc["default"].getCarousel(f);d=y["default"].cardRoot.getElementsByClassName("a-carousel-card");Array.from(d).forEach(function(g){g.setAttribute("style","min-height: auto; margin-bottom: 8px")});return[4,b.initialized];case 1:return e.sent(),Ob(0),b.on("change:pageNumber",function(g){var k=a.shouldToggleNavButtonVisibility,l=a.isDesktop,r=void 0===
l?!1:l,m=a.shouldEnableImageLatencyImprovements;l=a.productAttributes;g=g.newPageNumber;r&&(void 0===k?0:k)&&Ob(g-1);!r&&m&&l&&l[g]&&(k=y["default"].cardRoot.querySelector('[data-index="'+g+'"]'),Nb(k,l[g].imageUrl))}),[2]}})})},Ob=function(a){var f=y["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],h=y["default"].cardRoot.getElementsByClassName("a-carousel-right")[0],c=y["default"].cardRoot.getElementsByClassName("a-carousel-card").length;var b=y["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0].clientWidth;
var d=y["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].clientWidth;b=Math.floor(b/d);f&&f.classList.toggle("aok-hidden",0===a);h&&h.classList.toggle("aok-hidden",0!==a&&b*(a+1)>=c)},yd=function(){return function(a,f,h,c){var b=this;this.viewMetricsHistoryMap={isViewedLogged:!1,isAdUnitViewedLogged:!1,isProgressFiveSecondsLogged:!1,isFirstQuartileLogged:!1,isMidpointLogged:!1,isThirdQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};this.onVideoTimeUpdated=function(d,e,g,k){var l,
r,m=b.adUnitManager?g:d,t=0;b.adUnitManager&&(t=b.adUnitManager.calculateVideoDurationTotalMsRelativeToAdUnit(g));if(!b.viewMetricsHistoryMap.isAdUnitViewedLogged&&2E3<=t){var x=!0;if(null===(l=b.eventHandlerOptions)||void 0===l?0:l.shouldCheckObstruction)b.adUnitManager.forceVisibilityCheck(),g=b.adUnitManager.calculateVideoDurationTotalMsRelativeToAdUnit(g),2E3>g?x=!1:(null===(r=b.adUnitManager)||void 0===r?void 0:r.handleViewableImpressionForElements(),t=g);x&&(b.viewMetricsHistoryMap.isAdUnitViewedLogged=
!0,r=b.adUnitManager.getAdUnitPercentInView(),b.metricsManager.reportViewMetricsAdUnitViewed(b.videoAdAttributes,t,r))}!b.viewMetricsHistoryMap.isViewedLogged&&2E3<=m&&(b.viewMetricsHistoryMap.isViewedLogged=!0,b.metricsManager.reportViewMetricsVideoViewed(b.videoAdAttributes,m,k));!b.viewMetricsHistoryMap.isProgressFiveSecondsLogged&&5E3<=d&&(b.viewMetricsHistoryMap.isProgressFiveSecondsLogged=!0,b.metricsManager.reportViewMetricsVideoProgressFiveSeconds(b.videoAdAttributes));!b.viewMetricsHistoryMap.isFirstQuartileLogged&&
d>=.25*e&&(b.viewMetricsHistoryMap.isFirstQuartileLogged=!0,b.metricsManager.reportViewMetricsVideoFirstQuartile(b.videoAdAttributes));!b.viewMetricsHistoryMap.isMidpointLogged&&d>=.5*e&&(b.viewMetricsHistoryMap.isMidpointLogged=!0,b.metricsManager.reportViewMetricsVideoMidpoint(b.videoAdAttributes));!b.viewMetricsHistoryMap.isThirdQuartileLogged&&d>=.75*e&&(b.viewMetricsHistoryMap.isThirdQuartileLogged=!0,b.metricsManager.reportViewMetricsVideoThirdQuartile(b.videoAdAttributes))};this.onVideoReadyForPlayback=
function(d,e,g,k){b.metricsManager.reportVideoReadyForPlayback(d,e,g,b.videoAdAttributes,k)};this.onTimeToFirstFrame=function(d,e,g){b.metricsManager.reportTimeToFirstFrame(d,e,g,b.videoAdAttributes)};this.onTimeToFirstInterrupt=function(d,e,g){b.metricsManager.reportTimeToFirstInterrupt(d,e,g,b.videoAdAttributes)};this.onClientLoadToFirstFrame=function(d,e,g){b.metricsManager.reportClientLoadToFirstFrame(d,e,g,b.videoAdAttributes)};this.onVideoPlaybackFailure=function(d,e,g){b.metricsManager.reportVideoPlaybackFailure(d,
g,e,b.videoAdAttributes)};this.onVideoPlaying=function(d,e,g){b.metricsManager.reportVideoPlaybackStarted(d,e,g,b.videoAdAttributes)};this.onVideoPlaybackPaused=function(d,e,g){b.metricsManager.reportVideoPaused(d,e,g,b.videoAdAttributes)};this.onPlaybackCompleted=function(d,e){b.viewMetricsHistoryMap.isCompleteLogged||(b.viewMetricsHistoryMap.isCompleteLogged=!0,b.metricsManager.reportViewMetricsVideoComplete(b.videoAdAttributes));b.metricsManager.reportPlaybackCompleted(d,e,b.videoAdAttributes);
if(b.eventHandlerOptions&&b.eventHandlerOptions.onPlaybackCompletedCallback)b.eventHandlerOptions.onPlaybackCompletedCallback()};this.onVideoBufferingStarted=function(d,e,g){b.bufferStartTimeMs=d;b.metricsManager.reportVideoBufferingStarted(d,e,g,b.videoAdAttributes)};this.onVideoBufferingEnded=function(d,e,g){b.bufferStartTimeMs=0;b.metricsManager.reportVideoBufferingEnded(d,e,g,b.videoAdAttributes)};this.onVideoPlaybackFailedAfterPlayError=function(){b.metricsManager.reportPlaybackFailedToStartAfterPlay(b.videoAdAttributes)};
this.onVideoAborted=function(d){b.metricsManager.reportVideoAborted(d,b.videoAdAttributes)};this.onVideoPlayPromiseRejected=function(d){b.metricsManager.reportVideoPlayPromiseRejected(d,b.videoAdAttributes)};this.onVideoPlayPromiseNotSupported=function(){b.metricsManager.reportVideoPlayPromiseNotSupported(b.videoAdAttributes)};this.onVideoMuted=function(d,e){b.metricsManager.reportVideoSoundOff(d,e,b.videoAdAttributes)};this.onVideoUnmuted=function(d,e){b.viewMetricsHistoryMap.isUnmuteLogged||(b.viewMetricsHistoryMap.isUnmuteLogged=
!0,b.metricsManager.reportViewMetricsVideoUnmute(b.videoAdAttributes));b.metricsManager.reportVideoSoundOn(d,e,b.videoAdAttributes)};this.onCcOn=function(d,e){b.metricsManager.reportCaptionsOn(d,b.videoAdAttributes,e)};this.onCcOff=function(d,e){b.metricsManager.reportCaptionsOff(d,b.videoAdAttributes,e)};this.onCcLoadFailure=function(d){var e,g;b.metricsManager.reportCaptionsLoadFailure(""+(null===(e=d.target)||void 0===e?void 0:e.src),""+(null===(g=d.target)||void 0===g?void 0:g.readyState),b.videoAdAttributes)};
this.onVideoDurationPlayed=function(d,e,g){b.metricsManager.reportVideoDurationPlayed(d,e,g,b.videoAdAttributes)};this.onVideoClicked=function(d){var e;b.metricsManager.reportVideoClicked(d,b.videoAdAttributes);if(null===(e=b.eventHandlerOptions)||void 0===e?0:e.onImmersiveVideoCallback)b.eventHandlerOptions.onImmersiveVideoCallback(b.videoAdAttributes)};this.onVideoOnScreen=function(d){b.metricsManager.reportVideoOnScreen(d,b.videoAdAttributes)};this.onVideoOffScreen=function(d,e){b.metricsManager.reportVideoOffScreen(d,
0!==b.bufferStartTimeMs,e,b.videoAdAttributes)};this.onVideoPlaybackInitiated=function(d){b.metricsManager.reportVideoPlaybackInitiated(d,b.videoAdAttributes)};this.onVideoPlayFromPause=function(d){b.metricsManager.reportVideoPlayFromPause(d,b.videoAdAttributes)};this.onVideoPauseInitiated=function(d){b.metricsManager.reportVideoPauseInitiated(d,b.videoAdAttributes)};this.onVideoPreviewImageNotMediaAmazon=function(){b.metricsManager.reportVideoPreviewImageNotMediaAmazon(b.videoAdAttributes)};this.onVideoPauseButtonTriggered=
function(d){b.metricsManager.reportVideoPauseButtonTriggered(d,b.videoAdAttributes)};this.onVideoViewed=function(d){b.metricsManager.reportVideoView(d,da.isIOSWebView(),b.videoAdAttributes)};this.onVideoClearedOnHiddenBrowser=function(){b.metricsManager.reportVideoClearedOnHiddenBrowser(b.videoAdAttributes)};this.onVideoLoadedOnVisibleBrowser=function(){b.metricsManager.reportVideoLoadedOnVisibleBrowser(b.videoAdAttributes)};this.onAudioToggleIconDisplayed=function(){b.metricsManager.reportAudioToggleIconDisplayed(b.videoAdAttributes)};
this.onPauseIconDisplayed=function(){b.metricsManager.reportPauseIconDisplayed(b.videoAdAttributes)};this.onCcIconDisplayed=function(){b.metricsManager.reportCcIconDisplayed(b.videoAdAttributes)};this.onVideoPausedDueToAutoplayDisabled=function(){b.metricsManager.reportVideoPausedOnAutoplayDisabled(b.videoAdAttributes)};this.onAdblockDetected=function(){b.metricsManager.reportAdblockDetected(b.videoAdAttributes)};this.metricsManager=a;this.videoAdAttributes=f;this.bufferStartTimeMs=0;this.eventHandlerOptions=
h;this.adUnitManager=c}}(),Pb=function(){return function(a,f){var h=this;this.reportIfBoundaryCrossed=function(c,b,d,e,g){h.isValidBoundaryTime(d)&&(c<=b?h.insideInterval(c,b)&&h.callback(h.boundaryTime,e,g):(h.insideInterval(0,b)||h.insideInterval(c,d))&&h.callback(h.boundaryTime,e,g))};this.insideInterval=function(c,b){return h.boundaryTime>c&&h.boundaryTime<=b};this.isValidBoundaryTime=function(c){return 0<=h.boundaryTime&&h.boundaryTime<=c};this.boundaryTime=a;this.callback=f}}(),qa=function(){return u["default"].capabilities&&
u["default"].capabilities.isAmazonApp},zd=function(){return new Promise(function(a){P.when("mash").execute(a)})},Ad=function(a){return qa()?new Promise(function(f){P.when("MShopChrome").execute(function(h){var c,b;null===(c=h.getBottomBarsHeight)||void 0===c?void 0:c.call(h,{successCallback:function(d){a.bottomHeightSetter(d.visibleHeight)}});null===(b=h.getChromeInfo)||void 0===b?void 0:b.call(h,{successCallback:function(d){var e=d.portraitChromeHeight;d.isTransparentNav&&a.topHeightSetter(e)}})});
P.when("mash").execute(function(h){var c=function(b){b=b.detail;a.bottomHeightSetter(null===b||void 0===b?void 0:b.visibleHeight)};h.addEventListener("bottomBarsUpdate",c);f(function(){return h.removeEventListener("bottomBarsUpdate",c)})})}):Promise.resolve(function(){})},Bd=function(a){return qa()?new Promise(function(f){P.when("mash").execute(function(h){var c,b,d;null===(d=null===(b=null===(c=h.appCX)||void 0===c?void 0:c.uiOrchestrator)||void 0===b?void 0:b.getObstructions)||void 0===d?void 0:
d.call(b,{successCallback:function(g){a(Qb(g))}});var e=function(g){a(Qb(g.detail))};h.addEventListener("obstructionsChanged",e);f(function(){return h.removeEventListener("obstructionsChanged",e)})})}):Promise.resolve(function(){})},Qb=function(a){var f,h,c=a.isFullyObstructed;a=a.boundingBoxes;return{isFullyObstructed:void 0===c?!1:c,top:(null===(f=null===a||void 0===a?void 0:a.find(function(b){return 0===b.top}))||void 0===f?void 0:f.height)||0,bottom:(null===(h=null===a||void 0===a?void 0:a.find(function(b){return 0!==
b.top}))||void 0===h?void 0:h.height)||0}},fa=function(){function a(){}a.getObstructionRatio=function(f,h){var c,b,d;void 0===h&&(h=!1);var e=X(),g=T(),k=f.getBoundingClientRect();h=this.getPointsToCheck(k,g.innerHeight,h);if(null===h||void 0===h||!h.length)return 0;k=[];try{for(var l=n.__values(h),r=l.next();!r.done;r=l.next()){var m=n.__read(r.value,2),t=m[0],x=m[1],v=e.elementsFromPoint(t,x);try{for(var A=(b=void 0,n.__values(v)),z=A.next();!z.done;z=A.next()){var C=z.value;if(!this.shouldSkipElement(C,
f)){if(C===f||f.contains(C))break;var E=g.getComputedStyle(C);if(!this.isInvisibleElement(E)&&!this.isTransparentElement(E)){k.push([t,x]);break}}}}catch(N){b={error:N}}finally{try{z&&!z.done&&(d=A.return)&&d.call(A)}finally{if(b)throw b.error;}}}}catch(N){var F={error:N}}finally{try{r&&!r.done&&(c=l.return)&&c.call(l)}finally{if(F)throw F.error;}}return k.length/h.length};a.shouldSkipElement=function(f,h){h=X();return!(f instanceof HTMLElement)||f===h.body||"HTML"===f.tagName};a.isInvisibleElement=
function(f){return"none"===f.display||"hidden"===f.visibility||"0"===f.opacity||"none"===f.pointerEvents||.7>parseFloat(f.opacity)};a.isTransparentElement=function(f){var h=f.backgroundColor;return("transparent"===h||"rgba(0, 0, 0, 0)"===h||""===h)&&!f.backgroundImage.includes("url")};a.getPointsToCheck=function(f,h,c){var b=[.25,.75],d=function(r,m){var t,x=[];try{for(var v=n.__values(m),A=v.next();!A.done;A=v.next())x.push([f.left+f.width*A.value,r])}catch(C){var z={error:C}}finally{try{A&&!A.done&&
(t=v.return)&&t.call(v)}finally{if(z)throw z.error;}}return x},e=Math.min(10,Math.ceil(f.height/50));c=function(r){if(!r)return b;r=Math.min(4,Math.ceil(f.width/100));for(var m=[],t=0;t<r;t++)m.push((t+.5)/r);return m}(c);for(var g=[],k=0;k<e;k++){var l=f.top+f.height*(k+.5)/e;0<=l&&l<=h&&g.push.apply(g,n.__spread(d(l,c)))}return g};a.nativeBottomBarHeight=0;a.nativeTopBarHeight=0;a.isFullyObstructedNative=!1;a.getNativeTopBarHeight=function(){return a.nativeTopBarHeight};a.getNativeBottomBarHeight=
function(){return a.nativeBottomBarHeight};a.getIsFullyObstructedNative=function(){return a.isFullyObstructedNative};a.setupMashObstructionListeners=function(f){return Bd(function(h){var c=h.isFullyObstructed,b=h.top;a.nativeBottomBarHeight=h.bottom;a.nativeTopBarHeight=b;a.isFullyObstructedNative=c;null===f||void 0===f?void 0:f()})};a.setupMShopChromeListeners=function(f){return Ad({topHeightSetter:function(h){a.nativeTopBarHeight=h;null===f||void 0===f?void 0:f()},bottomHeightSetter:function(h){a.nativeBottomBarHeight=
h;null===f||void 0===f?void 0:f()}})};a.getPercentInView=function(f,h){if(a.getIsFullyObstructedNative())return 0;var c=T();try{var b=c.innerWidth||c.clientWidth||0,d=c.innerHeight||c.clientHeight||0,e=a.getNormalizedBoundingRect(f);f=d;var g=e.top,k=e.bottom;f=Math.max(d-a.getNativeTopBarHeight()-a.getNativeBottomBarHeight(),0);g=Math.max(e.top-a.getNativeTopBarHeight(),0);k=Math.max(e.bottom-a.getNativeTopBarHeight(),0);var l=a.getViewableSegment(g,k,f),r=a.getViewableSegment(e.left,e.right,b);
d=void 0;d=(null===h||void 0===h?0:h.shouldAreaOnlyUseElementWidth)?e.width:Math.min(e.width,b);return l*r/(e.height*d)}catch(m){return 0}};a.getViewableSegment=function(f,h,c){return f>c&&h>c?0:Math.min(0<f?c-f:0<h?Math.min(h,c):0,h-f)};a.getNormalizedBoundingRect=function(f){f=f.getBoundingClientRect();f.height=f.height||f.bottom-f.top;f.width=f.width||f.right-f.left;return f};return a}(),G;(function(a){a.PLAYING="playing";a.PAUSED="paused";a.BUFFERING="buffering";a.INITIATED="initiated";a.END=
"ended"})(G||(G={}));var Cd=function(){return function(a,f,h,c,b,d,e){var g=this;void 0===h&&(h=[]);void 0===c&&(c=[]);void 0===b&&(b=y["default"].cardRoot);void 0===e&&(e=!1);var k,l;this.generateNewTextTrack=function(m){if(!m||!m.cues||0===m.cues.length)return null;var t=g.videoElement.addTextTrack("captions"),x=m.cues;m=function(A){var z=x[A];A=z.startTime;var C=z.endTime;z=z.text.trim();var E=z.split(" "),F=z.length-E.length,N=C-A,V=A,J=[];E.forEach(function(ha){var ia=J.join(" ");if(32<ia.length+
ha.length){var ra=V+(ia.length-J.length+1)/F*N;t.addCue(new VTTCue(V,ra,ia));V=ra;J=[]}J.push(ha)});0<J.length&&t.addCue(new VTTCue(V,C,J.join(" ")))};for(var v=0;v<x.length;v++)m(v);t.mode="hidden";return t};this.checkAndUpdateCC=function(){var m;if(g.ccText){var t=null===(m=g.videoElement.textTracks)||void 0===m?void 0:m[0];(m=null===t||void 0===t?void 0:t.activeCues)&&0<m.length&&""===g.ccText.innerHTML&&(g.ccText.innerHTML=m[0].text)}};this.play=function(m){g.initiatedPlayTime||(g.initiatedPlayTime=
m);g.checkAndUpdateCC();return g.playbackState!==G.PLAYING&&g.videoElement.paused?(m=g.playInternal())?m:Promise.reject("NotSupported"):Promise.resolve()};this.pause=function(){g.firstFramePlayed||g.firstInterrupt||!g.initiatedPlayTime||g.handleFirstInterrupt();g.playbackState!==G.PAUSED&&g.playbackState===G.PLAYING&&(g.playbackState=G.PAUSED,g.videoElement.pause())};this.seekToStart=function(){g.accrueContinuousPlaybackDuration(g.getCurrentTimeMs());g.ccText&&(g.ccText.innerHTML="");g.lastOnTimeUpdateCurrentTimeMs=
0;g.videoElement.currentTime=0};this.mute=function(){g.videoElement.muted=!0};this.unmute=function(){g.videoElement.muted=!1};this.isMuted=function(){return g.videoElement.muted};this.getCaptionLang=function(){return null!=g.videoElement.textTracks[0].language?g.videoElement.textTracks[0].language:"No Language Given"};this.getCurrentTimeMs=function(){return Math.round(1E3*g.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*g.videoElement.duration)};this.getDroppedFrames=
function(){return g.videoElement.getVideoPlaybackQuality?g.videoElement.getVideoPlaybackQuality().droppedVideoFrames:void 0!==g.videoElement.webkitDroppedFrameCount?g.videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return g.continuousDurationAccruedPlayTimeMs+(g.getCurrentTimeMs()-g.continuousDurationStartTimeMs)};this.resetContinuousPlaybackDurationMs=function(){var m=g.getCurrentTimeMs();g.continuousDurationAccruedPlayTimeMs=0;m===g.getDurationMs()?g.continuousDurationStartTimeMs=
0:g.continuousDurationStartTimeMs=m;g.continuousDurationBoundaryChecks.forEach(function(t){t.resetReported()})};this.getPercentDownloaded=function(){var m=g.videoElement.buffered;if(!m)return 0;for(var t=0,x=0;x<m.length;x++)t+=m.end(x)-m.start(x);return t/g.videoElement.duration};this.load=function(){g.videoElement.load()};this.isNavBackLoadPending=function(){return g.navBackLoadPending};this.attachLoadStartCallback=function(m){g.videoElement.addEventListener("loadstart",function(){return m()},{once:!0})};
this.loadVideoOnBrowserVisible=function(){var m=g.videoElement.dataset.videoSource;!g.videoElement.src&&m&&(g.videoElement.src=m,g.navBackLoadPending=!0,g.load(),g.eventHandler.onVideoLoadedOnVisibleBrowser())};this.clear=function(){g.videoElement.dataset.videoSource=g.videoElement.src;g.videoElement.removeAttribute("src");g.load();g.eventHandler.onVideoClearedOnHiddenBrowser();g.handleFirstInterrupt()};this.hasSrcAttr=function(){return g.videoElement.hasAttribute("src")};this.getDateTime=function(){return Date.now()};
this.playInternal=function(){return g.shouldDelayVideoPlayback?4===g.videoElement.readyState?g.videoElement.play():(new Promise(function(m){g.videoElement.addEventListener("canplaythrough",m,{once:!0})})).then(function(){return g.videoElement.play()}):g.videoElement.play()};this.videoOnCanPlayEvent=function(){g.stopVideoLoadingAnimation();if(!g.assetLoaded){var m=g.getDateTime()-g.loadStartTime;g.eventHandler.onVideoReadyForPlayback(m,g.retryLoadCount,g.getPercentDownloaded(),g.getDurationMs());g.assetLoaded=
!0}};this.stopVideoLoadingAnimation=function(){if(g.isVideoLoadingAnimationVisible){var m=g.videoContainer.querySelector("[data-type=loadingAnimation]");m&&(m.style.visibility="hidden",g.isVideoLoadingAnimationVisible=!1)}};this.videoOnLoadStartEvent=function(){g.navBackLoadPending=!1};this.videoOnErrorEvent=function(){g.retryInProgress||(!g.assetLoaded&&3>g.retryLoadCount?(g.retryLoadCount++,g.retryInProgress=!0,setTimeout(function(){g.retryInProgress=!1;g.videoElement.load()},2E3)):(g.stopVideoLoadingAnimation(),
g.handleVideoPlaybackFailureEvent()))};this.videoOnPlayingEvent=function(){g.handleFirstFramePlayedEvent();if(g.playbackState===G.BUFFERING)g.eventHandler.onVideoBufferingEnded(g.getCurrentTimeMs(),g.getPercentDownloaded(),g.getDroppedFrames());if(g.playbackState!==G.END)g.eventHandler.onVideoPlaying(g.getCurrentTimeMs(),g.getPercentDownloaded(),g.getDroppedFrames());g.playbackState=G.PLAYING};this.videoOnPauseEvent=function(){g.videoElement.currentTime!==g.videoElement.duration&&(g.playbackState=
G.PAUSED,g.eventHandler.onVideoPlaybackPaused(g.getCurrentTimeMs(),g.getPercentDownloaded(),g.getDroppedFrames()))};this.videoOnEndedEvent=function(){return n.__awaiter(g,void 0,void 0,function(){return n.__generator(this,function(m){switch(m.label){case 0:return this.playbackState=G.END,this.ccText&&(this.ccText.innerHTML=""),this.accrueContinuousPlaybackDuration(this.getDurationMs()),this.eventHandler.onPlaybackCompleted(this.getDurationMs(),this.getDroppedFrames()),this.videoElement.dataset.disableLooping&&
"false"!==this.videoElement.dataset.disableLooping?[3,2]:[4,this.playInternal()];case 1:m.sent(),m.label=2;case 2:return[2]}})})};this.videoOnWaitingEvent=function(){g.playbackState=G.BUFFERING;g.eventHandler.onVideoBufferingStarted(g.getCurrentTimeMs(),g.getPercentDownloaded(),g.getDroppedFrames())};this.videoOnTimeUpdateEvent=function(){var m=g.getCurrentTimeMs(),t=g.getContinuousPlaybackDurationMs();g.continuousDurationBoundaryChecks.forEach(function(v){v.reportIfBoundaryCrossed(t)});g.boundaryChecks.forEach(function(v){v.reportIfBoundaryCrossed(g.lastOnTimeUpdateCurrentTimeMs,
m,g.getDurationMs(),g.getPercentDownloaded(),g.getDroppedFrames())});g.lastOnTimeUpdateCurrentTimeMs=m;var x=fa.getPercentInView(g.videoElement);g.eventHandler.onVideoTimeUpdated(m,g.getDurationMs(),t,x)};this.videoOnAbortEvent=function(){g.stopVideoLoadingAnimation();g.eventHandler.onVideoAborted(g.getCurrentTimeMs())};this.handleFirstFramePlayedEvent=function(){if(!g.firstFramePlayed&&!g.firstInterrupt&&g.initiatedPlayTime){var m=g.getDateTime()-g.initiatedPlayTime;g.eventHandler.onTimeToFirstFrame(m,
g.getPercentDownloaded(),g.getDroppedFrames());g.firstFramePlayed=!0;g.clientInitiatedStartTime&&(m=g.getDateTime()-g.clientInitiatedStartTime,g.eventHandler.onClientLoadToFirstFrame(m,g.getPercentDownloaded(),g.getDroppedFrames()))}};this.handleFirstInterrupt=function(){if(!g.firstFramePlayed&&!g.firstInterrupt&&g.initiatedPlayTime){var m=g.getDateTime()-g.initiatedPlayTime;g.eventHandler.onTimeToFirstInterrupt(m,g.getPercentDownloaded(),g.getDroppedFrames());g.firstInterrupt=!0}};this.handleVideoPlaybackFailureEvent=
function(){if(g.videoElement.error){var m=g.translateVideoErrorCode(g.videoElement.error.code);g.eventHandler.onVideoPlaybackFailure(g.getCurrentTimeMs(),m,g.videoElement.error.message)}};this.translateVideoErrorCode=function(m){switch(m){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"UNKNOWN"}};this.accrueContinuousPlaybackDuration=function(m){g.continuousDurationAccruedPlayTimeMs+=m-g.continuousDurationStartTimeMs;
g.continuousDurationStartTimeMs=0};this.videoElement=a;this.eventHandler=f;this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=0;this.boundaryChecks=h;this.continuousDurationBoundaryChecks=c;this.playbackState=G.INITIATED;this.loadStartTime=this.getDateTime();this.assetLoaded=!1;this.retryLoadCount=0;this.firstInterrupt=this.firstFramePlayed=!1;this.isVideoLoadingAnimationVisible=!0;this.videoContainer=b;this.clientInitiatedStartTime=d;this.videoElement.oncanplay=
this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=this.videoOnAbortEvent;this.videoElement.onloadstart=this.videoOnLoadStartEvent;this.navBackLoadPending=!1;this.shouldDelayVideoPlayback=e;
this.retryInProgress=!1;4===this.videoElement.readyState&&(this.eventHandler.onVideoReadyForPlayback(0,0,this.getPercentDownloaded(),this.getDurationMs()),this.assetLoaded=!0,this.stopVideoLoadingAnimation());if(this.videoElement.error&&this.videoElement.error.code)this.videoElement.onerror("TriggeredBeforeInit");a=this.videoElement.dataset.poster;this.videoElement.poster!==a&&(this.videoElement.poster=a);var r=null===(k=this.videoElement.textTracks)||void 0===k?void 0:k[0];this.ccText=b.querySelector('[data-type="ccText"]');
b="true"===this.videoElement.dataset.isVerticalVideo;r&&this.ccText&&(r.mode="hidden",b?null===(l=this.videoElement.querySelector("track"))||void 0===l?void 0:l.addEventListener("load",function(){var m=g.generateNewTextTrack(r);m&&m.addEventListener("cuechange",function(){var t=m.activeCues;this.ccText.innerHTML=t&&0<t.length?t[0].text:""}.bind(g))}):r.addEventListener("cuechange",function(){var m=r.activeCues;this.ccText.innerHTML=m&&0<m.length?m[0].text:""}.bind(this)))}}(),sa=function(){function a(){}
a.handleViewableImpression=function(){a.registeredElements.forEach(function(h){h.viewableImpressionFired=!0});var f=X();B.removeEventListenerSafely(f,"click",1,a.throttledOnBrowserViewChangeForClickEvent)};a.shouldCheckObstruction=function(f){return!f.viewableImpressionFired};a.registeredElements=[];a.attachedToViewWillDisappear=!1;a.hasSetupNativeObstructionListeners=!1;a.registerElement=function(f,h,c,b,d,e,g,k){f={callback:e,dispatchOnElementInView:c,dispatchOnElementOutOfView:b,element:f,isInView:void 0,
ratioInView:h,recurring:d,eventData:g,options:k};0===a.registeredElements.length&&a.attachListeners(k);a.registeredElements.push(f);a.handleViewChange(f);return f};a.deregisterElement=function(f,h,c,b,d){a.registeredElements=a.registeredElements.filter(function(e){return!(e.element===f&&e.ratioInView===h&&e.dispatchOnElementInView===c&&e.dispatchOnElementOutOfView===b&&e.recurring===d)});0===a.registeredElements.length&&a.detachListeners()};a.emitViewabilityChange=function(f,h){f.isInView=h;f.callback(f.ratioInView,
h,f.eventData);f.recurring||a.deregisterElement(f.element,f.ratioInView,f.dispatchOnElementInView,f.dispatchOnElementOutOfView,f.recurring)};a.shouldThrottleObstructionCheck=function(f){return 200>Date.now()-f};a.checkObstruction=function(){var f=0,h=0;return function(c,b){var d,e;void 0===b&&(b=!1);if(a.shouldCheckObstruction(c)){var g=Date.now();!b&&a.shouldThrottleObstructionCheck(f)?a.emitViewabilityChange(c,h>=c.ratioInView):(f=g,b=fa.getPercentInView(c.element,c.options),isNaN(b)||(g=fa.getObstructionRatio(c.element,
null!==(e=null===(d=c.options)||void 0===d?void 0:d.isDesktop)&&void 0!==e?e:!1),h=d=b-g,a.emitViewabilityChange(c,d>=c.ratioInView)))}else a.emitViewabilityChange(c,h>=c.ratioInView)}}();a.handleRatioInViewChange=function(f,h){var c;f.dispatchOnElementInView&&h>=f.ratioInView?(null===(c=f.options)||void 0===c?0:c.shouldCheckObstructionOnRecalculation)&&.5<=h&&!f.isInView?a.checkObstruction(f):f.isInView||a.emitViewabilityChange(f,!0):f.dispatchOnElementOutOfView&&h<f.ratioInView&&f.isInView&&a.emitViewabilityChange(f,
!1)};a.handleBrowserHidden=function(f){a.handleRatioInViewChange(f,0)};a.handleViewChange=function(f){var h,c=fa.getPercentInView(f.element,f.options);isNaN(c)||((null===(h=f.options)||void 0===h?0:h.shouldCheckObstructionOnRecalculation)&&f.isInView&&.5<=c&&.5<=f.ratioInView?a.emitViewabilityChange(f,!0):a.handleRatioInViewChange(f,c))};a.onBrowserHidden=function(){a.registeredElements.forEach(a.handleBrowserHidden)};a.onBrowserShown=function(){a.registeredElements.forEach(function(f){return a.handleViewChange(f)})};
a.onBrowserVisibilityChange=function(){var f=X().hidden;if(f)a.onBrowserHidden();else setTimeout(a.onBrowserShown,50);a.registeredElements.forEach(function(h){var c,b;null===(b=null===(c=h.options)||void 0===c?void 0:c.onBrowserVisibilityChange)||void 0===b?void 0:b.call(c,!f)})};a.toggleBrowserVisibility=function(){a.onBrowserHidden();a.onBrowserShown()};a.attachNativeListeners=function(f){var h=function(){var c;null===(c=a.throttledOnBrowserViewChange)||void 0===c?void 0:c.call(a)};zd().then(function(c){var b,
d;(null===(d=null===(b=null===c||void 0===c?void 0:c.appCX)||void 0===b?void 0:b.uiOrchestrator)||void 0===d?0:d.getObstructions)&&(null===f||void 0===f?0:f.shouldCallGetObstructionsMash)?a.mashObstructionCleanupPromise=fa.setupMashObstructionListeners(h):a.mashBottomBarUpdateCleanupPromise=fa.setupMShopChromeListeners(h);a.hasSetupNativeObstructionListeners=!0})};a.attachListeners=function(f){qa()&&(null===f||void 0===f?0:f.shouldCheckNativeObstructions)&&!a.hasSetupNativeObstructionListeners&&a.attachNativeListeners(f);
a.throttledOnBrowserViewChange||(a.throttledOnBrowserViewChange=u["default"].throttle(function(){a.registeredElements.forEach(function(d){return a.handleViewChange(d)})},50));a.throttledOnBrowserViewChangeForClickEvent||(a.throttledOnBrowserViewChangeForClickEvent=u["default"].throttle(function(){setTimeout(function(){a.registeredElements.forEach(function(d){var e;(null===(e=d.options)||void 0===e?0:e.shouldCheckObstruction)&&a.checkObstruction(d,!0)})},300)},50));u["default"].on("afterReady",a.throttledOnBrowserViewChange);
u["default"].on(u["default"].constants.BROWSER_EVENTS.SCROLL,a.throttledOnBrowserViewChange);u["default"].on(u["default"].constants.BROWSER_EVENTS.RESIZE,a.throttledOnBrowserViewChange);u["default"].on(u["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,a.throttledOnBrowserViewChange);var h=y["default"].cardRoot.querySelector(".sbv-desktop-scroller");h&&B.addEventListener(h,"scroll",1,a.throttledOnBrowserViewChange);h=T();var c=X(),b=null===c||void 0===c?void 0:c.querySelector('div[cel_widget_id="gwm-window-container"]');
b&&B.addEventListener(b,"scroll",1,a.throttledOnBrowserViewChange);B.addEventListener(h,"beforeunload",1,a.onBrowserHidden);B.addEventListener(c,"visibilitychange",1,a.onBrowserVisibilityChange);da.isWebView()||(B.addEventListener(h,"focus",1,a.onBrowserShown),B.addEventListener(h,"blur",1,a.onBrowserHidden));da.isSafari()&&!da.isWebView()&&(B.addEventListener(h,"pagehide",1,a.onBrowserHidden),B.addEventListener(h,"pageshow",1,a.onBrowserShown),B.addEventListener(h,"popstate",1,a.toggleBrowserVisibility));
(null===f||void 0===f?0:f.shouldCheckObstruction)&&B.addEventListener(c,"click",1,a.throttledOnBrowserViewChangeForClickEvent);a.attachToViewWillDisappear()};a.detachNativeListeners=function(){var f,h;null===(f=a.mashBottomBarUpdateCleanupPromise)||void 0===f?void 0:f.then(function(c){return c()});null===(h=a.mashObstructionCleanupPromise)||void 0===h?void 0:h.then(function(c){return c()})};a.detachListeners=function(){u["default"].off("afterReady",a.throttledOnBrowserViewChange);u["default"].off(u["default"].constants.BROWSER_EVENTS.SCROLL,
a.throttledOnBrowserViewChange);u["default"].off(u["default"].constants.BROWSER_EVENTS.RESIZE,a.throttledOnBrowserViewChange);u["default"].off(u["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,a.throttledOnBrowserViewChange);a.detachNativeListeners();var f=y["default"].cardRoot.querySelector(".sbv-desktop-scroller");f&&B.removeEventListener(f,"scroll",1,a.throttledOnBrowserViewChange);f=T();var h=X(),c=null===h||void 0===h?void 0:h.querySelector('div[cel_widget_id="gwm-window-container"]');
c&&B.removeEventListener(c,"scroll",1,a.throttledOnBrowserViewChange);B.removeEventListener(h,"visibilitychange",1,a.onBrowserVisibilityChange);B.removeEventListener(f,"beforeunload",1,a.onBrowserHidden);da.isWebView()||(B.removeEventListener(f,"focus",1,a.onBrowserShown),B.removeEventListener(f,"blur",1,a.onBrowserHidden));da.isSafari()&&!da.isWebView()&&(B.removeEventListener(f,"pagehide",1,a.onBrowserHidden),B.removeEventListener(f,"pageshow",1,a.onBrowserShown),B.removeEventListener(f,"popstate",
1,a.toggleBrowserVisibility));B.removeEventListener(h,"click",1,a.throttledOnBrowserViewChangeForClickEvent)};a.attachToViewWillDisappear=function(){if(!a.attachedToViewWillDisappear){var f=T();a.attachedToViewWillDisappear=!0;f.app||(f.app={});a.previousViewWillDisappear=f.app.willDisappear;f.app.willDisappear=function(){a.onBrowserHidden();a.previousViewWillDisappear&&a.previousViewWillDisappear()}}};return a}(),Ea;(function(a){a.PORTRAIT="PORTRAIT";a.LANDSCAPE="LANDSCAPE";a.SQUARE="SQUARE"})(Ea||
(Ea={}));var Dd=function(){return function(a,f,h,c,b,d){var e=this;void 0===c&&(c={});void 0===b&&(b=!1);void 0===d&&(d=!1);this.init=function(){var g,k,l=e.videoOptions,r=l.shouldEnablePlayButton,m=l.shouldEnablePauseButton,t=void 0===m?!0:m;m=l.shouldEnableReduceMotionEffects;var x=l.isAdBlockerEnabled;x=void 0===x?!1:x;var v=l.isAutoPlayDisabled;v=void 0===v?!1:v;var A=l.clientInitiatedStartTime,z=l.shouldCheckObstruction;z=void 0===z?!1:z;var C=l.isDesktop;C=void 0===C?!1:C;var E=l.shouldCheckNativeObstructions;
E=void 0===E?!1:E;l=l.shouldCallGetObstructionsMash;l=void 0===l?!1:l;var F=e.element.querySelector("video"),N=e.buildBoundaryListeners(),V="true"===(null===F||void 0===F?void 0:F.getAttribute("data-videoloadedusinginlinescript")),J=e.videoOptions.clientWeblabHelper?e.videoOptions.clientWeblabHelper.getTreatment(aa.ADPT_SBV_DELAY_PLAYBACK_UNTIL_READY_1248744,!1)===Q.T1:!1;e.videoPlayer=new Cd(F,e.videoEventHandler,N,[],e.element,A,J);e.shouldDelayLoadingVideos||V||e.videoPlayer.load();e.element.querySelectorAll("a").forEach(function(ha){ha.addEventListener("click",
e.logClick)});e.muteClickRegion=e.element.querySelector('[data-type="audioToggleContainer"]');e.muteClickRegion&&(e.muteButton=e.muteClickRegion.querySelector('[data-type="audioToggleMute"]'),e.unmuteButton=e.muteClickRegion.querySelector('[data-type="audioToggleUnmute"]'),e.setMuteButtonStatus(e.videoPlayer.isMuted()),e.muteClickRegion.addEventListener("click",e.toggleAudio),e.isMuted=e.videoPlayer.isMuted());e.ccTrackFail=!1;e.ccTrack=e.element.querySelector('[data-type="ccTrack"]');e.ccTrack&&
(e.ccTrack.onerror=e.ccLoadFailure);e.ccContainer=e.element.querySelector('[data-type="ccContainer"]');e.ccClickRegion=e.element.querySelector('[data-type="ccToggleContainer"]');e.ccClickRegion&&(e.ccButtonOff=e.ccClickRegion.querySelector('[data-type="ccToggleOff"]'),e.ccButtonOn=e.ccClickRegion.querySelector('[data-type="ccToggleOn"]'),e.ccClickRegion.addEventListener("click",function(){return e.toggleCC()}),e.toggleCC(!1,xa.DEFAULT_OFF));e.playClickRegion=e.element.querySelector('[data-type="playIcon"]');
e.playButton=null!==(k=null===(g=e.playClickRegion)||void 0===g?void 0:g.querySelector("button"))&&void 0!==k?k:null;e.hasHorizontalControls=e.element.querySelector('[data-type="hzBtnTray"]')?!0:!1;t&&(e.videoOptions.shouldEnablePlayButton=!0,e.setUpPlayButtonEvents(),e.pauseClickRegion=e.element.querySelector('[data-type="pauseIcon"]'),e.setUpPauseButtonEvents());g=Ic("(prefers-reduced-motion: reduce)");g=m&&!(null===g||void 0===g||!g.matches);if(x)e.videoEventHandler.onAdblockDetected();e.isAutoPlayDisabled=
g||x||v;e.isAutoPlayDisabled&&(r=!0,e.setUpPlayButtonEvents(),e.videoEventHandler.onVideoPausedDueToAutoplayDisabled());e.showPlayButton(r);e.handleVideoOrientation();e.skipViewabilityRegistration||(sa.registerElement(F,.5,!0,!0,!0,e.onFiftyPercentViewabilityChange,void 0,{shouldCheckObstructionOnRecalculation:z,isDesktop:C,shouldCheckNativeObstructions:E,shouldCallGetObstructionsMash:l}),sa.registerElement(F,.01,!0,!0,!0,e.onOnePercentViewabilityChange,void 0,{onBrowserVisibilityChange:e.onBrowserVisibilityChange,
shouldCheckNativeObstructions:E,shouldCallGetObstructionsMash:l}))};this.getVideoCurrentTimeMs=function(){return e.videoPlayer.getCurrentTimeMs()};this.getTotalVideoDuration=function(){return e.videoPlayer.getDurationMs()};this.loadVideo=function(){e.videoPlayer.load()};this.setMuteStatus=function(g,k){e.isMuted=g;e.setMuteButtonStatus(g);e.muteClickRegion&&(g?(e.videoPlayer.mute(),e.videoEventHandler.onVideoMuted(e.getVideoCurrentTimeMs(),k)):(e.videoPlayer.unmute(),e.videoEventHandler.onVideoUnmuted(e.getVideoCurrentTimeMs(),
k)))};this.play=function(){if(e.isPlaying())return Promise.resolve();e.videoPlayer.hasSrcAttr()||e.videoPlayer.loadVideoOnBrowserVisible();e.videoPlayer.resetContinuousPlaybackDurationMs();e.videoEventHandler.onVideoPlaybackInitiated(e.getVideoCurrentTimeMs());e.showPlayButton(!1);e.showPauseButton(!0);e.muteClickRegion&&(e.muteClickRegion.style.display="block",e.videoEventHandler.onAudioToggleIconDisplayed(),e.muteClickRegion.style.visibility="visible");e.pauseClickRegion&&(e.pauseClickRegion.style.display=
"block",e.videoEventHandler.onPauseIconDisplayed(),e.pauseClickRegion.style.visibility="visible");e.ccTrack&&!e.ccTrackFail&&e.ccClickRegion&&(e.ccClickRegion.style.display="block",e.videoEventHandler.onCcIconDisplayed(),e.ccClickRegion.style.visibility="visible");return e.videoPlayer.isNavBackLoadPending()?(e.videoPlayer.attachLoadStartCallback(function(){return e.play()}),Promise.resolve()):e.videoPlayer.play(Date.now()).then().catch(function(g){var k="string"===typeof g?g:"";g instanceof DOMException&&
(k=g.name+": "+g.message);e.showPlayButton(!0);e.showPauseButton(!1);e.muteClickRegion&&(e.muteClickRegion.style.visibility="hidden");e.ccClickRegion&&(e.ccClickRegion.style.visibility="hidden");if(k.startsWith("NotSupported"))e.videoEventHandler.onVideoPlayPromiseNotSupported();e.videoEventHandler.onVideoPlayPromiseRejected(k)})};this.pause=function(g){e.isPaused()||(e.videoEventHandler.onVideoPauseInitiated(e.getVideoCurrentTimeMs()),e.videoEventHandler.onVideoViewed(e.videoPlayer.getContinuousPlaybackDurationMs()),
e.videoPlayer.resetContinuousPlaybackDurationMs(),e.showPauseButton(!1),!g&&e.videoOptions.shouldEnablePlayButton&&e.showPlayButton(!0),e.muteClickRegion&&!e.hasHorizontalControls&&(e.muteClickRegion.style.visibility="hidden"),e.videoPlayer.pause())};this.onBrowserVisibilityChange=function(g){e.videoOptions.shouldEnableVideoCleanup&&(g?e.videoPlayer.loadVideoOnBrowserVisible():e.videoPlayer.clear())};this.onOnePercentViewabilityChange=function(g,k){g=Date.now();k?(e.onScreenStartTime=g,e.videoEventHandler.onVideoOnScreen(e.videoPlayer.getPercentDownloaded())):
(e.videoPlayer.isMuted()||e.setMuteStatus(!0,wa.VIDEO_OFF_SCREEN),e.videoEventHandler.onVideoOffScreen(g-e.onScreenStartTime,e.getVideoCurrentTimeMs()),e.onScreenStartTime=0,e.videoPlayer.seekToStart(),e.videoPlayer.resetContinuousPlaybackDurationMs())};this.onFiftyPercentViewabilityChange=function(g,k,l){e.isAutoPlayDisabled&&!e.playButtonClicked||e.pauseButtonClicked||(k?e.play().catch():e.pause(l))};this.setVideoOptions=function(g){e.videoOptions=g};this.setAutoPlayDisabled=function(g){e.isAutoPlayDisabled=
g};this.handleVideoOrientation=function(){var g=e.videoAdAttributes,k=g.videoPreviewImageSrc;if(g=g.videoOrientation===Ea.PORTRAIT)void 0===k&&(k=""),g=!k.startsWith("https://m.media-amazon.com");if(g)e.videoEventHandler.onVideoPreviewImageNotMediaAmazon()};this.isPlaying=function(){return e.videoPlayer.playbackState===G.PLAYING};this.isPaused=function(){return e.videoPlayer.playbackState===G.PAUSED};this.buildBoundaryListeners=function(){return[new Pb(2E3,e.videoEventHandler.onVideoDurationPlayed),
new Pb(15E3,e.videoEventHandler.onVideoDurationPlayed)]};this.toggleAudio=function(){var g,k,l="true"===(null===(g=e.muteClickRegion)||void 0===g?void 0:g.getAttribute("aria-pressed"));null===(k=e.muteClickRegion)||void 0===k?void 0:k.setAttribute("aria-pressed",!l+"");e.setMuteStatus(!e.videoPlayer.isMuted(),wa.ICON_TAP)};this.toggleCC=function(g,k){var l;e.ccShowing=null!==g&&void 0!==g?g:!e.ccShowing;g=null!==k&&void 0!==k?k:xa.ICON_TAP;e.ccButtonOff&&e.ccButtonOn&&(e.ccShowing?(e.videoEventHandler.onCcOn(g,
e.videoPlayer.getCaptionLang()),e.ccButtonOn.style.opacity="1",e.ccButtonOff.style.opacity="0"):(e.videoEventHandler.onCcOff(g,e.videoPlayer.getCaptionLang()),e.ccButtonOn.style.opacity="0",e.ccButtonOff.style.opacity="1"));e.ccContainer&&(e.ccContainer.style.visibility=e.ccShowing?"visible":"hidden");null===(l=e.ccClickRegion)||void 0===l?void 0:l.setAttribute("aria-pressed",""+e.ccShowing)};this.showPlayButton=function(g){e.hasHorizontalControls&&e.playClickRegion?e.playClickRegion.style.display=
g?"block":"none":e.playClickRegion&&(e.playClickRegion.style.visibility=g?"inherit":"hidden")};this.showPauseButton=function(g){e.hasHorizontalControls&&e.pauseClickRegion?e.pauseClickRegion.style.display=g?"block":"none":e.pauseClickRegion&&(e.pauseClickRegion.style.visibility=g?"inherit":"hidden")};this.setUpPlayButtonEvents=function(){e.playClickRegion&&e.playClickRegion.addEventListener("click",function(){var g;e.play();e.playButtonClicked=!0;if(e.playButtonClicked&&e.pauseButtonClicked)e.videoEventHandler.onVideoPlayFromPause(e.getVideoCurrentTimeMs());
e.pauseButtonClicked=!1;null===(g=e.pauseClickRegion)||void 0===g?void 0:g.focus()})};this.setUpPauseButtonEvents=function(){e.pauseClickRegion&&e.pauseClickRegion.addEventListener("click",function(){var g;e.pause();e.pauseButtonClicked=!0;e.videoEventHandler.onVideoPauseButtonTriggered(e.getVideoCurrentTimeMs());e.playButtonClicked=!1;null===(g=e.playButton)||void 0===g?void 0:g.focus()})};this.ccLoadFailure=function(g){e.ccTrackFail=!0;e.videoEventHandler.onCcLoadFailure(g);e.ccClickRegion&&(e.ccClickRegion.style.visibility=
"hidden")};this.setMuteButtonStatus=function(g){e.muteButton&&e.unmuteButton&&(g?(e.unmuteButton.style.fillOpacity="0",e.muteButton.style.fillOpacity="1"):(e.muteButton.style.fillOpacity="0",e.unmuteButton.style.fillOpacity="1"))};this.logClick=function(){e.videoEventHandler.onVideoClicked(e.getVideoCurrentTimeMs())};this.element=a;this.videoAdAttributes=h;this.videoEventHandler=f;this.videoOptions=c;this.skipViewabilityRegistration=b;this.shouldDelayLoadingVideos=d}}(),Ed=function(){return function(a,
f,h){var c=this;this.onBackgroundClicked=function(){c.metricsManager.reportBackgroundClicked(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes)};this.onCtaClicked=function(){c.metricsManager.reportBrandCtaLinkClicked(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes)};this.onCtaBannerClicked=function(){c.metricsManager.reportCtaBannerClicked(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes)};this.onHeadlineClicked=function(){c.metricsManager.reportHeadlineClicked(c.videoManager.getVideoCurrentTimeMs(),
c.videoManager.videoAdAttributes)};this.onBrandCtaLinkClicked=function(){c.metricsManager.reportBrandCtaLinkClicked(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes)};this.onBrandLogoClicked=function(){c.metricsManager.reportBrandLogoClicked(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes)};this.onBrandNameClicked=function(){c.metricsManager.reportBrandNameClicked(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes)};this.onCreatorLogoClicked=
function(){c.metricsManager.reportCreatorLogoClicked(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes)};this.onCreatorCtaClicked=function(){c.metricsManager.reportCreatorCtaClicked(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes)};this.productReceived=function(b){var d;void 0===b&&(b=0);var e=(null===(d=c.widgetEventAttributes)||void 0===d?0:d.productAttributes)&&0<c.widgetEventAttributes.productAttributes.length?c.widgetEventAttributes.productAttributes[b]:
void 0;c.metricsManager.reportProductReceived(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes,e)};this.onProductClicked=function(b){var d;void 0===b&&(b=0);var e=(null===(d=c.widgetEventAttributes)||void 0===d?0:d.productAttributes)&&0<c.widgetEventAttributes.productAttributes.length?c.widgetEventAttributes.productAttributes[b]:void 0;c.metricsManager.reportProductClicked(c.videoManager.getVideoCurrentTimeMs(),c.videoManager.videoAdAttributes,e)};this.eventBannerDisplayed=
function(b){c.metricsManager.reportEventBannerDisplayed(b,c.videoManager.videoAdAttributes)};this.onEventBannerClicked=function(b){c.metricsManager.reportEventBannerClicked(b,c.videoManager.videoAdAttributes)};this.metricsManager=a;this.videoManager=f;this.widgetEventAttributes=h}}(),Fd=function(){function a(f,h){var c=this;this.setupBackgroundEvent=function(){c.widgetElements.backgroundElement&&c.widgetElements.backgroundElement.addEventListener("click",c.widgetEventHandler.onBackgroundClicked)};
this.setupBrandLogoEvent=function(){c.widgetElements.brandLogoElement&&c.widgetElements.brandLogoElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",c.widgetEventHandler.onBrandLogoClicked)});c.widgetElements.brandElement&&c.widgetElements.brandElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",c.widgetEventHandler.onBrandCtaLinkClicked)})};this.setupCallToActionEvent=function(){c.widgetElements.callToActionElement&&c.widgetElements.callToActionElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",
c.widgetEventHandler.onCtaClicked)});c.widgetElements.callToActionBannerElement&&c.widgetElements.callToActionBannerElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",c.widgetEventHandler.onCtaBannerClicked)})};this.setupHeadlineEvent=function(){c.widgetElements.headlineElement&&c.widgetElements.headlineElement.querySelectorAll("*").forEach(function(b){b.addEventListener("click",c.widgetEventHandler.onHeadlineClicked)})};this.setupProductEvents=function(){c.widgetElements.productElements&&
c.widgetElements.productElements.forEach(function(b,d){b&&(c.widgetEventHandler.productReceived(d),b.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){c.widgetEventHandler.onProductClicked(d)})}))})};this.setUpCreatorContentEvents=function(){c.setupBrandNameEvent();c.setupCreatorCtaEvent();c.setupCreatorLogoEvent()};this.setupBrandNameEvent=function(){c.widgetElements.brandNameElement&&c.widgetElements.brandNameElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",
c.widgetEventHandler.onBrandNameClicked)})};this.setupCreatorCtaEvent=function(){c.widgetElements.creatorNameElement&&c.widgetElements.creatorNameElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",c.widgetEventHandler.onCreatorCtaClicked)})};this.setupCreatorLogoEvent=function(){c.widgetElements.creatorLogoElement&&c.widgetElements.creatorLogoElement.querySelectorAll("a").forEach(function(b){b.addEventListener("click",c.widgetEventHandler.onCreatorLogoClicked)})};this.setupEventBannerEvents=
function(){var b=y["default"].cardRoot.querySelector('[data-type="eventBannerContainer"]');if(b&&b.dataset){var d=b.dataset.layout,e=void 0===d?"":d;c.widgetEventHandler.eventBannerDisplayed(e);b.querySelectorAll("a").forEach(function(g){g.addEventListener("click",function(){return c.widgetEventHandler.onEventBannerClicked(e)})})}};this.widgetElements=f;this.widgetEventHandler=h}a.prototype.setupWidgetEvents=function(){this.setupBackgroundEvent();this.setupBrandLogoEvent();this.setupCallToActionEvent();
this.setupHeadlineEvent();this.setupProductEvents();this.setupEventBannerEvents();this.setUpCreatorContentEvents()};return a}(),Gd={shouldAreaOnlyUseElementWidth:!0},Hd=function(){return function(a,f){var h=this;this.attach=function(){h.setupAdUnitViewability()};this.setupAdUnitViewability=function(){var c=sa.registerElement(h.adUnitElement,.5,!0,!0,!0,h.onFiftyPercentViewabilityChange,void 0,h.viewabilityOptions);h.registeredAdUnitElement=c};this.onFiftyPercentViewabilityChange=function(c,b){h.adUnitInView=
b};this.forceVisibilityCheck=function(c){h.registeredAdUnitElement&&sa.checkObstruction(h.registeredAdUnitElement,!0)};this.handleViewableImpressionForElements=function(){sa.handleViewableImpression()};this.isAdUnitInView=function(){return h.adUnitInView};this.calculateVideoDurationTotalMsRelativeToAdUnit=function(c){h.isAdUnitInView()?h.videoDurationTotalMsWhenAdInViewFirst=c-h.videoDurationStartTimeMsWhenAdInViewFirst:(h.videoDurationTotalMsWhenAdInViewFirst=0,h.videoDurationStartTimeMsWhenAdInViewFirst=
c);return h.videoDurationTotalMsWhenAdInViewFirst};this.getAdUnitPercentInView=function(){return fa.getPercentInView(h.adUnitElement,h.viewabilityOptions)};this.adUnitElement=a;this.adUnitInView=!1;this.videoDurationTotalMsWhenAdInViewFirst=this.videoDurationStartTimeMsWhenAdInViewFirst=0;this.viewabilityOptions=n.__assign(n.__assign({},Gd),f)}}(),Rb={},Va=function(a,f,h){void 0===f&&(f="");void 0===h&&(h=1);f=a+f;Rb.hasOwnProperty(f)||(Rb[f]=!0,D.count(a,(D.count(a)||0)+h))},Id=function(a){Va(u["default"].capabilities.mobile?
"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var f=function(c,b){c={$event:{preventDefault:u["default"].$.noop,stopPropagation:u["default"].$.noop},$target:c.getContent().find('[data-a-tab-name="'+b+'"]'),data:{name:"energyEfficiencyTabSet"}};u["default"].trigger("a:declarative:a-tabs:click",c)},h=function(c,b){var d=c&&c.$event,e=c&&c.data||{},g=e.activeTabName,k=e.modalHeight,l=e.name;d&&d.preventDefault&&d.preventDefault();d&&d.stopPropagation&&d.stopPropagation();
d=b.get(l);d||(u["default"].on("a:popover:beforeShow:"+l,function(r){r.popover&&r.popover.getContent&&(r=r.popover.getContent(),r.find(".a-manually-loaded").parent().css("min-height",k),u["default"].loadDescendantImagesManually(r))}),d=b.create(c.$target,e));d.show();f(d,g)};a.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(c){u["default"].declarative("card-energy-efficiency-secondary-view","click",function(b){Va("Card:EERU:SharedLib:mobile:click",b&&b.data&&b.data.name||
"");h(b,c)})});a.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(c){u["default"].declarative("card-energy-efficiency-modal","click",function(b){Va("Card:EERU:SharedLib:desktop:click",b&&b.data&&b.data.name||"");h(b,c)})})},Jd=function(a){a.when("ready").execute("EEBadgeProductFicheResize",function(f){var h=u["default"].$;h(".energyEfficiencyContainer").each(function(c,b){c=h(b).find(".energyEfficiencyProductFicheLabel").first();b=h(b).find("svg").first();c.parent().outerHeight()>
b.outerHeight()&&(c.removeClass("a-size-small"),c.addClass("a-size-micro"),c.parent().outerHeight()>b.outerHeight()&&c.parent().css("line-height","10px"))})})},Kd=function(){var a=window.P;Id(a);Jd(a)},Ld=function(a){return 9<a?String(a):"0"+a},Sb=function(a){if(0>=a)return"00:00";var f=Math.floor(a/36E5);a=[Math.floor(a/6E4%60),Math.floor(a/1E3%60)];0<f&&a.unshift(f);return a.map(Ld).join(":")},Md=function(){function a(f){this.timerElement=f;this.msToEvent=parseInt(f.dataset.targetTime,10);this.timerElement.innerText=
Sb(this.msToEvent)}a.prototype.start=function(){var f=this;isNaN(this.msToEvent)||(this.counterStartTime=Date.now(),this.counterInterval=uc.interval(function(){return f.updateTime()},500))};a.prototype.updateTime=function(){var f=Date.now()-this.counterStartTime;0>=this.msToEvent-f&&clearInterval(this.counterInterval);this.timerElement.innerText=Sb(this.msToEvent-f)};return a}(),Nd=function(a){null===a?L["default"].log("No element found to initialize badge timer. returning..."):Array.prototype.slice.call(a.getElementsByClassName("badge-countdown-timer")).forEach(function(f){0===
(null===f||void 0===f?void 0:f.innerHTML.length)&&(new Md(f)).start()})},Tb={CCA_SPONSORED:"sponsored-creator-cca",CCA_FEATURED:"sponsored-creator-featured",CREATOR_CO_OWNER:"sponsored-creator-coowner"},Fa;(function(a){a.BRANDED_PDP="branded-pdp";a.UNBRANDED_PDP="unbranded-pdp";a.BRANDED_PDP_WITH_LOGO_HEADLINE="brand_logo-headline"})(Fa||(Fa={}));var Ub;(function(a){a.Asin="ASIN";a.Brand="BRAND";a.Video="VIDEO";a.Uri="URI"})(Ub||(Ub={}));var Vb;(function(a){a.DETAIL="Detail";a.SEARCH="Search"})(Vb||
(Vb={}));var ta;(function(a){a.DEFAULT="Default";a.VERTICAL_VIDEO_NO_ASIN_DETAILS="VerticalVideoNoAsinDetails";a.SINGLE_ASIN_WITH_BRAND_LOGO_IN_PRODUCT_DETAILS="SingleAsinWithBrandLogoInProductDetails";a.BRANDED_PDP="BrandedPDP";a.VERTICAL_VIDEO_BRANDED="BrandedVerticalVideo";a.VERTICAL_VIDEO_UNBRANDED="UnbrandedVerticalVideo"})(ta||(ta={}));var Wb;(function(a){a.DEFAULT="Default";a.CTA_AND_ADFEEDBACK_REPLACES_HEADLINE="CtaAndAdFeedbackReplacesHeadline"})(Wb||(Wb={}));var Xb;(function(a){a.DEFAULT=
"Default";a.LEFT_ALIGN="LeftAlign";a.DEAL="Deal"})(Xb||(Xb={}));var Ga;(function(a){a.DEFAULT="Default";a.BRANDED_PDP="BrandedPDP";a.MULTI_IMAGE_INLINE="MultiImageInline";a.MULTI_IMAGE_ON_SIDE="MultiImageOnSide"})(Ga||(Ga={}));var Wa;(function(a){a.UX_V1="UX_V1";a.UX_V2="UX_V2"})(Wa||(Wa={}));var Od={method:"HEAD",mode:"no-cors",headers:{"Content-Type":"plain/text"}},Pd=function(a){return"mobile"===Ua()||(null===a||void 0===a?void 0:a.getTreatment(aa.ADPT_SBV_1041956))!==Q.T1?Promise.resolve(!1):
Mc("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?_=1607460946161",2E3,Od).then(function(){return!1}).catch(function(){return!0})},Qd=function(a){return qa()&&a.getTreatment(aa.ADPT_SBV_MSHOP_NATIVE_VIEWABILITY_OBSTRUCTION_V2_1236420,!1)===Q.T1},Td=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var f,h,c,b,d,e,g;return n.__generator(this,function(k){if(!y["default"].cardRoot.dataset.properties)return D.count("sbVideoProductCollectionNoProps"),[2];f=Date.now();h=JSON.parse(y["default"].cardRoot.dataset.properties);
c=new xb(h.weblabs,h.widgetType);b=ca.AF;d=y["default"].cardRoot.querySelector(".mobileEnergyEfficiencyContainer, .energyEfficiencyContainer");Fc(h.widgetGroupId,h.pageNumber)&&h.experienceType===Fa.UNBRANDED_PDP&&c.getTreatment(aa.ADPT_SCF_1236384,!1)===Q.T1&&(b=ca.IMMEDIATELY);try{h.experience===ta.VERTICAL_VIDEO_NO_ASIN_DETAILS&&Rd(),d&&(Kd(),zc()),e=!1,g=function(l){e||(e=!0,Sd(h,c,a,l,f))},Jc(g,b,h),setTimeout(function(){D.count("sbVideoProductCollectionLoadClientFallbackCalled");g(W.IMMEDIATELY)},
1E3)}catch(l){L["default"].log(l,"ERROR",h.widgetType),L["default"].log("SBV product collection client setup failed","ERROR",h.widgetType)}return[2]})})},Sd=function(a,f,h,c,b){return n.__awaiter(void 0,void 0,void 0,function(){var d,e,g,k,l,r,m,t,x,v,A,z,C,E,F,N,V,J,ha,ia,ra,Yb,Xa,Zb,Ha,$b,Ya,Za,Ia,Ja,ac,ua,bc,cc,K,S,la,$a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,dc,ec,fc,Ka,va,gc,hc,ic,lb;return n.__generator(this,function(mb){switch(mb.label){case 0:d=h.enableAdFeedback;e=h.carouselClientOptions;g=h.isDesktop;
k=void 0===g?!1:g;l=a.isBrandedPDP;r=a.experienceType;m=a.widgetGroupId;t=void 0===m?"":m;x=a.hideBrandLogoHeader;v=a.hideBrandCreatorLogoHeader;A=void 0===v?!0:v;z=a.videoOrientation;C=a.hasCarousel;E=void 0===C?!1:C;F=a.videoType;N=void 0===F?"":F;V=a.experience;J=void 0===V?"":V;ha=a.experienceVariation;ia=t===M.SPARKLE_DESKTOP||t===M.SPARKLE_MOBILE;ra=f.getTreatment(aa.SBV_672322)===Q.T1;Yb=!k&&z===Ea.PORTRAIT;Xa=J===ta.VERTICAL_VIDEO_NO_ASIN_DETAILS;Zb=J===Ga.MULTI_IMAGE_INLINE;Ha=r===Fa.UNBRANDED_PDP;
$b=f.getTreatment(aa.ADPT_SBV_DISABLE_SRC_SWAP_1269759,!1)===Q.T1;Ya=!ia&&!$b;Za=!k&&!ia&&!Yb;Ia=t===M.SPARKLE_DESKTOP||t===M.SPARKLE_MOBILE;Ja=Object.values(Tb).includes(N);ac={shouldBillViewMetrics:!Ja,shouldLogViewMetrics:!0};ua=y["default"].cardRoot.querySelectorAll(Ud(a));bc=ua.length;cc=!Ha;K=new Uc({clientId:a.clientId,deviceEnv:u["default"].capabilities.isAmazonApp?"app":"web",deviceOs:id(),deviceType:Ua(),experience:J,experienceVariation:ha,language:a.language,marketplaceId:a.marketplaceId,
pageNumber:a.pageNumber,pageType:a.pageType,requestId:a.requestId,searchQuery:a.searchQuery,stage:tb.getStage(),weblabs:a.weblabs,widgetGroupId:a.widgetGroupId,widgetIndex:void 0,widgetType:a.widgetType,numberOfAsins:bc,hasBrandInfo:cc},gd(a.marketplaceId),ac);Ja&&La["default"].visible().then(function(){K.reportWidgetOnScreen()});K.reportResponseReceived(1,c);S={adId:a.adId,advertiserId:a.advertiserId,campaignId:a.campaignId,contentHash:a.contentHash,headline:a.headline,imageUrl:a.imageUrl,storeCta:null!==
(lb=a.storeCta)&&void 0!==lb?lb:"",instrumentationPixelUrl:a.instrumentationPixelUrl,linkUrl:a.clickUrl,metricsIdentifier:a.metricsIdentifier,videoPreviewImageSrc:a.videoPreviewImageSrc,videoSrc:a.videoSrc,videoType:N,ccSrc:a.ccSrc,videoOrientation:a.videoOrientation};la=y["default"].cardRoot.querySelector(".sbv-ad-content-container");Ya||vd(la);$a=y["default"].cardRoot.querySelector('[data-type="backgroundLink"]');ab=y["default"].cardRoot.querySelector(Vd(a,Ja));bb=y["default"].cardRoot.querySelector('[id="ctaContainer"]');
cb=y["default"].cardRoot.querySelector('[data-type="ctaBanner"]');db=y["default"].cardRoot.querySelector('[id="headlineContainer"]');eb=y["default"].cardRoot.querySelector('[data-type="videoContainer"]');fb=y["default"].cardRoot.querySelector('[id="creatorCta"]');gb=y["default"].cardRoot.querySelector('[id="brandCta"]');hb=y["default"].cardRoot.querySelector('[id="creatorLogo"]');ib=qa()&&t===M.SPARKLE_MOBILE;jb=Qd(f);if(!eb)return K.reportMissingVideoElement(S),L["default"].log("Missing video element.",
"ERROR"),[2];la&&(kb=new Hd(la,{isDesktop:k,shouldCheckObstruction:Ia,shouldCheckNativeObstructions:ib,shouldCallGetObstructionsMash:jb}),kb.attach());Qc(K,{cardName:"sbVideoProductCollection",enableAdFeedback:d,isAdFeedbackForCards:ra});return[4,Pd(f)];case 1:return dc=mb.sent(),ec={isAdBlockerEnabled:dc,shouldEnableVideoCleanup:wd(f),shouldEnableReduceMotionEffects:f.getTreatment(aa.SBV_842986)===Q.T1,shouldCheckNativeObstructions:ib,shouldCallGetObstructionsMash:jb,clientWeblabHelper:f,clientInitiatedStartTime:b,
shouldCheckObstruction:Ia,isDesktop:k},fc=new yd(K,S,{shouldCheckObstruction:Ia},kb),Ka=new Dd(eb,fc,S,ec),Ka.init(),$a||(K.reportMissingBackgroundElement(S),L["default"].log("Missing background element.","ERROR")),va=Wd(ua,K,S),l||Xa||va.length||L["default"].log("Missing product element.","ERROR"),gc=new Ed(K,Ka,{productAttributes:va}),hc=new Fd({backgroundElement:$a,brandLogoElement:ab,callToActionElement:bb,callToActionBannerElement:cb,headlineElement:db,productElements:ua,brandNameElement:gb,
creatorNameElement:fb,creatorLogoElement:hb},gc),hc.setupWidgetEvents(),x?K.reportPDPRenderedAsPC(S):(Ha||bb||cb||(K.reportMissingBrandElement(S),L["default"].log("Missing CTA element.","ERROR")),l||Ha||Xa||Zb||db||(K.reportMissingBrandElement(S),L["default"].log("Missing headline element.","ERROR"))),A||Xd(K,N,S,fb,gb,hb,ab),Oa(),(ic=y["default"].cardRoot.querySelector('[data-type="playIcon"]'))&&ic.addEventListener("click",function(ge){return Ka.play()}),Ya&&ud(la,S.videoPreviewImageSrc),Za&&Yd(h,
ua,va,E),Nd(la),[4,xd(n.__assign(n.__assign({},e),{productAttributes:va,shouldEnableImageLatencyImprovements:Za}))];case 2:return mb.sent(),[2]}})})},Wd=function(a,f,h){var c=[];if(!a)return f.reportMissingProductElements(h),c;f.reportNumAsins(a.length);a.forEach(function(b,d){var e,g;if(void 0===(null===(e=b.dataset)||void 0===e?void 0:e.asinadattributesprops))return[];b=JSON.parse(null===(g=b.dataset)||void 0===g?void 0:g.asinadattributesprops);f.reportProductAttributes(h,b);c.push(n.__assign(n.__assign({},
b),{productIndex:d}))});return c},Yd=function(a,f,h,c){f.forEach(function(b,d){var e=!a.isDesktop&&c?1>=d:!0;e&&Nb(b,h[d].imageUrl)})},Xd=function(a,f,h,c,b,d,e){f=f===Tb.CREATOR_CO_OWNER;e?c?f&&!d?a.reportMissingCreatorElement(h):f&&!b&&a.reportMissingBrandElement(h):a.reportMissingCreatorElement(h):a.reportMissingBrandElement(h)},Rd=function(){u["default"].on("a:truncate:headlineText:updated",function(a){a=a.truncateInstance;var f=y["default"].cardRoot.querySelector('[id="headlineContainer"]');
f&&a.getTruncatedText()!==a.getFullText()&&(f.style.display="none")});vc.refreshAutoTruncate()},Ud=function(a){var f='[data-type="productContainer"]',h=a.experienceVariation;a.experience===Ga.BRANDED_PDP&&h===Wa.UX_V1&&(f='[data-type="productImageLinkContainer"]');return f},Vd=function(a,f){var h='[id="brandLogo"]';a.experience===ta.VERTICAL_VIDEO_NO_ASIN_DETAILS||f||(h='[class*="brandedLogoContainer"]');return h},ma=function(a,f){return a.querySelector("[class*="+f+"]")},Zd=function(a,f,h){a=JSON.parse(a);
a.adCreativeMetaData=f.adCreativeMetaData;a.feedbackFormContainerId=h;return encodeURI(JSON.stringify(a))},$d=function(a,f,h,c,b){return n.__awaiter(void 0,void 0,void 0,function(){var d,e,g,k,l,r,m;return n.__generator(this,function(t){d="adFeedbackModal_"+a;t=(null===(m=ma(f,"ad-feedback-modal-container"))||void 0===m?void 0:m.className)||"";e="."+f.className+" ."+t.replace(" ",".");k=(g=h().adCreativeMetaData.adCreativeDetails)?g.length:0;l={a11yOpenMessage:b?b:"",width:Math.max(560,132*k+160),
a11yCloseButtonMessage:c};try{return r=Dc["default"].create(d,e,l),[2,r]}catch(x){throw D.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+x);}})})},ce=function(a,f,h,c,b,d){var e="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var g=ma(ea["default"].cardRoot,e);a.on("beforeShow",function(){return n.__awaiter(void 0,void 0,void 0,function(){var k;return n.__generator(this,function(l){switch(l.label){case 0:return k=
ae(a,f,h),[4,a.render(function(r){var m="250px",t=h().adCreativeMetaData.adCreativeDetails;t&&2>t.length&&(m="150px");g.style.marginTop=m;r.innerHTML="";m=r.appendChild;t=document.getElementsByTagName("html")[0].dir;var x=ea["default"].createElement("div"),v=ea["default"].createElement("div");x.innerHTML=b;"rtl"===t?(x.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
v.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(x.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),v.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
v.appendChild(x);m.call(r,v);m=document.getElementsByTagName("html")[0].dir;t=ea["default"].createElement("div");"rtl"===m?t.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):t.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");be(g,t,c,k,d);r.appendChild(t)})];case 1:return l.sent(),[2]}})})})},ae=function(a,f,h){h=h();var c=h.adCreativeMetaData.adCreativeDetails;
null===c||void 0===c?void 0:c.sort(function(b,d){return b.adCreativeIndex<d.adCreativeIndex?-1:1});return Zd(f,h,a.id)},be=function(a,f,h,c,b){f.appendChild(a);"function"==typeof D.uet&&D.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});Ec["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===h?"en-US":h}},{pl:c,deviceType:"desktop"}).then(function(d){return n.__awaiter(void 0,
void 0,void 0,function(){var e,g,k;return n.__generator(this,function(l){"function"==typeof D.uet&&D.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});D.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);e=ea["default"].createElement("div");e.innerHTML=String(d.responseBody);for(g=0;g<e.children.length;++g)k=e.children[g],"SCRIPT"===k.tagName?nb("script",k,f):"LINK"===k.tagName?nb("link",k,f):nb("div",k,f);f.removeChild(a);return[2]})})}).catch(function(){"function"==
typeof D.uet&&D.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});D.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);f.innerHTML=b});"function"==typeof D.uex&&D.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},nb=function(a,f,h){var c=ea["default"].createElement(a);c.innerHTML=f.innerHTML;f.getAttributeNames().forEach(function(b){c.setAttribute(b,f.getAttribute(b)||"")});h.appendChild(c)},jc={},de=function(a,f){return n.__awaiter(void 0,
void 0,void 0,function(){var h,c,b,d,e,g,k,l,r,m,t;return n.__generator(this,function(x){h=ma(a,"ad-feedback-primary-link");c=f().adFeedbackLabelId;b=qb["default"].setup();d="open-modal"+c;e=f().adCreativeMetaData.adCreativeDetails;g=a.dataset;k=g.isDsaEnabled;l=g.weblabTreatment;r=g.closeButtonAriaText;m=g.adFeedbackTitle;t=String(k);"undefined"===t&&(t=e&&0<e.length?e[0].selectionSignals?"true":"false":"false");"true"===t&&"T1"!==l&&(t="false");b.attach(d,h);b.define(d,"click",function(){return n.__awaiter(void 0,
void 0,void 0,function(){var v;return n.__generator(this,function(A){switch(A.label){case 0:return(v=jc[c])?[3,2]:[4,$d(c,a,f,r,m)];case 1:v=A.sent();var z=a.dataset,C=z.formHeaderText,E=z.dsaFormHeaderText;ce(v,z.adFeedbackPayload,f,z.currentLocale,"true"===t?E:C,z.formLoadErrorText);jc[c]=v;A.label=2;case 2:return v.show(),[2]}})})});try{h.addEventListener("keydown",function(v){if(" "===v.key||"Enter"===v.key)v.preventDefault(),h.click()})}catch(v){console.log("Couldnt add keydown event listner")}return[2]})})},
ee=function(a,f){var h=qb["default"].setup(),c="mouse-enter"+f;f="mouse-leave"+f;var b=ma(a,"ad-feedback-primary-link"),d=ma(a,"ad-feedback-text-desktop"),e=ma(a,"ad-feedback-sprite");h.attach(c,b);h.define(c,"mouseenter",function(){e.style.backgroundPosition="0px -12px";d.style.color="#111111"});h.attach(f,b);h.define(f,"mouseleave",function(){e.style.backgroundPosition="0px 0px";d.style.color="#555"})},fe=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var f,h,c,b;return n.__generator(this,
function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),f=a(),h=y["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+f.adFeedbackLabelId)[0],c=h.dataset.isSponsoredLabelActive,"false"===(c||"false").toLowerCase()?[2]:[4,ee(h,f.adFeedbackLabelId)];case 1:return d.sent(),[4,de(h,a)];case 2:return d.sent(),[3,4];case 3:throw b=d.sent(),D.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+b);case 4:return[2]}})})};
ob._operationNames=[];ob.card=function(){return n.__awaiter(void 0,void 0,void 0,function(){var a;return n.__generator(this,function(f){a={isDesktop:!0,shouldToggleNavButtonVisibility:!0,carouselDisplayStrategy:R.SEARCH_GRID};Td({enableAdFeedback:fe,carouselClientOptions:a,isDesktop:!0});return[2]})})}});
