'use strict';mix_d("P13NSCCards__p13n-desktop-carousel:p13n-desktop-carousel__ILuxULQl","exports tslib @c/scoped-dom @p/A @c/metrics @c/aui-carousel @c/dom @c/remote-operations @p/a-carousel-framework @c/logger @c/aui-untrusted-ajax @c/browser-operations @c/aui-utils @c/tracking @c/error-handling @c/aui-feature-detect @c/aui-modal @c/scoped-metrics @p/jQuery".split(" "),function(xa,m,ya,bb,A,cb,za,Aa,db,eb,fb,Ba,gb,Ca,hb,ib,jb,kb,lb){function H(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}
var x=H(ya),v=H(bb),L=H(A),mb=H(cb),S=H(za),U=H(Aa),Da=H(db),B=H(eb),aa=H(fb),ea=H(Ba),D=H(gb),C=H(hb),nb=H(ib),ob=H(jb),ba=H(kb),E=H(lb),Ea={},ka=function(a,b,c){void 0===b&&(b="");void 0===c&&(c=1);b=a+b;Ea.hasOwnProperty(b)||(Ea[b]=!0,A.count(a,(A.count(a)||0)+c))},pb=function(a){ka(v["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var b=function(d,e){d={$event:{preventDefault:v["default"].$.noop,stopPropagation:v["default"].$.noop},$target:d.getContent().find('[data-a-tab-name="'+
e+'"]'),data:{name:"energyEfficiencyTabSet"}};v["default"].trigger("a:declarative:a-tabs:click",d)},c=function(d,e){var f=d&&d.$event,g=d&&d.data||{},h=g.activeTabName,k=g.modalHeight,p=g.name;f&&f.preventDefault&&f.preventDefault();f&&f.stopPropagation&&f.stopPropagation();f=e.get(p);f||(v["default"].on("a:popover:beforeShow:"+p,function(l){l.popover&&l.popover.getContent&&(l=l.popover.getContent(),l.find(".a-manually-loaded").parent().css("min-height",k),v["default"].loadDescendantImagesManually(l))}),
f=e.create(d.$target,g));f.show();b(f,h)};a.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(d){v["default"].declarative("card-energy-efficiency-secondary-view","click",function(e){ka("Card:EERU:SharedLib:mobile:click",e&&e.data&&e.data.name||"");c(e,d)})});a.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(d){v["default"].declarative("card-energy-efficiency-modal","click",function(e){ka("Card:EERU:SharedLib:desktop:click",e&&e.data&&e.data.name||
"");c(e,d)})})},qb=function(a){a.when("ready").execute("EEBadgeProductFicheResize",function(b){var c=v["default"].$;c(".energyEfficiencyContainer").each(function(d,e){d=c(e).find(".energyEfficiencyProductFicheLabel").first();e=c(e).find("svg").first();d.parent().outerHeight()>e.outerHeight()&&(d.removeClass("a-size-small"),d.addClass("a-size-micro"),d.parent().outerHeight()>e.outerHeight()&&d.parent().css("line-height","10px"))})})},rb=function(){var a=window.P;pb(a);qb(a)},sb={ctiList:["Website/Personalization/Report a Problem CX"],
category:"Website",type:"Personalization",item:"Report a Problem CX",folder:"9c9c97c9-6f69-4dba-a55d-26045c6a3068",group:"P13N Report a Problem CX"},tb=[{ctiList:["Website/Personalization/Similarities","Website/Detail Page/Similarities"],category:"Website",type:"Personalization",item:"Similarities",folder:"4d16d05d-9a17-4b36-b8fe-9ee159ff81de",group:"Similarities"}],xb=function(a){var b=x["default"].cardRoot.querySelector(".p13n-report-flag"),c=ea["default"].setup();c.define("showFlag","mouseover",
function(){b.classList.remove("p13n-report-flag-hide")});c.define("hideFlag","mouseout",function(){b.classList.add("p13n-report-flag-hide")});c.attach("showFlag",a);c.attach("hideFlag",a);var d=x["default"].cardRoot.querySelector(".internal-flag-form"),e=d.querySelector(".internal-flag-env-data").dataset,f=d.querySelector(".internal-flag-title-text"),g=d.querySelector(".internal-flag-description").firstElementChild,h=d.querySelector(".internal-flag-alias"),k=d.querySelector(".internal-flag-response-message"),
p=function(l){l.preventDefault();l=function(r){return!r||!r.trim()};if(l(f.value)||l(g.value)||l(h.value))return la(k,!1,"Something went wrong. One of the required fields was missing."),!1;l=x["default"].cardRoot.querySelectorAll(".a-dynamic-image");var t;if(t=x["default"].cardRoot.querySelector(".a-carousel-heading")){var q=ub(a,l.length);t="Internal user reported issue '"+f.value+"' with widget: "+t.innerText}else q=vb(a),t="Internal user reported issue '"+f.value+"'";l=wb(l,q,g.value,h.value,e);
var n=sb;tb.forEach(function(r){r.ctiList.includes(e.cti)&&(n=r)});aa["default"].post("https://p13ngoals.corp.amazon.com/sims",{accepts:"text/html, application/json",contentType:"application/json;charset=UTF-8"},{sim_params:{assigned_folder:n.folder,description:l,descriptionContentType:"text/amz-markdown-sim",extensions:{tt:{assignedGroup:n.group,category:n.category,impact:5,item:n.item,type:n.type}},tags:[{id:"internal-problem-generated"}],title:t}}).then(function(r){la(k,!0,r)}).catch(function(r){la(k,
!1,r)});return!1};d.onsubmit=function(l){return p(l)};c=x["default"].cardRoot.querySelector(".p13n-desktop-report-problem-flag-data");if(c.dataset.name)v["default"].on("a:popover:hide:"+c.dataset.name,function(){d.reset();k.innerText=""})},ub=function(a,b){if(!a.dataset.aCarouselOptions)return B["default"].log("Empty ASIN List in carouselElement.dataset.aCarouselOptions","ERROR"),[];a=JSON.parse(a.dataset.aCarouselOptions).ajax.id_list;var c=x["default"].cardRoot.querySelector(".a-carousel-firstvisibleitem");
c=(Number(c.value)||1)-1;return a.map(function(d){return JSON.parse(d).id}).slice(c,c+b)},vb=function(a){return(a=a.dataset.asinList)?a.split(","):[]},wb=function(a,b,c,d,e){for(var f="",g=0;g<a.length;g++){var h=a[g];f+=(h?"![]("+h.src+")":"IMAGE MISSING")+"\nASIN: "+(b[g]?b[g]:"ASIN MISSING")+"\n\n"}return"**This SIM-T ticket is created by the 'Report a Problem' internal tool. To know more, here's its wiki: https://w.amazon.com/bin/view/Personalization/CoreRecommendations/Projects/Canaries/Report-a-Problem-UX-on-P13NWidget/UserGuide/**\n\n**Alias:** ["+
(d+"](https://phonetool.amazon.com/users/"+d+")\n**Comment:** "+c+"\n\n**Widget Group ID:** "+e.widgetGroupId+"\n**Strategy ID:** "+e.strategyId+"\n**CTI:** "+e.cti+"\n**Facets:** ")+(e.facets+"\n**Content Reftag:** "+e.reftag+"\n"+(""!==e.baseAsin?"**Page ASIN:** "+e.baseAsin+"\n":"")+"\n**SessionID:** ")+(e.sessionId+"\n**MarketplaceID:** "+e.marketplaceId+"\n**Device Type:** "+e.deviceType+"\n\n**List of ASINs:**\n\n")+f},la=function(a,b,c){b?(a.classList.remove("a-color-error"),c.responseBody&&
"object"===typeof c.responseBody?c.responseBody.response&&c.responseBody.response.id?a.innerHTML="Success, here's the <a href=\"https://t.corp.amazon.com/"+c.responseBody.response.id+'" target="_blank">SIM-T ticket</a> you created.':(B["default"].log("Fail to find the id of the SIM-T ticket created in the response body of response data.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket."):(B["default"].log("The response body of response data is not an object.","ERROR"),
a.innerText="Success, but we could not find the link to the SIM-T ticket.")):(a.classList.add("a-color-error"),a.innerText="string"===typeof c?c:"Oops! Something went wrong. Please try again.")},yb={setupModal:function(a){return m.__awaiter(void 0,void 0,void 0,function(){var b;return m.__generator(this,function(c){b=x["default"].cardRoot.querySelector(".p13n-report-problem-modal-root");if(!b)return[2];xb(a);return[2]})})}},zb=U["default"].setup(["getLazyLoadDeliveryMessage"]),Ab=function(a){return m.__awaiter(void 0,
void 0,void 0,function(){var b,c,d;return m.__generator(this,function(e){switch(e.label){case 0:b=a.querySelectorAll("[data-udm-asin]:not([data-requested=true])");if(!b.length)return[2,void 0];c=[];b.forEach(function(f){var g=f.dataset.udmAsin,h=f.dataset.udmMerchantId,k=f.dataset.udmBlockSize,p=f.dataset.udmLayoutSize,l="true"===f.dataset.udmBadgeWithoutProgramName;g&&h&&k&&(c.push({asin:g,merchantId:h,blockSize:k,layoutSize:p,badgeWithoutProgramName:l}),f.dataset.requested="true")});return c.length?
[4,zb.getLazyLoadDeliveryMessage({lazyLoadDeliveryMessageViewModels:c})]:[2,void 0];case 1:return d=e.sent(),[2,[].slice.call(d.querySelectorAll("[data-udm-asin]:not([data-requested=true])"))]}})})},Bb=function(a){return m.__awaiter(void 0,void 0,void 0,function(){var b;return m.__generator(this,function(c){switch(c.label){case 0:return[4,Ab(a)];case 1:b=c.sent();if(!b)return[2];b.map(function(d){var e=d.dataset.udmAsin,f=d.dataset.udmMerchantId;e&&f&&(e=a.querySelector('[data-udm-asin="'+e+'"][data-udm-merchant-id='+
f+"]"))&&(e.outerHTML=d.innerHTML)});return[2]}})})},Fa=[],Cb=function(a){var b=Array.prototype.slice.call(a.querySelectorAll("[data-metrics]"));b.push(a);b.forEach(function(c){if(c&&c.dataset&&c.dataset.metrics&&(!c.id||!Fa.includes(c.id))){var d=JSON.parse(c.dataset.metrics),e;for(e in d)d.hasOwnProperty(e)&&A.count(e,d[e]);c.removeAttribute("data-metrics");c.id&&Fa.push(c.id)}})},Ga=/(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/,
Ha=/[^\/\-\[\]():\s]/,Db=function(a){var b=v["default"].$("<div>")[0];b.classList.add("p13n-sc-offscreen-truncate");var c=parseInt(a.getAttribute("data-rows")||"2",10),d=function(){var g=a.innerHTML;a.innerHTML="&hellip;";var h=a.clientHeight;a.innerHTML=g;return h}();if(c){if(d){var e=function(g){b.innerHTML=g;return Math.round(b.clientHeight/d)<=c},f=function(g,h){g=g.split(h);var k=Math.floor(a.clientWidth/12),p=function(t){b.classList.add("p13n-sc-offscreen-truncate");b.style.overflow="hidden";
b.textContent=t;a.appendChild(b);t=a.clientWidth>=a.scrollWidth;a.removeChild(b);return t},l=function(t){var q=t.length-k;t.trim().length>k&&!p(t)&&Array.prototype.slice.call(t).map(function(n,r){return r>k&&r<=q&&Ha.test(n)?"&shy;"+n:n});return t};return g.map(function(t){return l(t)}).join("")};return{truncate:function(){var g=a.innerHTML.trim(),h=a.textContent||"";g=f(g,Ga);a.appendChild(b);if(e(g))a.removeChild(b),a.innerHTML=g;else{var k=g.split(Ga);for(var p=1,l=k.length,t,q,n=0;p!==l;)if(t=
Math.floor((l+p)/2),q=k.slice(0,t).join("")+"&hellip;",e(q)){if(1>=l-t){for(n=t;0<n&&!Ha.test(k[n-1]);)n--;break}p=t}else l=t;k=0===n?void 0:k.slice(0,n).join("")+"&hellip;";k?(a.innerHTML=k,a.setAttribute("title",h),a.setAttribute("aria-label",h)):(B["default"].log("Unable to successfully truncate line "+g,"ERROR"),a.removeChild(b))}}}}B["default"].log("Truncation element does not have a line height or it is zero","ERROR")}else B["default"].log("Truncation element missing necessary line number data",
"ERROR")},Eb=function(a){var b=Array.prototype.slice.call(a.getElementsByClassName("p13n-sc-truncate"));a=a.getElementsByClassName("p13n-sc-truncate-fallback");(window.CSS&&CSS.supports&&CSS.supports("-webkit-line-clamp","1")?b:b.concat(Array.prototype.slice.call(a))).filter(function(c){return!!c.offsetParent}).map(function(c){var d=Db(c);d&&(d.truncate(),c.classList.add("p13n-sc-truncated"),c.classList.remove("p13n-sc-truncate"),c.classList.remove("p13n-sc-truncate-fallback"),c.className=c.className.replace(/p13n-sc-line-clamp-\d/g,
""))})},Fb=function(a){a.querySelectorAll(".a-carousel-viewport").forEach(function(b){b=b.querySelectorAll(".a-carousel-card");for(var c=null,d=0;d<b.length;d++){var e=b[d].getAttribute("aria-roledescription");if(null!==e&&""!==e){c=e;break}}c=c||"slide";b.forEach(function(f){f.getAttribute("aria-roledescription")!==c&&f.setAttribute("aria-roledescription",c)})})},G=function(a){return a instanceof HTMLElement},Gb=function(a){if(a)try{return parseInt(a,10)}catch(b){}},Hb=function(a){a=Ia(a);a.matches("form")&&
!a.classList.contains("add-to-cart-disabled-form")&&(a.addEventListener("submit",function(b){b.preventDefault()}),a.classList.add("add-to-cart-disabled-form"))},Ia=function(a){a=a.querySelector(".add-to-cart-data");null==a&&C["default"].error("Missing add to cart data element in target element","add-to-cart.client.data-handler","getDataElement");return a},Ib=function(){var a;try{P.now("A").execute(function(b){var c;if(b){var d=b.state("mbs-sp-csrf-state"),e=null===(c=b.$(null===d||void 0===d?void 0:
d.mbsSpCSRFToken))||void 0===c?void 0:c.filter("input");(null===e||void 0===e?0:e.length)?a=b.$(d.mbsSpCSRFToken).filter("input").val():(B["default"].log("Invalid page state!"),L["default"].count("ATCLibInvalidPageState",1))}else B["default"].log("Module not loaded!"),L["default"].count("ATCLibBrowserModuleNotFound",1)})}catch(b){B["default"].log("Error occured while fetch CSRF token from page state: "+b),L["default"].count("ATCLibSPTokenParseFailure",1)}return a},Ja=function(a,b){var c=ma(a);D["default"].delay(function(){c.classList.remove("a-button-disabled");
c.classList.remove("a-button-focus")},Jb(b))},Jb=function(a){var b=Date.now();return 2E3<b-a?0:2E3-(b-a)},ma=function(a){(a=a.querySelector(".add-to-cart-button"))||C["default"].error('Missing Add to Cart button!", "add-to-cart.dom-handler',"getAddToCartButton");return a},V=function(a,b,c){Array.isArray(a)?a.forEach(function(d){A.count(""+d+":"+b,c)}):A.count(""+a+":"+b,c)},Ka=function(a,b,c){b=Date.now()-b;V(a,"AddToCart:ClientLatency",b);V(a,"AddToCart:"+(c?"NeoAddToCart":"AddToCartApi")+":ClientLatency",
b)},I=function(a,b,c){V(b,"AddToCart:Availability:ALL",0);V(b,"AddToCart:Availability:Failure:"+a,1);c=c?"NeoAddToCart":"AddToCartApi";V(b,"AddToCart:"+c+":Availability:ALL",0);V(b,"AddToCart:"+c+":Availability:Failure:"+a,1)},La=function(a,b){V(a,"AddToCart:Availability:ALL",1);V(a,"AddToCart:"+(b?"NeoAddToCart":"AddToCartApi")+":Availability:ALL",1)},Ma=function(a){v["default"].trigger("add-to-cart-library:update-cart-count:trigger",a)},Kb={boolean:Boolean,number:Number,string:String},Lb=function(a,
b){void 0===b&&(b="");var c={};Object.keys(a).forEach(function(d){var e=d.split(b?b:/\]\[|\[|\]/).filter(function(h){return h});if(!(1>e.length)&&e.includes("additionalParameters")){""===b&&(e=e.slice(e.indexOf("additionalParameters")+1));var f=e.pop(),g=m.__read(a[d].split(","),2);d=g[1];g=Kb[g[0]];e.reduce(function(h,k){return h[k]=h[k]||{}},c)[f]=g(d)}});return Object.keys(c).length?c:void 0},Mb=function(a,b){return m.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f;return m.__generator(this,
function(g){switch(g.label){case 0:return c={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},d=x["default"].cardRoot.getElementsByClassName("shoppingPortalCSRFToken")[0].getElementsByTagName("input")[0],c["anti-csrftoken-a2z"]=d&&d.value?d.value:a["anti-csrftoken-a2z"],[4,fetch(b,{method:"post",headers:c,body:new URLSearchParams(a)})];case 1:return e=g.sent(),e.ok?[4,e.json()]:[3,3];case 2:return[2,g.sent()];case 3:return[4,e.text()];case 4:throw f=g.sent(),Error(f);
}})})},Nb=function(a,b){return m.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g;return m.__generator(this,function(h){c=ca(a.inputKeyValues,"clientName");d=ca(a.inputKeyValues,"customizers");e=ca(a.inputKeyValues,"anti-csrftoken-a2z");h=JSON;for(var k=h.stringify,p=a.inputKeyValues,l=a.numItems,t=[],q=0;q<l;q++){var n=ca(p,"items["+q+".base][asin]"),r=Lb(p),u=r?void 0:ca(p,"items["+q+".base][offerListingId]"),w=ca(p,"items["+q+".base][quantity]"),z=Number(w);if(isNaN(z))throw Error("Quantity passed "+
w+" is not a number!");t.push({asin:n,offerListingId:u,quantity:z,additionalParameters:r})}f='{"items":'+k.call(h,t)+"}";g={clientName:c,customizers:d,"anti-csrftoken-a2z":e,payload:f};return[2,Mb(g,b)]})})},ca=function(a,b){var c=a[b];if(!c)throw Error("Missing "+b+" in add to cart form values "+JSON.stringify(a)+"!");return c},na=function(a,b,c,d){if(!b||!b[a])return C["default"].error("Missing Html Container Selector for "+a+" in the experienceContainerSelector","post-neo-add-to-cart-handlers",
"experienceHandler");if(c=c.querySelector("."+b[a]))D["default"].show(c),d&&(c.innerHTML=d);else return C["default"].error("Missing "+b[a]+" Container in the faceoutContainerSection","post-neo-add-to-cart-handlers","experienceHandler")},oa=function(a,b){for(var c in b){var d;(d=a.querySelector("."+b[c]))&&D["default"].hide(d)}},Na={SCXDiscovery_SpeedCardsLibrary:{MOBILE:{weblab:"DEX_SSD_AUI_ATC_BYG_M_1210471",treatment:"C"},DESKTOP:{weblab:"DEX_SSD_AUI_ATC_BYG_D_1210469",treatment:"C"}}},Pb=function(a){var b=
a.clientName;a=a["anti-csrftoken-a2z"];if(b&&a){var c=nb["default"].isSupported("mobile")?"MOBILE":"DESKTOP";Na[b]&&(c=Na[b][c],L["default"].rid&&c&&c.weblab&&c.treatment&&(b={ref_:"atc_clib",weblabId:c.weblab,weblabTreatment:c.treatment,requestID:L["default"].rid,clientName:b},a={accepts:"text/html, application/json",additionalHeaders:{"anti-csrftoken-a2z":a},timeout:2E3},aa["default"].post(Ob("/cart/add-to-cart/weblab",b),a,b).then(function(){L["default"].count("ATCLibExperimentTriggerSuccess",
1)}).catch(function(){L["default"].count("ATCLibExperimentTriggerFailure",1)})))}},Ob=function(a,b){return(b=Object.entries(b).filter(function(c){c=m.__read(c,2);c[0];return null!=c[1]}).map(function(c){c=m.__read(c,2);var d=c[1];return encodeURIComponent(c[0])+"="+encodeURIComponent(d)}).join("&"))?a+"?"+b:a},Qb=function(a,b){try{var c=a.closest(".mobile-promotion-nudges-card-container"),d=b.ProgressSection,e=b.DefaultProgressSection;P.when("cart-progress-module").execute(function(f){return m.__awaiter(this,
void 0,void 0,function(){return m.__generator(this,function(g){f.callUpdateCartProgress(d,e,a,c);return[2]})})})}catch(f){B["default"].log("Error occured while updating Cart Progress : "+f),L["default"].count("ATCLibUpdateCartProgressFailureCount",1)}},Rb=U["default"].setup(["addToCart"]),Tb=function(a){var b=ea["default"].setup().define;b(a.featureId?"AddToCart:"+a.featureId:"AddToCart","click",function(c){var d;return Sb(c,null!==(d=a.useNeoAddToCart)&&void 0!==d?d:!1,a.postAddToCartHandler,a.metricsPrefixes,
a.experienceContainerSelectors,a.faceoutContainerSelector)})},pa={success:!1},Sb=function(a,b,c,d,e,f){return m.__awaiter(void 0,void 0,void 0,function(){var g,h,k,p,l,t,q,n,r,u,w,z,F,M,K,Q,R;return m.__generator(this,function(y){switch(y.label){case 0:if(!b&&!c)return[2,C["default"].error("Missing Post Add To Cart Handlers!","add-to-cart.client","handleAddToCartBrowserOperation")];g=null===(M=a.currentTarget)||void 0===M?void 0:M.closest(".add-to-cart-section");if(!g)return I("MissingHtml",d,b),
[2,C["default"].error("Missing AddToCart section near AddToCart button!","add-to-cart.client","handleAddToCartBrowserOperation")];Hb(g);if(ma(g).classList.contains("a-button-disabled"))return[2];ma(g).classList.add("a-button-disabled");y={};for(var T=Ia(g).getElementsByTagName("input"),N=0;N<T.length;N++){var O=T[N];y[O.name]=O.value}(T=Ib())&&(y["anti-csrftoken-a2z"]=T);h=y;y=a.currentTarget;(null===y||void 0===y?0:y.dataset)||C["default"].error("Event target is missing required data","add-to-cart.client",
"getTargetElementDataFromMixEvent");k=null===y||void 0===y?void 0:y.dataset;p=k.reftag;l=k.asins;t=k.url;if(!l)return I("MissingAsins",d,b),[2,C["default"].error("Missing asins in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];q=JSON.parse(l);if(b){if(f){if(n=null===(K=a.currentTarget)||void 0===K?void 0:K.closest("."+f),!n)return I("MissingFaceoutContainerSection",d,b),[2,C["default"].error("Missing FaceoutContainer Section near AddToCart button!","add-to-cart.client",
"handleAddToCartBrowserOperation")]}else return I("MissingFaceoutContainerSelector",d,b),[2,C["default"].error("Missing FaceoutContainerSelector","add-to-cart.client","handleAddToCartBrowserOperation")];if(!e)return I("MissingExperienceContainerSelectors",d,b),[2,C["default"].error("Missing experienceContainerSelectors","add-to-cart.client","handleAddToCartBrowserOperation")];if(e.ErrorMessage){if(w=n.querySelector("."+e.ErrorMessage),!w)return I("MissingErrorMessageContainerSection",d,b),[2,C["default"].error("Missing ErrorMessageContainer Section in FaceoutContainer Section",
"add-to-cart.client","handleAddToCartBrowserOperation")]}else return I("MissingErrorMessageSelector",d,b),[2,C["default"].error("Missing ErrorMessage Container in experienceContainerSelectors","add-to-cart.client","handleAddToCartBrowserOperation")];if(!t)return I("MissingEndpoint",d,b),[2,C["default"].error("Missing NeoAddToCart Endpoint in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];r=g.querySelector(".inline-error-message");if(!r)return I("MissingInlineErrorMessageContainerSection",
d,b),[2,C["default"].error("Missing inlineErrorMessage Container Section in addToCartSection","add-to-cart.client","handleAddToCartBrowserOperation")];u=g.querySelector(".inline-success-message");if(!u)return I("MissingInlineSuccessMessageContainerSection",d,b),[2,C["default"].error("Missing inlineSuccessMessage Container Section in addToCartSection","add-to-cart.client","handleAddToCartBrowserOperation")]}if(!p)return b||(null===c||void 0===c?void 0:c.errorHandler(pa,q)),I("MissingReftag",d,b),[2,
C["default"].error("Missing reftag in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];z=k.numitems;if(!z)return b||(null===c||void 0===c?void 0:c.errorHandler(pa,q)),I("MissingNumItems",d,b),[2,C["default"].error("Missing numItems in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];F=Date.now();Ub(g);return b?[4,Vb(h,z,t,d,e,n,null!==(Q=null===r||void 0===r?void 0:r.innerHTML)&&void 0!==Q?Q:"",null!==(R=null===u||void 0===u?void 0:u.innerHTML)&&
void 0!==R?R:"",g,F)]:[3,2];case 1:return y.sent(),[3,4];case 2:return[4,Wb(h,p,z,d,c,q,g,F)];case 3:y.sent(),y.label=4;case 4:return[2]}})})},Ub=function(a){(a=a.querySelector('input[name="spClickUrlATC"]'))&&a.value&&aa["default"].get(a.value,{accepts:"text/html, application/json",timeout:2E3}).then(function(){L["default"].count("ATCLibSponsoredProductsClicksATCUrlSuccess",1)}).catch(function(){L["default"].count("ATCLibSponsoredProductsClicksATCUrlFailure",1)})},Xb=function(a,b,c){return m.__awaiter(void 0,
void 0,void 0,function(){var d,e;return m.__generator(this,function(f){d={inputKeyValues:a,numItems:c};e=Ca.addTracking(Rb.addToCart,{ref_:b});return[2,e(d)]})})},Vb=function(a,b,c,d,e,f,g,h,k,p){return m.__awaiter(void 0,void 0,void 0,function(){var l,t,q;return m.__generator(this,function(n){switch(n.label){case 0:l=Number(b),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,Nb({inputKeyValues:a,numItems:l},null!==c&&void 0!==c?c:"")];case 2:t=n.sent();t.successful?(La(d,!0),t.count&&Ma(t.count),
v["default"].trigger("add-to-cart-library:add-to-cart:success"),e&&e.ProgressSection&&e.DefaultProgressSection&&Qb(f,e)):I("FailureResponse",d,!0);n=t.experience;var r=t.successful;oa(f,e);try{for(var u in n)na(u,e,f,n[u])}catch(w){u=r?h:g,oa(f,e),na("ErrorMessage",e,f,u)}return[3,5];case 3:return q=n.sent(),v["default"].trigger("add-to-cart-library:add-to-cart:error"),oa(f,e),na("ErrorMessage",e,f,g),I("Error",d,!0),C["default"].error("callNeoAddToCart Error: "+q.message,"add-to-cart.client","handleAddToCartBrowserOperation"),
[3,5];case 4:return Ka(d,p,!0),Ja(k,p),[7];case 5:return[2]}})})},Wb=function(a,b,c,d,e,f,g,h){return m.__awaiter(void 0,void 0,void 0,function(){var k,p;return m.__generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,3,4]),[4,Xb(a,b,Number(c))];case 1:return k=l.sent(),k.success?(La(d,!1),k.count&&Ma(k.count),null===e||void 0===e?void 0:e.successHandler(k,f)):(I("FailureResponse",d,!1),null===e||void 0===e?void 0:e.errorHandler(k,f)),Pb(a),[3,4];case 2:return p=l.sent(),I("Error",
d,!1),null===e||void 0===e?void 0:e.errorHandler(pa,f),C["default"].error("callAddToCart Error: "+p.message,"add-to-cart.client","handleAddToCartBrowserOperation"),[3,4];case 3:return Ka(d,h,!1),Ja(g,h),[7];case 4:return[2]}})})},Oa=function(a,b,c,d){v["default"].trigger("p13n:sc:cartupdated:"+a,b);d&&v["default"].trigger("add-to-cart-library:update-cart-count:trigger",c)},X;(function(a){a.removeItemFromCart="removeItemFromCart";a.addItemToCart="addItemToCart"})(X||(X={}));var Yb=Aa.setup(["modifyItemsInCart"]),
fa=Ba.setup(),$b=function(a,b){if("true"!==a.dataset.initializedCartSubscriber)v["default"].on("p13n:sc:cartupdated:"+b,function(c){Zb(a,c);a.dataset.initializedCartSubscriber="true"})},qa=function(a,b){a?b.classList.add("a-button-disabled"):b.classList.remove("a-button-disabled")},ia=function(a,b,c){var d=a.querySelector(".asin-id-"+b+" .p13n-sc-atc-failure"),e=null===d||void 0===d?void 0:d.querySelector(".p13n-sc-atc-failure .a-declarative"),f=a.querySelector(".asin-id-"+b+" .p13n-sc-default-atc-error-container"),
g=function(p){var l;return f&&(null===(l=null===f||void 0===f?void 0:f.querySelector(p))||void 0===l?void 0:l.textContent)};b=null===d||void 0===d?void 0:d.querySelector(".p13n-sc-popover");c=c&&c.failureMessage;var h=g(".p13n-sc-default-atc-error"),k=g(".p13n-sc-default-atc-product-error");g=g(".p13n-sc-default-atc-error-url");g=h&&g&&k?h.replace("${dpUrl}","<a href="+g+">"+k+"</a>"):void 0;G(e)&&G(b)&&(c?e.dataset.aPopover='{"inlineContent":"'+c+'"}':g&&(e.dataset.aPopover='{"inlineContent":"'+
g+'"}'),D["default"].show(b),b.click());G(d)&&D["default"].show(d);ac((null===a||void 0===a?0:a.classList.contains("p13n-sc-shoveler"))?a:null===a||void 0===a?void 0:a.querySelector(".p13n-sc-shoveler"))},ac=function(a){G(a)&&Da["default"].getCarousel(a).init()},ra=function(a,b){a=a.querySelector(".asin-id-"+b+" .p13n-sc-atc-failure");G(a)&&D["default"].hide(a);a=null===a||void 0===a?void 0:a.querySelector(".p13n-sc-popover");G(a)&&D["default"].hide(a)},Pa=function(a){return parseInt(G(a)&&a.getAttribute("data-maxorderquantity")||
"999",10)},Zb=function(a,b){var c=a.querySelector(".p13n-sc-atc-stepper-section"),d=a.querySelector(".add-to-cart-section"),e=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-quantity-display"),f=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-trash-button"),g=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-remove-button"),h=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-add-button"),k=function(l){l?(D["default"].show(c),D["default"].hide(d)):(D["default"].hide(c),
D["default"].show(d))};a=function(l){G(f)&&G(g)&&(l?(D["default"].show(f),D["default"].hide(g)):(D["default"].hide(f),D["default"].show(g)))};var p=function(l){G(h)&&(l?h.classList.remove("p13n-atc-add-disabled"):h.classList.add("p13n-atc-add-disabled"))};0<b?(k(!0),G(e)&&(e.textContent=b.toString()),G(c)&&c.setAttribute("data-currentquantity",b.toString()),e=Pa(c),a(1===b),p(b<e)):k(!1)},bc=function(a,b,c){b={items:[{id:c,quantity:b}]};return Ca.addTracking(Yb.modifyItemsInCart,{ref_:a})(b)},Qa=
function(a,b){return m.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g,h,k,p,l,t,q;return m.__generator(this,function(n){switch(n.label){case 0:b.stopBubble();c=null===b||void 0===b?void 0:b.currentTarget;if(!c)return[2];d=c.parentElement;if(null===d||void 0===d||!d.classList.contains("p13n-sc-atc-stepper-section"))throw Error("DOM formatting incompatible with stepper");if(d.classList.contains("a-button-disabled"))return[2];e=c.dataset.id;f=d.dataset.modifyId;g=d.dataset.reftag;h=Gb(d.dataset.currentquantity);
k=Pa(d);if(!(e&&e.length&&h&&g&&f))throw Error("DOM formatting incompatible with stepper");p=h+a;if(p>k&&0<a)return[2];l=function(){d.parentElement&&ia(d.parentElement,e)};t=function(){d.parentElement&&ra(d.parentElement,e)};qa(!0,d);n.label=1;case 1:return n.trys.push([1,3,,4]),[4,bc(g,p,f).catch(function(){})];case 2:return q=n.sent(),qa(!1,d),q&&q.success||l(),q&&q.success&&void 0!==q.count?(t(),Oa(e,p,q.count,!0)):q&&q.success&&void 0===q.count&&(A.count("p13n:sc:lib:undefinedcartquantity",(A.count("p13n:sc:lib:undefinedcartquantity")||
0)+1),t()),[3,4];case 3:return n.sent(),l(),qa(!1,d),[3,4];case 4:return[2]}})})},Ra=function(a,b,c,d){Tb({postAddToCartHandler:{successHandler:function(e,f){c(f[0],a,e);ra(a,f[0])},errorHandler:function(e,f){d(f[0],a,e)}},metricsPrefixes:b})},cc=function(a){a&&aa["default"].get(a,{accepts:"text/html, application/json",timeout:2E3}).then(function(){L["default"].count("P13NSCCardsSponsoredProductsClicksATCUrlSuccess",1)}).catch(function(){L["default"].count("P13NSCCardsSponsoredProductsClicksATCUrlFailure",
1)})},sa=function(a){return 0===Math.floor(a/10)?"0"+a.toString():a.toString()},dc=function(a){var b=Date.now();var c=a.dayscountdowntoendtemplate,d=a.expiredstring,e=a.hourscountdowntoendtemplate,f=a.minutescountdowntoendtemplate;a=parseInt(a.endtime,10);if(b<=a){d=null;var g=a-b;a=Math.floor(g/864E5);var h=Math.floor(g/36E5);b=Math.floor(g/6E4%60);g=Math.floor(g/1E3%60);if(1<a&&c&&(d=c,null!==d))return c=d.replace("${daysCount}",a.toString());f&&(d=0===h?f:e);return null!==d?(c=d.replace("_hours_",
sa(h)),c=c.replace("_minutes_",sa(b)),c=c.replace("_seconds_",sa(g))):""}return d},ec=function(a){if(null!==a&&a.dataset.endtime){a.dataset.callbackAttached="true";var b=setInterval(function(){a.innerText===a.dataset.expiredstring&&clearInterval(b);var c=dc({dayscountdowntoendtemplate:a.dataset.dayscountdowntoendtemplate||"",endtime:a.dataset.endtime||"",expiredstring:a.dataset.expiredstring||"",hourscountdowntoendtemplate:a.dataset.hourscountdowntoendtemplate||"",minutescountdowntoendtemplate:a.dataset.minutescountdowntoendtemplate||
""});a.innerText=c},1E3)}},da=function(a,b){return a.querySelector("[class*="+b+"]")},fc=function(a,b,c){a=JSON.parse(a);a.adCreativeMetaData=b.adCreativeMetaData;a.feedbackFormContainerId=c;return encodeURI(JSON.stringify(a))},gc=function(a,b,c){return m.__awaiter(void 0,void 0,void 0,function(){var d,e,f,g,h,k,p;return m.__generator(this,function(l){d="adFeedbackModal_"+a;l=(null===(p=da(b,"ad-feedback-modal-container"))||void 0===p?void 0:p.className)||"";e="."+b.className+" ."+l.replace(" ",".");
g=(f=c().adCreativeMetaData.adCreativeDetails)?f.length:0;h={a11yOpenMessage:"",width:Math.max(560,125*g+130)};try{return k=ob["default"].create(d,e,h),[2,k]}catch(t){throw A.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+t);}})})},jc=function(a,b,c,d,e,f,g){var h="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var k=da(S["default"].cardRoot,h);a.on("beforeShow",function(){return m.__awaiter(void 0,
void 0,void 0,function(){var p,l;return m.__generator(this,function(t){switch(t.label){case 0:return p=hc(a,b,c),[4,a.render(function(q){var n="250px",r=c().adCreativeMetaData.adCreativeDetails;r&&2>r.length&&(n="150px");k.style.marginTop=n;q.innerHTML="";n=q.appendChild;r=document.getElementsByTagName("html")[0].dir;var u=S["default"].createElement("div"),w=S["default"].createElement("div");u.innerHTML=e;"rtl"===r?(u.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
w.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(u.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),w.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
w.appendChild(u);n.call(q,w);n=document.getElementsByTagName("html")[0].dir;r=S["default"].createElement("div");"rtl"===n?r.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):r.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");ic(k,r,d,p,f);q.appendChild(r)})];case 1:return t.sent(),(l=document.querySelector(".a-button-close"))&&l.setAttribute("aria-label",
g),[2]}})})})},hc=function(a,b,c){c=c();var d=c.adCreativeMetaData.adCreativeDetails;null===d||void 0===d?void 0:d.sort(function(e,f){return e.adCreativeIndex<f.adCreativeIndex?-1:1});return fc(b,c,a.id)},ic=function(a,b,c,d,e){b.appendChild(a);"function"==typeof A.uet&&A.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});aa["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===c?
"en-US":c}},{pl:d,deviceType:"desktop"}).then(function(f){return m.__awaiter(void 0,void 0,void 0,function(){var g,h,k;return m.__generator(this,function(p){"function"==typeof A.uet&&A.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});A.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);g=S["default"].createElement("div");g.innerHTML=String(f.responseBody);for(h=0;h<g.children.length;++h)k=g.children[h],"SCRIPT"===k.tagName?ta("script",k,b):"LINK"===k.tagName?
ta("link",k,b):ta("div",k,b);b.removeChild(a);return[2]})})}).catch(function(){"function"==typeof A.uet&&A.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});A.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);b.innerHTML=e});"function"==typeof A.uex&&A.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},ta=function(a,b,c){var d=S["default"].createElement(a);d.innerHTML=b.innerHTML;b.getAttributeNames().forEach(function(e){d.setAttribute(e,
b.getAttribute(e)||"")});c.appendChild(d)},Sa={},kc=function(a,b){return m.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g,h,k,p,l;return m.__generator(this,function(t){c=da(a,"ad-feedback-primary-link");d=b().adFeedbackLabelId;e=ea["default"].setup();f="open-modal"+d;g=b().adCreativeMetaData.adCreativeDetails;h=a.dataset;k=h.isDsaEnabled;p=h.weblabTreatment;l=String(k);"undefined"===l&&(l=g&&0<g.length?g[0].selectionSignals?"true":"false":"false");"true"===l&&"T1"!==p&&(l="false");e.attach(f,
c);e.define(f,"click",function(){return m.__awaiter(void 0,void 0,void 0,function(){var q;return m.__generator(this,function(n){switch(n.label){case 0:return(q=Sa[d])?[3,2]:[4,gc(d,a,b)];case 1:q=n.sent();var r=a.dataset,u=r.formHeaderText,w=r.dsaFormHeaderText;jc(q,r.adFeedbackPayload,b,r.currentLocale,"true"===l?w:u,r.formLoadErrorText,r.closeButtonAriaText);Sa[d]=q;n.label=2;case 2:return q.show(),[2]}})})});try{c.addEventListener("keydown",function(q){if(" "===q.key||"Enter"===q.key)q.preventDefault(),
c.click()})}catch(q){console.log("Couldnt add keydown event listner")}return[2]})})},lc=function(a,b){var c=ea["default"].setup(),d="mouse-enter"+b;b="mouse-leave"+b;var e=da(a,"ad-feedback-primary-link"),f=da(a,"ad-feedback-text-desktop"),g=da(a,"ad-feedback-sprite");c.attach(d,e);c.define(d,"mouseenter",function(){g.style.backgroundPosition="0px -12px";f.style.color="#111111"});c.attach(b,e);c.define(b,"mouseleave",function(){g.style.backgroundPosition="0px 0px";f.style.color="#555"})},ua=function(a){return m.__awaiter(void 0,
void 0,void 0,function(){var b,c,d,e;return m.__generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),b=a(),c=x["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+b.adFeedbackLabelId)[0],d=c.dataset.isSponsoredLabelActive,"false"===(d||"false").toLowerCase()?[2]:[4,lc(c,b.adFeedbackLabelId)];case 1:return f.sent(),[4,kc(c,a)];case 2:return f.sent(),[3,4];case 3:throw e=f.sent(),A.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+
e);case 4:return[2]}})})},mc=function(a){a=S["default"].cardRoot.getElementsByClassName(a);return Array.prototype.slice.call(a)},oc=function(a,b){mc("p13n-sc-unified-ad-label").forEach(function(c){c={adFeedbackLabelId:c.dataset.adFeedbackLabelId||"",adFeedbackAsin:c.dataset.adFeedbackAsin||"",adId:c.dataset.adId||"",campaignId:c.dataset.campaignId||"",advertiserId:c.dataset.advertiserId||"",marketplaceId:c.dataset.marketplaceId||"",isLocationUsed:c.dataset.locationUsed||"",isInterestBasedAdsOptOut:c.dataset.interestBased||
"",title:c.dataset.asinTitle||"",price:c.dataset.asinPrice||"",currencyCode:c.dataset.currencyCode||""};c.adFeedbackLabelId&&c.adFeedbackAsin&&c.adId&&c.campaignId&&c.advertiserId&&c.marketplaceId&&c.isLocationUsed&&c.isInterestBasedAdsOptOut&&nc(c,b,a)})},nc=function(a,b,c){var d="mobile"===b?Ta(a.adFeedbackLabelId,Ua(a,"mobile")):Ta(a.adFeedbackLabelId,Ua(a,"desktop"));c(function(){return d})},Ua=function(a,b){var c=b=m.__assign,d=a.adFeedbackAsin,e=a.adId,f=a.campaignId,g=a.title;var h=a.price;
var k=a.currencyCode;h=h&&k?{amount:h,currencyCode:k}:void 0;k=a.advertiserId;var p=a.marketplaceId;c=c.call(m,{},{asin:d,adCreativeIndex:0,adId:e,campaignId:f,title:g,priceInfo:h,advertiserIdNS:k&&p?"axiom."+p+"."+k:void 0});d=a.isLocationUsed;a=a.isInterestBasedAdsOptOut;a=void 0===d||void 0===a?void 0:{version:1,context:!0,location:"true"===d,pastActivity:"true"===a?0:1};return{adCreativeDetails:[b.call(m,c,{selectionSignals:a})]}},Ta=function(a,b){return{adFeedbackLabelId:a,adCreativeMetaData:b}},
pc={initCarousel:function(a){return m.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e,f;return m.__generator(this,function(g){b=a||{};c=b.afterPageLoaded;d=b.afterDeliveryMessageLoaded;e=x["default"].cardRoot.classList.contains("p13n-sc-shoveler")?[x["default"].cardRoot]:Array.prototype.slice.call(x["default"].cardRoot.getElementsByClassName("p13n-sc-shoveler"));f=U["default"].setup(["getCarouselItems"]);if(null===e||void 0===e||!e.length)return[2];e.forEach(function(h){return m.__awaiter(void 0,
void 0,void 0,function(){var k,p,l,t,q,n;return m.__generator(this,function(r){switch(r.label){case 0:k=h.dataset||{};p="true"===k.showlazyloaddeliverymessage;l=function(){v["default"].loadDynamicImage("[data-name]='"+n+"' .p13n-sc-dynamic-image");Eb(h);Cb(h);null===c||void 0===c?void 0:c(h);rb();Fb(h);p&&Bb(h).then(function(){return null===d||void 0===d?void 0:d(h)})};l();if(h.classList.contains("p13n-carousel-initialized"))return[2];h.classList.add("p13n-carousel-initialized");t=Da["default"].getCarousel(za.unscope(h));
q=mb["default"].getCarousel(h);n=t.getAttr("name");return[4,Promise.all([q.initialized,yb.setupModal(h)])];case 1:return r.sent(),v["default"].on("a:carousel:"+n+":change:pageSize",l),v["default"].on("a:carousel:"+n+":change:loading",l),v["default"].on("a:carousel:"+n+":change:animating",l),v["default"].on("a:carousel:"+n+":change:fetchedItems",l),q.attachRemoteOperation(function(u){var w=u.indexes;u=u.ids;var z=f,F=z.getCarouselItems,M=m.__assign,K=m.__assign({},k),Q=String(w[0]||0);var R=w[0]||
0,y,T,N=0,O=k.aCarouselOptions?k.aCarouselOptions:void 0;if(O&&(O=JSON.parse(O),O=null===(y=null===O||void 0===O?void 0:O.ajax)||void 0===y?void 0:y.id_list))for(y=0;y<R&&y<O.length;y++){var ja=JSON.parse(O[y]);"true"===((null===(T=null===ja||void 0===ja?void 0:ja.metadataMap)||void 0===T?0:T.isSponsoredProduct)?ja.metadataMap.isSponsoredProduct:"false")&&(N+=1)}return F.call(z,M.call(m,K,{ids:u,indexes:w,offset:Q,adOffset:N}))}),[2]}})})});return[2]})})}},qc={updateHandler:function(a){var b;void 0===
a&&(a=x["default"].cardRoot);a=Array.prototype.slice.call(a.querySelectorAll('[class*="dealsCardDealTimer"]:not([data-callback-attached])'));try{for(var c=m.__values(a),d=c.next();!d.done;d=c.next())ec(d.value)}catch(f){var e={error:f}}finally{try{d&&!d.done&&(b=c.return)&&b.call(c)}finally{if(e)throw e.error;}}}},rc={initializeInPageBadgeAtcOperations:Ra,initializeQuantityStepperAtcFlavoredOperations:function(a,b,c,d){var e=Array.prototype.slice.call(a.querySelectorAll(".p13n-sc-uncoverable-faceout"));
fa.define(X.removeItemFromCart,["click"],Qa.bind(null,-1));fa.define(X.addItemToCart,["click"],Qa.bind(null,1));e.forEach(function(f){var g=f.id;f=f.querySelector(".p13n-sc-atc-container");if(G(f)){$b(f,g);g=null===f||void 0===f?void 0:f.querySelector(".atc-stepper-trash-button");var h=null===f||void 0===f?void 0:f.querySelector(".atc-stepper-remove-button");f=null===f||void 0===f?void 0:f.querySelector(".atc-stepper-add-button");G(g)&&fa.attach(X.removeItemFromCart,g);G(h)&&fa.attach(X.removeItemFromCart,
h);G(f)&&fa.attach(X.addItemToCart,f)}});return Ra(a,b,function(f,g,h){var k;if(h.success&&(null===(k=null===h||void 0===h?void 0:h.items)||void 0===k?0:k.length)){k=h.items[0];var p;if(p=k.id){var l=a.querySelector("#atc-stepper-section-"+f);G(l)?(l.dataset.modifyId=p,p=!0):p=!1}else p=!1;p&&h.count&&void 0!==k.quantity?Oa(f,k.quantity,h.count,!1):(ia(g,f,h),d&&d(f,g,h));c&&(ra(g,f),c(f,g,h))}else ia(g,f,h),d&&d(f,g,h)},function(f,g,h){ia(g,f,h);d&&d(f,g,h)})},setupSponsoredProductATCListeners:function(a){a.querySelectorAll(".p13n-sc-atc-container").forEach(function(b){if("true"===
b.dataset.hasSponsoredUrl){var c=b.dataset.sponsoredAtcUrl;if(c){var d=b.querySelector("form.add-to-cart-data");d&&d.querySelector('input[type="submit"][name="submit.addToCart"]')&&(b.onclick=function(e){e.preventDefault();cc(c);d.submit()})}}})}},sc={enableDesktopUnifiedAdLabels:function(){oc(ua,"desktop")}},tc={enableAdFeedback:function(a){var b=x["default"].cardRoot.querySelector("[data-sponsoredhybridwidgetcontext]");b&&(b=b.getAttribute("data-sponsoredhybridwidgetcontext"))&&a(b).catch(function(c){return B["default"].log("enableAdFeedbackDelegate: Error occurred: "+
(c instanceof Error?c.message:JSON.stringify(c)))})}},uc={initializeQuantitySelectorWidgets:function(){v["default"].trigger("quantity-selector-widget:loadStatesAndInitialize")}},J=function(a,b){a&&(b?D["default"].show(a):D["default"].hide(a))},va=function(a,b){return(a=b.getElementsByClassName(a))&&1===a.length?a[0]:void 0},Y=function(a,b){void 0===b&&(b=1);A.count(a,(A.count(a)||0)+b)},vc=function(){function a(b,c,d,e,f,g,h,k){var p=this;this.throttledScrollAction=v["default"].throttle(function(){return m.__awaiter(p,
void 0,void 0,function(){return m.__generator(this,function(l){switch(l.label){case 0:return[4,this.getNextBatchIfBottomInView()];case 1:return l.sent(),[2]}})})},200);this.containerDataset=this.getContainerDataset(b);this.bottomOfListElement=c;this.containerForInsertion=d;this.insertFetchedItems=e;this.errorFetchingItemsElement=g;this.fetchAsinsRemoteOperation=f;this.spinnerFetchingItemsElement=h;this.batchSize=k||8;this.processingStatus={batchFailureCount:0,currentIndex:Number(b.dataset.indexOffset)||
0,individualBatchAttemptsCount:0,isAllContentLoaded:!1,isProcessing:!1}}a.prototype.getContainerDataset=function(b){if(!b.dataset||!b.dataset.asinList)throw Error("Dataset not present or does not contain required data!");return{asinList:JSON.parse(b.dataset.asinList),linkParameters:b.dataset.linkParameters||"{}",reftag:b.dataset.reftag||"",strategyId:b.dataset.strategyId||"",widgetGroupId:b.dataset.widgetGroupId||""}};a.prototype.getNextItemBatch=function(b){var c=this;this.processingStatus.individualBatchAttemptsCount+=
1;this.processingStatus.isProcessing=!0;var d=this.processingStatus.currentIndex;if(d>=this.containerDataset.asinList.length)return this.processingStatus.isAllContentLoaded=!0,Promise.resolve(void 0);J(this.spinnerFetchingItemsElement,!0);d=this.containerDataset.asinList.slice(d,d+this.batchSize);var e=d.map(function(f,g){return g+c.processingStatus.currentIndex});return this.fetchAsinsRemoteOperation({ids:d,indexes:e,linkparameters:this.containerDataset.linkParameters,offset:e[0].toString(),reftagprefix:this.containerDataset.reftag}).then(function(f){J(c.spinnerFetchingItemsElement,
!1);c.insertFetchedItems(b,f);c.processingStatus.batchFailureCount=0;c.processingStatus.currentIndex+=c.batchSize;c.processingStatus.individualBatchAttemptsCount=0;c.processingStatus.isProcessing=!1}).catch(function(f){console.log("Error fetching items: "+f);if(2<=c.processingStatus.individualBatchAttemptsCount){c.processingStatus.batchFailureCount+=1;if(2<=c.processingStatus.batchFailureCount){c.processingStatus.isProcessing=!0;J(c.spinnerFetchingItemsElement,!1);J(c.errorFetchingItemsElement,!0);
return}c.processingStatus.currentIndex+=c.batchSize}void c.getNextItemBatch(b)})};a.prototype.getNextBatchIfBottomInView=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(b){switch(b.label){case 0:if(this.processingStatus.isProcessing)return[3,3];this.processingStatus.isProcessing=!0;return D["default"].onScreen(this.bottomOfListElement,500)&&!this.processingStatus.isAllContentLoaded&&2>this.processingStatus.batchFailureCount?[4,this.getNextItemBatch(this.containerForInsertion)]:
[3,2];case 1:return b.sent(),[3,3];case 2:this.processingStatus.isProcessing=!1,b.label=3;case 3:return[2]}})})};a.prototype.isInErrorState=function(){return 2<=this.processingStatus.batchFailureCount};a.prototype.resetLazyLoading=function(){this.processingStatus.batchFailureCount=0;J(this.errorFetchingItemsElement,!1)};return a}(),Va=function(a,b,c){void 0===b&&(b=function(){});void 0===c&&(c=function(){});return m.__awaiter(void 0,void 0,void 0,function(){return m.__generator(this,function(d){switch(d.label){case 0:return a.dataset.event?
[4,wc(a.dataset.event,a,b,c)]:[3,2];case 1:return d.sent(),[3,5];case 2:return a.dataset.url?[4,xc(a.dataset.url,b,c)]:[3,4];case 3:return d.sent(),[3,5];case 4:B["default"].log("Element is missing dataset.url or dataset.event attribute"),c(),d.label=5;case 5:return[2]}})})},wc=function(a,b,c,d){return m.__awaiter(void 0,void 0,void 0,function(){var e,f,g,h,k,p;return m.__generator(this,function(l){switch(l.label){case 0:e=function(t){return m.__awaiter(void 0,void 0,void 0,function(){var q,n;return m.__generator(this,
function(r){switch(r.label){case 0:return q=function(u){u?c():(B["default"].log("Failed to call PPDS custom API"),d())},n=function(u){B["default"].log("Caught error when calling PPDS custom API: "+u.stack);d()},[4,t().then(q).catch(n)];case 1:return r.sent(),[2]}})})};f=function(t){return m.__awaiter(void 0,void 0,void 0,function(){var q;return m.__generator(this,function(n){switch(n.label){case 0:if(!b.dataset.asin)return[3,2];q={asin:b.dataset.asin};return[4,e(t.bind(null,q))];case 1:return n.sent(),
[3,3];case 2:B["default"].log("Element was missing required data: asin"),d(),n.label=3;case 3:return[2]}})})};g=a;switch(g){case "NOT_INTERESTED":return[3,1];case "DELETE_NOT_INTERESTED":return[3,5]}return[3,7];case 1:if(!b.dataset.asin)return[3,3];h={asin:b.dataset.asin,expirationTime:yc(b.dataset.suppressiondays),reason:b.dataset.reason,strategyId:b.dataset.strategyId||b.dataset.strategyid,widgetGroupId:b.dataset.widgetGroupId||b.dataset.widgetgroupid};k=U["default"].setup(["recordNotInterested"]);
return[4,e(k.recordNotInterested.bind(null,h))];case 2:return l.sent(),[3,4];case 3:B["default"].log("Element was missing required data: asin"),d(),l.label=4;case 4:return[3,8];case 5:return p=U["default"].setup(["deleteNotInterested"]),[4,f(p.deleteNotInterested)];case 6:return l.sent(),[3,8];case 7:return B["default"].log("Invalid PPDS event type: "+a),d(),[3,8];case 8:return[2]}})})},xc=function(a,b,c){return m.__awaiter(void 0,void 0,void 0,function(){return m.__generator(this,function(d){switch(d.label){case 0:return[4,
aa["default"].post(a,{accepts:"text/html,*/*",contentType:"application/x-www-form-urlencoded"}).then(function(){b()}).catch(function(e){B["default"].log("Failed to call AJAX endpoint "+a+" with error: "+e.message,"ERROR");c()})];case 1:return d.sent(),[2]}})})},yc=function(a){if(a&&(a=Number.parseInt(a,10),!(0>=a||(a=new Date(Date.now()+864E5*a),Number.isNaN(a.getTime())))))return a.toISOString()},zc=function(a,b,c,d,e,f,g,h,k,p){var l=a.getElementsByClassName(d)[0],t=a.getElementsByClassName(e)[0],
q=h?a.getElementsByClassName(h)[0]:void 0,n=a.querySelector(f);if(!t||!l||!n)throw Error("One or more elements to record feedback are not present.");d=function(r,u){r&&(r.onclick=function(){return m.__awaiter(void 0,void 0,void 0,function(){var w;return m.__generator(this,function(z){switch(z.label){case 0:return[4,Va(r,function(){u&&k?k():!u&&p&&p();J(n,!1);J(t,u);J(l,!u);q&&(q.style.opacity=u?"0.3":"1");g&&Y(g.prefix+":record-feedback:success")},function(){console.log("Failed to record feedback on click");
J(n,!0);g&&Y(g.prefix+":record-feedback:failure")})];case 1:return z.sent(),g&&(w=u?g.primaryAction:g.secondaryAction,Y(g.prefix+":record-feedback:"+w)),[2]}})})})};b=va(b,a);d(b,!0);a=va(c,a);d(a,!1)},Ac=function(a,b,c,d,e){var f=function(p){return U["default"].setup(["getCanariesFeedbackReasons"]).getCanariesFeedbackReasons(p)},g=d.getElementsByClassName("p13n-not-interested-reasons")[0],h=va("p13n-not-interested-success-message",d),k=d.querySelector("#p13n-record-feedback-error-message");return function(){e.includes(a)||
e.push(a);g?(J(h,!1),g.hasChildNodes()||f({asin:a,strategyId:b,widgetGroupId:c}).then(function(p){Array.prototype.slice.call(p.getElementsByClassName("p13n-feedback-reasons-option")).forEach(function(l){function t(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(n){Va(l,function(){J(k,!1);J(g,!1);J(h,!0)},function(){console.log("Failed to record feedback reason on click");k&&J(k,!0)});return[2]})})}var q=l.getElementsByTagName("input")[0];q.addEventListener("keypress",
function(n){return m.__awaiter(void 0,void 0,void 0,function(){return m.__generator(this,function(r){"Enter"===n.key&&t();return[2]})})});q.addEventListener("click",function(n){return m.__awaiter(void 0,void 0,void 0,function(){return m.__generator(this,function(r){0!==n.screenX&&0!==n.screenY&&t();return[2]})})})});g.appendChild(p)}),J(g,!0)):J(h,!0)}},Bc=function(a,b){return function(){var c=b.indexOf(a);-1<c&&b.splice(c,1)}},Cc={feedbackModalInit:function(a,b){var c={prefix:"p13n-desktop-feedback-modal",
primaryAction:"not-interested",secondaryAction:"remove-not-interested"},d=[],e=x["default"].cardRoot.querySelector(".p13n-desktop-canaries-kebab-data");if(e){Y(c.prefix+":kebab:render");e.onclick=function(){return Y(c.prefix+":kebab:click")};x["default"].cardRoot.querySelector(".p13n-desktop-feedback-modal-link").onclick=function(){return Y(c.prefix+":modal:open")};var f=x["default"].cardRoot.querySelector(".p13n-ni-iyr-redirect");f&&(f.onclick=function(){return Y(c.prefix+":iyr:click")});f=x["default"].cardRoot.getElementsByClassName("p13n-canaries-desktop-feedback-modal")[0];
if(!f)throw Error("Dataset not present or does not contain required data!");var g=f.querySelector("#endOfList"),h=x["default"].cardRoot.getElementsByClassName("p13n-desktop-feedback-modal-faceouts-list")[0],k=f.querySelector("#p13n-desktop-feedback-modal-loading-items"),p=f.querySelector("#p13n-desktop-feedback-modal-error-loading-items"),l=new vc(e,g,h,function(r,u){var w;if(u.hasChildNodes()){u=Array.from(u.childNodes);try{for(var z=m.__values(u),F=z.next();!F.done;F=z.next()){var M=F.value;u=M;
var K=u.getElementsByClassName("p13n-individual-feedbackButton")[0];zc(u,"p13n-individual-feedbackButton","p13n-feedback-undo-button","p13n-desktop-feedback-modal-initial-faceout","p13n-desktop-feedback-modal-undo-faceout","#p13n-record-feedback-error-message",c,"p13n-feedback-list-asin-image",Ac(K.dataset.asin||"",e.dataset.strategyId||"",e.dataset.widgetGroupId||"",u,d),Bc(K.dataset.asin||"",d));r.appendChild(M);K.dataset.strategyId=e.dataset.strategyId;K.dataset.widgetGroupId=e.dataset.widgetGroupId}}catch(R){var Q=
{error:R}}finally{try{F&&!F.done&&(w=z.return)&&w.call(z)}finally{if(Q)throw Q.error;}}}},function(r){return U["default"].setup(["getCanariesFeedbackModalItems"]).getCanariesFeedbackModalItems(r)},p,k);x["default"].cardRoot.querySelector(".p13n-desktop-feedback-modal-link").addEventListener("click",function(){return m.__awaiter(void 0,void 0,void 0,function(){return m.__generator(this,function(r){switch(r.label){case 0:return""!==h.innerHTML||l.isInErrorState()?[3,2]:[4,l.getNextItemBatch(h)];case 1:return r.sent(),
[3,4];case 2:if(!l.isInErrorState())return[3,4];l.resetLazyLoading();return[4,l.getNextItemBatch(h)];case 3:r.sent(),r.label=4;case 4:return[2]}})})});f.addEventListener("wheel",l.throttledScrollAction);var t=function(r){return U["default"].setup(["refreshCard"]).refreshCard(r)};f=e.dataset.uniqueId;g=e.dataset.input;!g&&(k=x["default"].cardRoot.querySelector(".p13n-desktop-canaries-wrapper-data"),null===k||void 0===k?0:k.dataset)&&(g=k.dataset.input);var q=JSON.parse(g||"{}"),n=x["default"].cardRoot.querySelector("#p13n-desktop-feedback-modal-close-message");
v["default"].on("a:popover:hide:p13n-desktop-feedback-modal_"+f,function(){return m.__awaiter(void 0,void 0,void 0,function(){var r,u,w,z,F,M,K,Q,R,y;return m.__generator(this,function(T){r=e.querySelector(".p13n-feedback-popover-kebab-button");r.focus();if(0<d.length&&q&&q.content){u=q.content.recommendations;w=[];try{for(z=m.__values(u),F=z.next();!F.done;F=z.next())M=F.value,K=M.id,Q=d.indexOf(K),0>Q&&w.push(M)}catch(N){R={error:N}}finally{try{F&&!F.done&&(y=z.return)&&y.call(z)}finally{if(R)throw R.error;
}}w.length<b?n?(n.style.display="inline",n.style.position="absolute",n.style.top=(x["default"].cardRoot.offsetHeight-n.offsetHeight)/2+"px",n.style.right=(x["default"].cardRoot.offsetWidth-n.offsetWidth)/2+"px"):B["default"].log("Could not find the changeover element for message surfacing"):(q.content.recommendations=w,t(q).then(function(N){x["default"].cardRoot.innerHTML=N.outerHTML;a()}).catch(function(N){B["default"].log("Error fetching items: "+N)}))}return[2]})})})}}},Wa=document.body.style.overflow,
W=function(a){return a.find("#cpf-sidesheet-content-container")},Dc=function(a){var b,c;null!==(b=a.$target)&&void 0!==b&&b.length&&(null===(c=a.$target)||void 0===c?0:c.hasClass("cpf-sidesheet-anchor-end"))&&v["default"].delay(function(){Z().find("a[href], button").first().focus()},0)},Ec=function(a){var b;null!==(b=a.$target)&&void 0!==b&&b.length&&v["default"].delay(function(){v["default"].$(document.activeElement).hasClass("cpf-sidesheet-anchor-start")&&Z().find("a[href], button").last().focus()},
0)},Xa=function(){document.body.style.overflow=Wa?Wa:"";E["default"]("#cpf-sidesheet-background").hide();var a=Z();a.attr("aria-hidden","true");E["default"]("#cpf-sidesheet").attr("aria-hidden","true");W(a).attr("aria-hidden","true");E["default"]("#a-page").attr("aria-hidden","false");ha(a).hide();Fc()},Z=function(){return E["default"]("#cpf-sidesheet-containerempty-div")},ha=function(a){return a.find("#cpf-sidesheet-secondary-content-container")},Fc=function(){var a=E["default"]("#cpf-sidesheet").width()+
50;Gc({right:"-"+a+"px"},function(){E["default"]("#cpf-sidesheet").hide()})},Hc=function(){E["default"]("#cpf-sidesheet").show(function(){v["default"].animate(E["default"]("#cpf-sidesheet"),{right:"0"},300,"ease-out",function(){E["default"]("#cpf-sidesheet-close").show()})})},Gc=function(a,b){v["default"].animate(E["default"]("#cpf-sidesheet"),a,300,"ease-out",b)},Ic=function(a){a=ea["default"].setup().define;a("cpf-side-sheet-open","click",function(b){var c;b=null===(c=b.currentTarget)||void 0===
c?void 0:c.getAttribute("cpf-side-sheet-content-id");var d=Z();c=E["default"]("#"+b);d&&0!==d.length||(b=E["default"](document.createElement("div")),b.attr("id","cpf-sidesheet-containerempty-div"),d=x["default"].cardRoot.getElementsByClassName("cpf-sidesheet-container")[0].innerHTML,b.append(d),E["default"]("body").prepend(b),d=b);c&&0!==c.length&&(W(d).html(c.html()),c=Z(),W(c).show(),c.attr("aria-hidden","false"),E["default"]("#cpf-sidesheet").attr("aria-hidden","false"),W(c).attr("aria-hidden",
"false"),E["default"]("#a-page").attr("aria-hidden","true"),E["default"]("body").css("overflow","hidden"),E["default"]("#cpf-sidesheet-background").show(),Hc(),c.find(".cpf-sidesheet-close-button").focus())});v["default"].declarative("cpf-side-sheet-close","click",function(b){Xa()});v["default"].declarative("cpf-side-sheet-secondary-open","click",function(b){var c,d=Z();b=null===(c=b.data)||void 0===c?void 0:c.preloadDomId;c=E["default"]("#"+b);d.find(".cpf-sidesheet-close-button").focus();W(d).hide();
W(d).attr("aria-hidden",!0);ha(d).show().html(c.html());ha(d).attr("aria-hidden",!1)});v["default"].declarative("cpf-bottom-sheet-secondary-back","click",function(b){b=Z();b.find(".cpf-sidesheet-close-button").focus();W(b).show();W(b).attr("aria-hidden",!1);ha(b).hide();ha(b).attr("aria-hidden",!0)});v["default"].declarative("cpf-sidesheet-capture","keydown",function(b){"keydown"!==b.type||27!==b.$event.keyCode&&27!==b.$event.key||Xa()});v["default"].declarative("cpf-sidesheet-capture","focusin",
function(b){Dc(b)});v["default"].declarative("cpf-sidesheet-capture","focusout",function(b){Ec(b)})},Kc=function(a){return m.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e,f,g,h,k,p,l,t,q,n;return m.__generator(this,function(r){switch(r.label){case 0:b=null!==(l=a.widgetLabelClass)&&void 0!==l?l:"hybrid-widget-sponsored-label";c=null!==(t=a.productLabelClass)&&void 0!==t?t:"hybrid-sponsored-label";d=JSON.parse(a.sponsoredHybridWidgetContextJson);e=null!==(q=d.painterId)&&void 0!==q?q:"unknown";
f=null!==(n=d.slotId)&&void 0!==n?n:"unknown";ba["default"].count("".concat(e,".").concat(f,".initAdFeedback"),1);if(g=Jc(b,c,a.enableWidgetAdFeedback,e,f))return[2,g];h=0;k=Ya(c);p=k.map(function(u){u=wa(u);if(u.adFeedbackLabelId&&u.adFeedbackAsin&&u.adId&&u.campaignId&&u.advertiserId&&u.marketplaceId&&u.isLocationUsed&&u.isInterestBasedAdsOptOut)return a.enableProductAdFeedback(u);h++;return Promise.resolve()});ba["default"].count("".concat(e,".").concat(f,".productAdFeedback"),k.length);ba["default"].count("".concat(e,
".").concat(f,".invalidProductAdFeedbackPayload"),h);return[4,Promise.all(p)];case 1:return r.sent(),[2]}})})},Jc=function(a,b,c,d,e){void 0===a&&(a="hybrid-widget-sponsored-label");void 0===b&&(b="hybrid-sponsored-label");a=Ya(a);ba["default"].count("".concat(d,".").concat(e,".widgetAdFeedbackLabel"),a.length);if(1<a.length)throw Error("More than one ad feedback label found for widget");if(1===a.length){a=wa(a[0]);if(!a.adFeedbackLabelId)throw ba["default"].count("".concat(d,".").concat(e,".missingWidgetAdFeedbackLabel"),
1),Error("Missing required attribute adFeedbackLabelId");b=S["default"].cardRoot.querySelectorAll("[class*='".concat(b,"']"));var f=[];b.forEach(function(g){g=wa(g);f.push(g)});ba["default"].count("".concat(d,".").concat(e,".widgetAdFeedback"),b.length);return c(a.adFeedbackLabelId,f)}},wa=function(a){return{adFeedbackLabelId:a.dataset.adFeedbackLabelId||"",adFeedbackAsin:a.dataset.adFeedbackAsin||"",adId:a.dataset.adId||"",campaignId:a.dataset.campaignId||"",advertiserId:a.dataset.advertiserId||
"",marketplaceId:a.dataset.marketplaceId||"",isLocationUsed:a.dataset.locationUsed||"",isInterestBasedAdsOptOut:a.dataset.interestBasedAdsOptOut||"",title:a.dataset.asinTitle||"",price:a.dataset.asinPrice||"",currencyCode:a.dataset.currencyCode||"",adProgram:a.dataset.adProgram||"",adCreativeId:a.dataset.adCreativeId||"",adNetwork:a.dataset.adNetwork||"",advertiserIdNS:a.dataset.advertiserIdNs||"",campaignIdNS:a.dataset.campaignIdNs||"",selectionSignals:a.dataset.selectionSignals||""}},Ya=function(a){a=
S["default"].cardRoot.getElementsByClassName(a);return Array.prototype.slice.call(a)},Za=function(a,b){if(a&&b)return{amount:a,currencyCode:b}},$a=function(a){if("1024"===(a.adProgram||"1024")){var b=m.__assign,c=m.__assign,d=a.adFeedbackAsin,e=a.adId,f=a.campaignId,g=a.title,h=Za(a.price,a.currencyCode);var k=a.advertiserId,p=a.marketplaceId;c=c.call(m,{},{asin:d,adCreativeIndex:0,adId:e,campaignId:f,title:g,priceInfo:h,advertiserIdNS:k&&p?"axiom."+p+"."+k:void 0});d=a.isLocationUsed;e=a.isInterestBasedAdsOptOut;
var l;a=void 0===d||void 0===e?void 0:(l={version:1,context:!0},l.location="true"===d,l.pastActivity="true"===e?0:1,l);return b.call(m,c,{selectionSignals:a})}return{asin:a.adFeedbackAsin,adCreativeIndex:0,adId:a.adId,campaignId:a.campaignId,adCreativeId:a.adCreativeId,adNetwork:a.adNetwork,title:a.title,priceInfo:Za(a.price,a.currencyCode),advertiserIdNS:a.advertiserIdNS,campaignIdNS:a.campaignIdNS,selectionSignals:JSON.parse(a.selectionSignals||"{}")}},Nc=function(a){return m.__awaiter(void 0,void 0,
void 0,function(){return m.__generator(this,function(b){return[2,Kc({widgetLabelClass:"hybrid-widget-sponsored-label",enableWidgetAdFeedback:Lc,productLabelClass:"hybrid-sponsored-label",enableProductAdFeedback:Mc,sponsoredHybridWidgetContextJson:a})]})})},Lc=function(a,b){b=b.map($a);var c={adFeedbackLabelId:a,adCreativeMetaData:{adCreativeDetails:b}};return ua(function(){return c})},Mc=function(a){var b=[$a(a)],c={adFeedbackLabelId:a.adFeedbackLabelId,adCreativeMetaData:{adCreativeDetails:b}};return ua(function(){return c})},
ab=function(){return m.__awaiter(void 0,void 0,void 0,function(){var a,b;return m.__generator(this,function(c){switch(c.label){case 0:return a=pc.initCarousel({afterPageLoaded:function(d){qc.updateHandler(d);uc.initializeQuantitySelectorWidgets();"true"===ya.cardRoot().dataset.useSponsoredAdsCardsLibrary?(tc.enableAdFeedback(Nc),rc.setupSponsoredProductATCListeners(x["default"].cardRoot)):sc.enableDesktopUnifiedAdLabels()}}),b=Cc.feedbackModalInit(ab,1),Ic(),[4,a];case 1:return c.sent(),[4,b];case 2:return c.sent(),
[2]}})})};xa._operationNames=["getCarouselItems","getCanariesFeedbackModalItems","refreshCard","deleteNotInterested","recordNotInterested"];xa.card=ab});
