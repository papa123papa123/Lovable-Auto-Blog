# =================================================
# CURSOR RULES (FULL AUTOPILOT / NO PAUSE)
# =================================================

# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
# ğŸš¨ğŸš¨ğŸš¨ æœ€é‡è¦ï¼šGitHubãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®çµ¶å¯¾ç¦æ­¢äº‹é … ğŸš¨ğŸš¨ğŸš¨
# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
# âŒâŒâŒ çµ¶å¯¾ã«æ—¢å­˜ã®articlesãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤ãƒ»ä¸Šæ›¸ãã™ã‚‹ãªï¼ï¼ï¼âŒâŒâŒ
# 
# - ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‚„Reactã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã€çµ¶å¯¾ã«articlesãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤ã™ã‚‹ãª
# - sites/<domain>/ ã«æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã™ã‚‹éš›ã€æ—¢å­˜ã®articlesãƒ•ã‚©ãƒ«ãƒ€ã‚’ä¿æŒã—ã‚
# - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…¨ä½“ã‚’ç½®ãæ›ãˆã‚‹æ“ä½œï¼ˆrsync -a --deleteç­‰ï¼‰ã¯çµ¶å¯¾ç¦æ­¢
# - å¿…ãšãƒ•ã‚¡ã‚¤ãƒ«å˜ä½ã§add/commitã—ã€æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ãªã„ã“ã¨
#
# âœ… æ­£ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ï¼š
#   git add sites/<domain>/index.html
#   git add sites/<domain>/assets/
#   git commit -m "Add toppage"
#   git push
#
# âŒ é–“é•ã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ï¼ˆarticlesãŒæ¶ˆãˆã‚‹ï¼‰ï¼š
#   rm -rf sites/<domain>/*  # çµ¶å¯¾ç¦æ­¢ï¼
#   cp -r dist/* sites/<domain>/  # articlesãŒæ¶ˆãˆã‚‹ï¼
#
# ğŸ”¥ ã‚‚ã—articlesãƒ•ã‚©ãƒ«ãƒ€ã‚’å‰Šé™¤ã—ã¦ã—ã¾ã£ãŸå ´åˆã®å¾©å…ƒæ–¹æ³•ï¼š
#   git checkout <å‰ã®ã‚³ãƒŸãƒƒãƒˆ> -- sites/<domain>/articles
#   git add sites/<domain>/articles
#   git commit -m "Restore deleted articles"
#   git push
# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
# ğŸš¨ğŸš¨ğŸš¨ æœ€é‡è¦ï¼šGEMINI APIãƒ¢ãƒ‡ãƒ«åï¼ˆ2026å¹´1æœˆæ™‚ç‚¹ï¼‰ğŸš¨ğŸš¨ğŸš¨
# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
# 2026å¹´ç¾åœ¨ã€Gemini APIã§ä½¿ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®4ç¨®é¡ã®ã¿ï¼š
# 
# 1. gemini-3-pro-preview        ï¼ˆãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆãƒ»æœ€é«˜æ€§èƒ½ï¼‰
# 2. gemini-3-pro-image-preview  ï¼ˆç”»åƒç”Ÿæˆå°‚ç”¨ï¼‰
# 3. gemini-3-flash-preview      ï¼ˆãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆãƒ»é«˜é€Ÿï¼‰
# 4. gemini-2.5-flash            ï¼ˆãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆãƒ»è»½é‡ï¼‰
#
# âŒ çµ¶å¯¾ã«ä½¿ç”¨ç¦æ­¢ï¼š
#   - gemini-2.0-xxx ï¼ˆå­˜åœ¨ã—ãªã„ï¼404ã‚¨ãƒ©ãƒ¼ï¼ï¼‰
#   - gemini-1.5-xxx ï¼ˆå¤ã„ï¼å»ƒæ­¢æ¸ˆã¿ï¼ï¼‰
#   - gemini-2.0-flash-preview-image-generation ï¼ˆå­˜åœ¨ã—ãªã„ï¼ï¼‰
#
# âœ… ç”»åƒç”Ÿæˆã«ã¯å¿…ãš gemini-3-pro-image-preview ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ï¼
# âœ… ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆã«ã¯ gemini-3-pro-preview ã¾ãŸã¯ gemini-2.5-flash ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ï¼
# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

[è³ªå•ã¸ã®å›ç­”ãƒ«ãƒ¼ãƒ«]
# - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ•ã‚¡ã‚¤ãƒ«åã‚„é–¢æ•°åãªã©ã€Œä½•ã‹ã€ã‚’èã„ãŸã ã‘ã®å ´åˆã€ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¡¨ç¤ºã—ãªã„
# - å¿…è¦æœ€å°é™ã®æƒ…å ±ã®ã¿ã‚’å›ç­”ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åã€é–¢æ•°åãªã©ï¼‰
# - ã‚³ãƒ¼ãƒ‰å…¨ä½“ã‚’è¡¨ç¤ºã™ã‚‹ã®ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«ã€Œã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã›ã¦ã€ã€Œå®Ÿè£…ã—ã¦ã€ãªã©ã¨ä¾é ¼ã—ãŸå ´åˆã®ã¿
# - ãƒˆãƒ¼ã‚¯ãƒ³ç¯€ç´„ã‚’æœ€å„ªå…ˆã«

[Development Policy]
- Single-line development only. Do NOT use branch, merge, rebase, or stash.
- Use Git as overwrite-with-history only.
- Do NOT ask questions, request confirmation, or pause mid-task.
- If uncertain, choose the simplest working solution and continue to the end.

[Code Quality]
- One Python file = one responsibility.
- Target <= 100 lines per .py file (soft limit).
- Prefer modifying existing files; minimize new file creation.
- If a new file is created, keep it single-responsibility and ~100 lines.
- Place split modules under existing workflow-step subdirectories.
- Do NOT create generic directories such as `src`.
- Remove duplicate logic, unnecessary conditionals, and complexity.

[New File Creation (Autopilot)]
- New .py files may be created automatically when necessary.
- Limit: maximum 2 new files per task.
- If more than 2 files seem needed, proceed with the best 2-file split and continue.
- Do NOT move, rename, or reorganize existing files or directories.

[Edit Scope]
- Modify only user-specified files and folders.
- Always exclude: out/, log/, cache/, .cursor/.
- ğŸš¨ æŒ‡ç¤ºã•ã‚ŒãŸä¿®æ­£ä»¥å¤–ã®å¤‰æ›´ã¯çµ¶å¯¾ã«è¡Œã‚ãªã„ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã€æ”¹å–„ã€æœ€é©åŒ–ãªã©å‹æ‰‹ã«ã‚„ã‚‹ãªï¼‰
- ğŸš¨ æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ãƒ»å¤‰æ›´ã™ã‚‹å ´åˆã¯ã€ãã®éƒ¨åˆ†ã®ã¿ã‚’æœ€å°é™ã«ä¿®æ­£ã™ã‚‹
- ğŸš¨ ã‚³ãƒ¡ãƒ³ãƒˆã‚„å¤‰æ•°åã‚’å‹æ‰‹ã«å¤‰ãˆã‚‹ãª

[Output Rules]
- All implementation must be done by the Agent.
- All user-facing outputs MUST be in Japanese.
- Prefer PowerShell format for commands.
- In PowerShell, NEVER use `&&`; always use `;`.

[Required Output When Modifying Files]
- When ANY file is modified or created, ALWAYS output command blocks at the end:
  1. For Python scripts: Python execution command (starting with `python`, NOT verification code)
  2. git add / commit / push commands (PowerShell format) - REQUIRED for ALL file modifications
- Commands MUST be in code blocks for user to execute in terminal.
- Agent does NOT execute these commands; user executes them manually.
- Do NOT add explanations; end with command blocks only.
- This rule applies to ALL file types, not just Python scripts.

[Generated Artifacts]
- When files or directories are generated, always print the artifact path in one line.

[Encoding]
- PowerShell (.ps1): UTF-8 with BOM, English strings only.
- Python (.py): UTF-8 without BOM, include coding header.
- YAML: UTF-8 without BOM.
- Others: UTF-8 without BOM.

[Japanese File Path Handling]
- ALWAYS set UTF-8 encoding before handling file paths with Japanese characters.
- This is CRITICAL to prevent encoding errors like "ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: workflow\out\2025_12_22_è­›ãƒ»01_17_é©Ÿèƒ†ç¹è–™ãƒ»ç¹ï½«\index.html"
- PowerShell scripts MUST include UTF-8 encoding setup at the beginning:
  [Console]::OutputEncoding = [System.Text.Encoding]::UTF8
  [Console]::InputEncoding = [System.Text.Encoding]::UTF8
  $OutputEncoding = [System.Text.Encoding]::UTF8
  chcp 65001 | Out-Null
  $env:PYTHONIOENCODING = "utf-8"
  $env:PYTHONUTF8 = "1"
  $PSDefaultParameterValues['*:Encoding'] = 'utf8'
- Python scripts MUST set encoding environment variables at the start (before any imports):
  import os
  import sys
  if sys.platform == "win32":
      os.environ['PYTHONIOENCODING'] = 'utf-8'
      os.environ['PYTHONUTF8'] = '1'
- When using Path objects in Python, always use encoding='utf-8' for file operations:
  path.read_text(encoding='utf-8')
  path.write_text(content, encoding='utf-8')
- File paths with Japanese characters MUST be handled as UTF-8 strings throughout the codebase.
- Use setup_encoding.ps1 or load_env.ps1 for PowerShell scripts to ensure consistent encoding.
- Use workflow.common.utils.encoding.setup_windows_encoding() for Python scripts when possible.

[Date & Time]
- Always be aware of the current date/time.
- Use accurate timestamps in filenames and logs.

[HTML Structure Modifications]
- When modifying HTML structure or styling, ALWAYS update BOTH:
  1. The Python file that generates the HTML (e.g., BBB/html_structure/builder.py)
  2. The actual HTML files or CSS files that are used as templates/output
- Never modify only one side; ensure consistency between generator code and output files.
- If HTML files are generated dynamically, regenerate them after modifying the generator.
- If static HTML files exist, update them directly along with the generator code.
